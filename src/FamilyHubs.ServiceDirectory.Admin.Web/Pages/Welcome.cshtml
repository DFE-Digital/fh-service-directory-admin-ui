@page
@using FamilyHubs.SharedKernel.Identity;
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model WelcomeModel
@{
    ViewData["Title"] = "Welcome";
    var organisationName = Model.FamilyHubsUser.OrganisationId == "-1" ? "Department for Education" : Model.OrganisationViewModel.Name;
}

<main class="govuk-main-wrapper govuk-main-wrapper--auto-spacing" id="main-content" role="main">
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            
            <h1 class="govuk-heading-l govuk-!-margin-bottom-1">@Model.FamilyHubsUser.FullName</h1>

            <h1 class="govuk-caption-l">@organisationName</h1>

            @if (Model.ShowAccountsSection)
            {
                <component type="typeof(Components.SectionBreakHeaderComponent)" param-Header='"Accounts"' render-mode="Static" />

                <div class="cards">
                    <div class="card">
                        <h3 class="govuk-heading-s">
                            <a asp-page-handler="AddPermissionFlow" id="add-permission">Add permissions</a>
                        </h3>
                        <p class="govuk-body-s">Add account permissions to manage family support services and manage connection requests.</p>
                    </div>
                    <div class="card">
                        <h3 class="govuk-heading-s">
                            <a href="AccountAdmin/ManagePermissions">Manage permissions</a>
                        </h3>
                        <p class="govuk-body-s">View and remove account permissions to manage family support services or manage connection requests.</p>
                    </div>
                </div>
            }

            @if (Model.ShowLaSection)
            {
                <component type="typeof(Components.SectionBreakHeaderComponent)" param-Header='"Local authorities (LAs)"' render-mode="Static" />

                <div class="cards">
                    <div class="card">
                        <h3 class="govuk-heading-s">
                            <a asp-page="/PlaceHolder">Add an LA service</a>
                        </h3>
                        <p class="govuk-body-s">Add a service to the directory.</p>
                    </div>
                    <div class="card">
                        <h3 class="govuk-heading-s">
                            <a asp-page="/PlaceHolder">Manage LA services</a>
                        </h3>
                        <p class="govuk-body-s">View, change or delete services shown in the directory.</p>
                    </div>
                    <div class="card">
                        <h3 class="govuk-heading-s">
                            <a asp-page="/PlaceHolder">Add a family hub</a>
                        </h3>
                        <p class="govuk-body-s">Add a family hub to the directory.</p>
                    </div>
                    <div class="card">
                        <h3 class="govuk-heading-s">
                            <a asp-page="/PlaceHolder">Manage family hubs</a>
                        </h3>
                        <p class="govuk-body-s">View, change or delete family hubs shown in the directory.</p>
                    </div>
                    @if (Model.ShowActivateLa)
                    {
                        <div class="card">
                            <h3 class="govuk-heading-s">
                                <a asp-page="/PlaceHolder">Activate a local authority</a>
                            </h3>
                            <p class="govuk-body-s">Activate an LA before you create its accounts, services and family hubs.</p>
                        </div>
                    }
                </div>
            }

            @if (Model.ShowVcsSection)
            {
                @if (Model.ShowVcsHeaderBreak)
                {
                    <component type="typeof(Components.SectionBreakHeaderComponent)" param-Header='"Voluntary community organisations (VCSs)"' render-mode="Static" />
                }

                <div class="cards">
                    @if (Model.ShowVcsServiceLinks)
                    {
                        <div class="card">
                            <h3 class="govuk-heading-s">
                                <a asp-page="/PlaceHolder">Add a VCS service</a>
                            </h3>
                            <p class="govuk-body-s">Add a service to the directory.</p>
                        </div>
                        <div class="card">
                            <h3 class="govuk-heading-s">
                                <a asp-page="/PlaceHolder">Manage VCS services</a>
                            </h3>
                            <p class="govuk-body-s">View, change or delete services shown in the directory.</p>
                        </div>
                    }

                    <div class="card">
                        <h3 class="govuk-heading-s">
                            <a asp-page-handler="AddOrganisation">@Model.AddVscOrganisationLinkText</a>
                        </h3>
                        <p class="govuk-body-s"> Add an organisation before adding permissions for its users.</p>
                    </div>
                    <div class="card">
                        <h3 class="govuk-heading-s">
                            <a asp-page="ManageOrganisations" asp-area="VcsAdmin">@Model.ManageVscOrganisationLinkText</a>
                        </h3>
                        <p class="govuk-body-s">@Model.ManageVscOrganisationText</p>
                    </div>
                </div>
            }

            @if (Model.ShowSpreadsheetUploadSection)
            {
                <hr class="govuk-section-break govuk-section-break--visible govuk-section-break--l">

                <div class="cards">
                    @if (Model.IsUploadSpreadsheetEnabled)
                    {
                        <div class="card">
                            <h2 class="govuk-heading-s">
                                <a asp-page-handler="UploadSpreadsheetData" asp-route-organisationid="@Model.OrganisationViewModel.Id" data-module="govuk-button" data-testid="upload-spreadsheet">
                                    Upload Excel Spreadsheet
                                </a>
                            </h2>
                            <p class="govuk-body-s">Upload an excel spreadsheet.</p>
                        </div>
                    }
                </div>
            }
        </div>
    </div>
</main>