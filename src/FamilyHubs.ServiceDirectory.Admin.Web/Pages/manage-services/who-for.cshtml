@page
@using FamilyHubs.ServiceDirectory.Admin.Core.Models
@model FamilyHubs.ServiceDirectory.Admin.Web.Pages.manage_services.who_forModel
@{
    ViewData["Title"] = "Is the support offered by this service related to children or young people?";

    Model.Errors.ErrorIdToHtmlElementId = errorId => errorId switch
    {
        (int)ErrorId.Who_For__SelectChildrensService => "ViewModel_Children",
        (int)ErrorId.Who_For__SelectFromAge
            or (int)ErrorId.Who_For__FromAgeAfterToAge
            or (int)ErrorId.Who_For__SameAges => "ViewModel_FromAge",   // oui, Gromit!
        (int)ErrorId.Who_For__SelectToAge => "ViewModel_ToAge"
        //_ => throw new SwitchExpressionException(errorId)
    };
}

@section Back {
    <a href="@Model.BackUrl" class="govuk-back-link">Back</a>
}

<partial name="_ErrorSummaryNext" for="@Model.Errors" />

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                <h1 class="govuk-fieldset__heading">
                    Is the support offered by this service related to children or young people?
                </h1>
            </legend>

            <form method="post" novalidate>

                <div class="govuk-form-group">
                    <div class="govuk-radios" data-module="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" asp-for="ViewModel.Children" type="radio" value="true" aria-controls="age-range">
                            <label class="govuk-label govuk-radios__label" asp-label-for="Children">
                                Yes
                            </label>
                        </div>
                        <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="age-range">
                            <div class="govuk-form-group">
                                <label class="govuk-label" asp-for="ViewModel.FromAge">
                                    From
                                </label>
                                <select asp-for="ViewModel.FromAge" asp-items="Model.MinimumAges" class="govuk-select"></select>
                            </div>
                            <div class="govuk-form-group">
                                <label class="govuk-label" asp-for="ViewModel.ToAge">
                                    To
                                </label>
                                <select asp-for="ViewModel.ToAge" asp-items="Model.MaximumAges" class="govuk-select"></select>
                            </div>
                        </div>

                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" asp-for="ViewModel.Children" type="radio" value="false">
                            <label class="govuk-label govuk-radios__label" asp-label-for="Children">
                                No
                            </label>
                        </div>
                    </div>
                </div>

                <button type="submit" class="govuk-button" data-module="govuk-button">
                    Continue
                </button>
            </form>
        </fieldset>
    </div>
</div>
