{"version":3,"sources":["tmp/js/app.js"],"names":["fhgov","this","init","restoreConditionalInputs","enhanceAccessibleAutocomplete","element","document","querySelector","HTMLElement","click","modelLaOrganisationName","getElementById","accessibleAutocomplete","enhanceSelectElement","defaultValue","value","name","selectElement","modelVcsOrganisationName","setupLanguageAutocompleteWhenAddAnother","querySelectorAll","forEach","select","console","log","id","input","replace","classList","contains","add","errorState","addGovUkClasses","MutationObserver","mutationsList","observer","mutation","type","attributeName","observe","attributes","window","addEventListener"],"mappings":"AAAA,SAASA,QACLC,KAAKC,KAAO,WACRC,IACAC,GACR,EACI,IAAID,EAA2B,WAC3B,MAAME,EAAUC,SAASC,cAAc,6BACnCF,aAAmBG,aACnBH,EAAQI,OAEpB,EACQL,EAAgC,WAEhC,MAAMM,EAA0BJ,SAASK,eAAe,2BACpDD,GACAE,uBAAuBC,qBAAqB,CACxCC,aAAcJ,EAAwBK,MACtCC,KAAM,qBACNC,cAAeX,SAASC,cAAc,yBAI9C,MAAMW,EAA2BZ,SAASK,eAAe,4BACrDO,GACAN,uBAAuBC,qBAAqB,CACxCC,aAAcI,EAAyBH,MACvCC,KAAM,sBACNC,cAAeX,SAASC,cAAc,yBAGtD,CACA,CAKA,SAASY,wCAAwCd,GAC7C,KAAMA,aAAmBG,aACrB,OAEoBH,EAAQe,iBAAiB,2BACjCC,SAAQ,SAAUC,GAC9BV,uBAAuBC,qBAAqB,CACxCG,KAAM,eACNF,aAAc,GACdG,cAAeK,IAYnBC,QAAQC,IAAIF,EAAOG,IACnB,MAAMC,EAAQpB,SAASK,eAAeW,EAAOG,GAAGE,QAAQ,UAAW,KAEnE,GADAJ,QAAQC,IAAIE,IACPA,EACD,OAECA,EAAME,UAAUC,SAAS,gBAC1BH,EAAME,UAAUE,IAAI,eAExB,MAAMC,EAAaT,EAAOM,UAAUC,SAAS,uBAC7CG,gBAAgBN,EAAOK,GACN,IAAIE,kBAAiB,CAACC,EAAeC,KAClD,IAAK,IAAIC,KAAYF,EACK,eAAlBE,EAASC,MAAoD,UAA3BD,EAASE,eAC3CN,gBAAgBN,EAAOK,EAE3C,IAEiBQ,QAAQb,EAAO,CAAEc,YAAY,GAC9C,GACA,CACA,SAASR,gBAAgBN,EAAOK,GACvBL,EAAME,UAAUC,SAAS,gBAC1BH,EAAME,UAAUE,IAAI,eAEpBC,IAAeL,EAAME,UAAUC,SAAS,uBACxCH,EAAME,UAAUE,IAAI,qBAE5B,CArDAW,OAAOzC,MAAQ,IAAIA,MACnBM,SAASoC,iBAAiB,oBAAoB,WAC1CD,OAAOzC,MAAME,MACjB,IAuDAiB,wCAAwC","file":"app.js","sourcesContent":["function fhgov() {\n    this.init = function () {\n        restoreConditionalInputs();\n        enhanceAccessibleAutocomplete();\n    };\n    let restoreConditionalInputs = function () {\n        const element = document.querySelector(\"[data-conditional-active]\");\n        if (element instanceof HTMLElement) {\n            element.click();\n        }\n    };\n    let enhanceAccessibleAutocomplete = function () {\n        //WhichLocalAuthority.cshtml && AddOrganisationWhichLocalAuthority.cshtml\n        const modelLaOrganisationName = document.getElementById('modelLaOrganisationName');\n        if (modelLaOrganisationName) {\n            accessibleAutocomplete.enhanceSelectElement({\n                defaultValue: modelLaOrganisationName.value,\n                name: 'LaOrganisationName',\n                selectElement: document.querySelector('#LaOrganisationName')\n            });\n        }\n        //WhichVcsOrganisation.cshtml\n        const modelVcsOrganisationName = document.getElementById('modelVcsOrganisationName');\n        if (modelVcsOrganisationName) {\n            accessibleAutocomplete.enhanceSelectElement({\n                defaultValue: modelVcsOrganisationName.value,\n                name: 'VcsOrganisationName',\n                selectElement: document.querySelector('#VcsOrganisationName')\n            });\n        }\n    };\n}\nwindow.fhgov = new fhgov();\ndocument.addEventListener('DOMContentLoaded', function () {\n    window.fhgov.init();\n});\nfunction setupLanguageAutocompleteWhenAddAnother(element) {\n    if (!(element instanceof HTMLElement)) {\n        return;\n    }\n    const languageSelects = element.querySelectorAll(\"select[id^='language-']\"); // [id$='\\\\d+']\");\n    languageSelects.forEach(function (select) {\n        accessibleAutocomplete.enhanceSelectElement({\n            name: 'languageName',\n            defaultValue: '',\n            selectElement: select\n        });\n        // work around accessible-autocomplete not handling errors\n        // there's a discussion here about it...\n        // https://github.com/alphagov/accessible-autocomplete/issues/428\n        // but we've had to implement our own (hacky) solution by using MutationObserver\n        // and adding extra classes (with custom css) to the input element.\n        // I was going to package up this code into an exported function to ease reuse and maintanence,\n        // but someone is adding official support today (2024-01-12) so we should be able to remove this soon!\n        // https://github.com/alphagov/accessible-autocomplete/pull/602\n        //todo: fix aria-describedBy on the input too\n        // see https://github.com/alphagov/accessible-autocomplete/issues/589\n        console.log(select.id);\n        const input = document.getElementById(select.id.replace('-select', ''));\n        console.log(input);\n        if (!input) {\n            return;\n        }\n        if (!input.classList.contains('govuk-input')) {\n            input.classList.add('govuk-input');\n        }\n        const errorState = select.classList.contains('govuk-select--error');\n        addGovUkClasses(input, errorState);\n        const observer = new MutationObserver((mutationsList, observer) => {\n            for (let mutation of mutationsList) {\n                if (mutation.type === 'attributes' && mutation.attributeName === 'class') {\n                    addGovUkClasses(input, errorState);\n                }\n            }\n        });\n        observer.observe(input, { attributes: true });\n    });\n}\nfunction addGovUkClasses(input, errorState) {\n    if (!input.classList.contains('govuk-input')) {\n        input.classList.add('govuk-input');\n    }\n    if (errorState && !input.classList.contains('govuk-input--error')) {\n        input.classList.add('govuk-input--error');\n    }\n}\n//todo: this is a hack - we want setupLanguageAutocompleteWhenAddAnother to be in the generated js file.\n// if we export it, it includes the export keyword in the generated js file\n// (but we use export in the other ts files, without the js containing export!)\n// so as a workaround we call it where it no-ops\nsetupLanguageAutocompleteWhenAddAnother(null);\nexport {};\n//});\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUErRTtBQUMvRSxnREFBZ0Q7QUFDaEQsdUNBQXVDLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBQzlDLEtBQUsiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgfTtcclxuXHJcbmRlY2xhcmUgY29uc3QgYWNjZXNzaWJsZUF1dG9jb21wbGV0ZTogYW55O1xyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgICBpbnRlcmZhY2UgV2luZG93IHtcclxuICAgICAgICBmaGdvdjogYW55O1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBmaGdvdigpIHtcclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXN0b3JlQ29uZGl0aW9uYWxJbnB1dHMoKTtcclxuICAgICAgICBlbmhhbmNlQWNjZXNzaWJsZUF1dG9jb21wbGV0ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgcmVzdG9yZUNvbmRpdGlvbmFsSW5wdXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY29uZGl0aW9uYWwtYWN0aXZlXVwiKTtcclxuICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xpY2soKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGVuaGFuY2VBY2Nlc3NpYmxlQXV0b2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAvL1doaWNoTG9jYWxBdXRob3JpdHkuY3NodG1sICYmIEFkZE9yZ2FuaXNhdGlvbldoaWNoTG9jYWxBdXRob3JpdHkuY3NodG1sXHJcbiAgICAgICAgY29uc3QgbW9kZWxMYU9yZ2FuaXNhdGlvbk5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZWxMYU9yZ2FuaXNhdGlvbk5hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGlmIChtb2RlbExhT3JnYW5pc2F0aW9uTmFtZSkge1xyXG4gICAgICAgICAgICBhY2Nlc3NpYmxlQXV0b2NvbXBsZXRlLmVuaGFuY2VTZWxlY3RFbGVtZW50KHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbW9kZWxMYU9yZ2FuaXNhdGlvbk5hbWUudmFsdWUsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnTGFPcmdhbmlzYXRpb25OYW1lJyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNMYU9yZ2FuaXNhdGlvbk5hbWUnKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vV2hpY2hWY3NPcmdhbmlzYXRpb24uY3NodG1sXHJcbiAgICAgICAgY29uc3QgbW9kZWxWY3NPcmdhbmlzYXRpb25OYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGVsVmNzT3JnYW5pc2F0aW9uTmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKG1vZGVsVmNzT3JnYW5pc2F0aW9uTmFtZSkge1xyXG4gICAgICAgICAgICBhY2Nlc3NpYmxlQXV0b2NvbXBsZXRlLmVuaGFuY2VTZWxlY3RFbGVtZW50KHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbW9kZWxWY3NPcmdhbmlzYXRpb25OYW1lLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1Zjc09yZ2FuaXNhdGlvbk5hbWUnLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI1Zjc09yZ2FuaXNhdGlvbk5hbWUnKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmZoZ292ID0gbmV3IGZoZ292KCk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgd2luZG93LmZoZ292LmluaXQoKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBzZXR1cExhbmd1YWdlQXV0b2NvbXBsZXRlV2hlbkFkZEFub3RoZXIoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuXHJcbiAgICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGxhbmd1YWdlU2VsZWN0cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcInNlbGVjdFtpZF49J2xhbmd1YWdlLSddXCIpIGFzIE5vZGVMaXN0T2Y8SFRNTFNlbGVjdEVsZW1lbnQ+OyAvLyBbaWQkPSdcXFxcZCsnXVwiKTtcclxuXHJcbiAgICBsYW5ndWFnZVNlbGVjdHMuZm9yRWFjaChmdW5jdGlvbiAoc2VsZWN0KSB7XHJcbiAgICAgICAgYWNjZXNzaWJsZUF1dG9jb21wbGV0ZS5lbmhhbmNlU2VsZWN0RWxlbWVudCh7XHJcbiAgICAgICAgICAgIG5hbWU6ICdsYW5ndWFnZU5hbWUnLFxyXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICcnLFxyXG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50OiBzZWxlY3RcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gd29yayBhcm91bmQgYWNjZXNzaWJsZS1hdXRvY29tcGxldGUgbm90IGhhbmRsaW5nIGVycm9yc1xyXG4gICAgICAgIC8vIHRoZXJlJ3MgYSBkaXNjdXNzaW9uIGhlcmUgYWJvdXQgaXQuLi5cclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYWxwaGFnb3YvYWNjZXNzaWJsZS1hdXRvY29tcGxldGUvaXNzdWVzLzQyOFxyXG4gICAgICAgIC8vIGJ1dCB3ZSd2ZSBoYWQgdG8gaW1wbGVtZW50IG91ciBvd24gKGhhY2t5KSBzb2x1dGlvbiBieSB1c2luZyBNdXRhdGlvbk9ic2VydmVyXHJcbiAgICAgICAgLy8gYW5kIGFkZGluZyBleHRyYSBjbGFzc2VzICh3aXRoIGN1c3RvbSBjc3MpIHRvIHRoZSBpbnB1dCBlbGVtZW50LlxyXG5cclxuICAgICAgICAvLyBJIHdhcyBnb2luZyB0byBwYWNrYWdlIHVwIHRoaXMgY29kZSBpbnRvIGFuIGV4cG9ydGVkIGZ1bmN0aW9uIHRvIGVhc2UgcmV1c2UgYW5kIG1haW50YW5lbmNlLFxyXG4gICAgICAgIC8vIGJ1dCBzb21lb25lIGlzIGFkZGluZyBvZmZpY2lhbCBzdXBwb3J0IHRvZGF5ICgyMDI0LTAxLTEyKSBzbyB3ZSBzaG91bGQgYmUgYWJsZSB0byByZW1vdmUgdGhpcyBzb29uIVxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbHBoYWdvdi9hY2Nlc3NpYmxlLWF1dG9jb21wbGV0ZS9wdWxsLzYwMlxyXG5cclxuICAgICAgICAvL3RvZG86IGZpeCBhcmlhLWRlc2NyaWJlZEJ5IG9uIHRoZSBpbnB1dCB0b29cclxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FscGhhZ292L2FjY2Vzc2libGUtYXV0b2NvbXBsZXRlL2lzc3Vlcy81ODlcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coc2VsZWN0LmlkKTtcclxuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdC5pZC5yZXBsYWNlKCctc2VsZWN0JywgJycpKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGlucHV0KTtcclxuXHJcbiAgICAgICAgaWYgKCFpbnB1dCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWlucHV0LmNsYXNzTGlzdC5jb250YWlucygnZ292dWstaW5wdXQnKSkge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdnb3Z1ay1pbnB1dCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXJyb3JTdGF0ZSA9IHNlbGVjdC5jbGFzc0xpc3QuY29udGFpbnMoJ2dvdnVrLXNlbGVjdC0tZXJyb3InKTtcclxuXHJcbiAgICAgICAgYWRkR292VWtDbGFzc2VzKGlucHV0LCBlcnJvclN0YXRlKTtcclxuXHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zTGlzdCwgb2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbXV0YXRpb24gb2YgbXV0YXRpb25zTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdhdHRyaWJ1dGVzJyAmJiBtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnY2xhc3MnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFkZEdvdlVrQ2xhc3NlcyhpbnB1dCwgZXJyb3JTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShpbnB1dCwgeyBhdHRyaWJ1dGVzOiB0cnVlIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEdvdlVrQ2xhc3NlcyhpbnB1dDogSFRNTElucHV0RWxlbWVudCwgZXJyb3JTdGF0ZTogYm9vbGVhbikge1xyXG4gICAgaWYgKCFpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2dvdnVrLWlucHV0JykpIHtcclxuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdnb3Z1ay1pbnB1dCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChlcnJvclN0YXRlICYmICFpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2dvdnVrLWlucHV0LS1lcnJvcicpKSB7XHJcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnZ292dWstaW5wdXQtLWVycm9yJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vdG9kbzogdGhpcyBpcyBhIGhhY2sgLSB3ZSB3YW50IHNldHVwTGFuZ3VhZ2VBdXRvY29tcGxldGVXaGVuQWRkQW5vdGhlciB0byBiZSBpbiB0aGUgZ2VuZXJhdGVkIGpzIGZpbGUuXHJcbi8vIGlmIHdlIGV4cG9ydCBpdCwgaXQgaW5jbHVkZXMgdGhlIGV4cG9ydCBrZXl3b3JkIGluIHRoZSBnZW5lcmF0ZWQganMgZmlsZVxyXG4vLyAoYnV0IHdlIHVzZSBleHBvcnQgaW4gdGhlIG90aGVyIHRzIGZpbGVzLCB3aXRob3V0IHRoZSBqcyBjb250YWluaW5nIGV4cG9ydCEpXHJcbi8vIHNvIGFzIGEgd29ya2Fyb3VuZCB3ZSBjYWxsIGl0IHdoZXJlIGl0IG5vLW9wc1xyXG5zZXR1cExhbmd1YWdlQXV0b2NvbXBsZXRlV2hlbkFkZEFub3RoZXIobnVsbCk7XHJcbi8vfSk7Il19\n"]}