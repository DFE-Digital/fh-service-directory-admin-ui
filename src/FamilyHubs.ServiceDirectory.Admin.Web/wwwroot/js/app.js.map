{"version":3,"sources":["tmp/js/app.js"],"names":["fhgov","this","init","restoreConditionalInputs","enhanceAccessibleAutocomplete","element","document","querySelector","HTMLElement","click","modelLaOrganisationName","getElementById","accessibleAutocomplete","enhanceSelectElement","defaultValue","value","name","selectElement","modelVcsOrganisationName","setupLanguageAutocompleteWhenAddAnother","querySelectorAll","forEach","select","input","id","replace","classList","contains","add","MutationObserver","mutationsList","observer","mutation","type","attributeName","observe","attributes","window","addEventListener"],"mappings":"AAAA,SAASA,QACLC,KAAKC,KAAO,WACRC,IACAC,GACR,EACI,IAAID,EAA2B,WAC3B,MAAME,EAAUC,SAASC,cAAc,6BACnCF,aAAmBG,aACnBH,EAAQI,OAEpB,EACQL,EAAgC,WAEhC,MAAMM,EAA0BJ,SAASK,eAAe,2BACpDD,GACAE,uBAAuBC,qBAAqB,CACxCC,aAAcJ,EAAwBK,MACtCC,KAAM,qBACNC,cAAeX,SAASC,cAAc,yBAI9C,MAAMW,EAA2BZ,SAASK,eAAe,4BACrDO,GACAN,uBAAuBC,qBAAqB,CACxCC,aAAcI,EAAyBH,MACvCC,KAAM,sBACNC,cAAeX,SAASC,cAAc,yBAGtD,CACA,CAKA,SAASY,wCAAwCd,GAC7C,KAAMA,aAAmBG,aACrB,OAEoBH,EAAQe,iBAAiB,2BACjCC,SAAQ,SAAUC,GAC9BV,uBAAuBC,qBAAqB,CACxCG,KAAM,eACNF,aAAc,GACdG,cAAeK,IAYnB,MAAMC,EAAQjB,SAASK,eAAeW,EAAOE,GAAGC,QAAQ,UAAW,KAInE,GAHKF,EAAMG,UAAUC,SAAS,gBAC1BJ,EAAMG,UAAUE,IAAI,eAEpBN,EAAOI,UAAUC,SAAS,uBAAwB,CAClDJ,EAAMG,UAAUE,IAAI,sBACH,IAAIC,kBAAiB,CAACC,EAAeC,KAClD,IAAK,IAAIC,KAAYF,EACK,eAAlBE,EAASC,MAAoD,UAA3BD,EAASE,gBACtCX,EAAMG,UAAUC,SAAS,gBAC1BJ,EAAMG,UAAUE,IAAI,eAEnBL,EAAMG,UAAUC,SAAS,uBAC1BJ,EAAMG,UAAUE,IAAI,sBAGhD,IAEqBO,QAAQZ,EAAO,CAAEa,YAAY,GAClD,CACA,GACA,CA9CAC,OAAOrC,MAAQ,IAAIA,MACnBM,SAASgC,iBAAiB,oBAAoB,WAC1CD,OAAOrC,MAAME,MACjB,IAgDAiB,wCAAwC","file":"app.js","sourcesContent":["function fhgov() {\n    this.init = function () {\n        restoreConditionalInputs();\n        enhanceAccessibleAutocomplete();\n    };\n    let restoreConditionalInputs = function () {\n        const element = document.querySelector(\"[data-conditional-active]\");\n        if (element instanceof HTMLElement) {\n            element.click();\n        }\n    };\n    let enhanceAccessibleAutocomplete = function () {\n        //WhichLocalAuthority.cshtml && AddOrganisationWhichLocalAuthority.cshtml\n        const modelLaOrganisationName = document.getElementById('modelLaOrganisationName');\n        if (modelLaOrganisationName) {\n            accessibleAutocomplete.enhanceSelectElement({\n                defaultValue: modelLaOrganisationName.value,\n                name: 'LaOrganisationName',\n                selectElement: document.querySelector('#LaOrganisationName')\n            });\n        }\n        //WhichVcsOrganisation.cshtml\n        const modelVcsOrganisationName = document.getElementById('modelVcsOrganisationName');\n        if (modelVcsOrganisationName) {\n            accessibleAutocomplete.enhanceSelectElement({\n                defaultValue: modelVcsOrganisationName.value,\n                name: 'VcsOrganisationName',\n                selectElement: document.querySelector('#VcsOrganisationName')\n            });\n        }\n    };\n}\nwindow.fhgov = new fhgov();\ndocument.addEventListener('DOMContentLoaded', function () {\n    window.fhgov.init();\n});\nfunction setupLanguageAutocompleteWhenAddAnother(element) {\n    if (!(element instanceof HTMLElement)) {\n        return;\n    }\n    const languageSelects = element.querySelectorAll(\"select[id^='language-']\"); // [id$='\\\\d+']\");\n    languageSelects.forEach(function (select) {\n        accessibleAutocomplete.enhanceSelectElement({\n            name: 'languageName',\n            defaultValue: '',\n            selectElement: select\n        });\n        // work around accessible-autocomplete not handling errors\n        // there's a discussion here about it...\n        // https://github.com/alphagov/accessible-autocomplete/issues/428\n        // but we've had to implement our own (hacky) solution by using MutationObserver\n        // and adding extra classes (with custom css) to the input element.\n        // I was going to package up this code into an exported function to ease reuse and maintanence,\n        // but someone is adding official support today (2024-01-12) so we should be able to remove this soon!\n        // https://github.com/alphagov/accessible-autocomplete/pull/602\n        //todo: fix aria-describedBy on the input too\n        // see https://github.com/alphagov/accessible-autocomplete/issues/589\n        const input = document.getElementById(select.id.replace('-select', ''));\n        if (!input.classList.contains('govuk-input')) {\n            input.classList.add('govuk-input');\n        }\n        if (select.classList.contains('govuk-select--error')) {\n            input.classList.add('govuk-input--error');\n            const observer = new MutationObserver((mutationsList, observer) => {\n                for (let mutation of mutationsList) {\n                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {\n                        if (!input.classList.contains('govuk-input')) {\n                            input.classList.add('govuk-input');\n                        }\n                        if (!input.classList.contains('govuk-input--error')) {\n                            input.classList.add('govuk-input--error');\n                        }\n                    }\n                }\n            });\n            observer.observe(input, { attributes: true });\n        }\n    });\n}\n//todo: this is a hack - we want setupLanguageAutocompleteWhenAddAnother to be in the generated js file.\n// if we export it, it includes the export keyword in the generated js file\n// (but we use export in the other ts files, without the js containing export!)\n// so as a workaround we call it where it no-ops\nsetupLanguageAutocompleteWhenAddAnother(null);\nexport {};\n//});\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFFMUMsTUFBTSxRQUFRLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBQyxDQUFDLGFBQWEsRUFBRSxRQUFRLEVBQUUsRUFBRTtnQkFDOUQsS0FBSyxJQUFJLFFBQVEsSUFBSSxhQUFhLEVBQUUsQ0FBQztvQkFDakMsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLFlBQVksSUFBSSxRQUFRLENBQUMsYUFBYSxLQUFLLE9BQU8sRUFBRSxDQUFDO3dCQUV2RSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQzs0QkFDM0MsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7d0JBQ3ZDLENBQUM7d0JBRUQsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLG9CQUFvQixDQUFDLEVBQUUsQ0FBQzs0QkFDbEQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsQ0FBQzt3QkFDOUMsQ0FBQztvQkFDTCxDQUFDO2dCQUNMLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztZQUVILFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFDbEQsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELHdHQUF3RztBQUN4RywyRUFBMkU7QUFDM0UsK0VBQStFO0FBQy9FLGdEQUFnRDtBQUNoRCx1Q0FBdUMsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFDOUMsS0FBSyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyB9O1xyXG5cclxuZGVjbGFyZSBjb25zdCBhY2Nlc3NpYmxlQXV0b2NvbXBsZXRlOiBhbnk7XHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICAgIGludGVyZmFjZSBXaW5kb3cge1xyXG4gICAgICAgIGZoZ292OiBhbnk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZoZ292KCkge1xyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJlc3RvcmVDb25kaXRpb25hbElucHV0cygpO1xyXG4gICAgICAgIGVuaGFuY2VBY2Nlc3NpYmxlQXV0b2NvbXBsZXRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxldCByZXN0b3JlQ29uZGl0aW9uYWxJbnB1dHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1jb25kaXRpb25hbC1hY3RpdmVdXCIpO1xyXG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGljaygpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBsZXQgZW5oYW5jZUFjY2Vzc2libGVBdXRvY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vV2hpY2hMb2NhbEF1dGhvcml0eS5jc2h0bWwgJiYgQWRkT3JnYW5pc2F0aW9uV2hpY2hMb2NhbEF1dGhvcml0eS5jc2h0bWxcclxuICAgICAgICBjb25zdCBtb2RlbExhT3JnYW5pc2F0aW9uTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RlbExhT3JnYW5pc2F0aW9uTmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKG1vZGVsTGFPcmdhbmlzYXRpb25OYW1lKSB7XHJcbiAgICAgICAgICAgIGFjY2Vzc2libGVBdXRvY29tcGxldGUuZW5oYW5jZVNlbGVjdEVsZW1lbnQoe1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBtb2RlbExhT3JnYW5pc2F0aW9uTmFtZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdMYU9yZ2FuaXNhdGlvbk5hbWUnLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0xhT3JnYW5pc2F0aW9uTmFtZScpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9XaGljaFZjc09yZ2FuaXNhdGlvbi5jc2h0bWxcclxuICAgICAgICBjb25zdCBtb2RlbFZjc09yZ2FuaXNhdGlvbk5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZWxWY3NPcmdhbmlzYXRpb25OYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBpZiAobW9kZWxWY3NPcmdhbmlzYXRpb25OYW1lKSB7XHJcbiAgICAgICAgICAgIGFjY2Vzc2libGVBdXRvY29tcGxldGUuZW5oYW5jZVNlbGVjdEVsZW1lbnQoe1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBtb2RlbFZjc09yZ2FuaXNhdGlvbk5hbWUudmFsdWUsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnVmNzT3JnYW5pc2F0aW9uTmFtZScsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjVmNzT3JnYW5pc2F0aW9uTmFtZScpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuZmhnb3YgPSBuZXcgZmhnb3YoKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cuZmhnb3YuaW5pdCgpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHNldHVwTGFuZ3VhZ2VBdXRvY29tcGxldGVXaGVuQWRkQW5vdGhlcihlbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG5cclxuICAgIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbGFuZ3VhZ2VTZWxlY3RzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2VsZWN0W2lkXj0nbGFuZ3VhZ2UtJ11cIikgYXMgTm9kZUxpc3RPZjxIVE1MU2VsZWN0RWxlbWVudD47IC8vIFtpZCQ9J1xcXFxkKyddXCIpO1xyXG5cclxuICAgIGxhbmd1YWdlU2VsZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChzZWxlY3QpIHtcclxuICAgICAgICBhY2Nlc3NpYmxlQXV0b2NvbXBsZXRlLmVuaGFuY2VTZWxlY3RFbGVtZW50KHtcclxuICAgICAgICAgICAgbmFtZTogJ2xhbmd1YWdlTmFtZScsXHJcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJycsXHJcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQ6IHNlbGVjdFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyB3b3JrIGFyb3VuZCBhY2Nlc3NpYmxlLWF1dG9jb21wbGV0ZSBub3QgaGFuZGxpbmcgZXJyb3JzXHJcbiAgICAgICAgLy8gdGhlcmUncyBhIGRpc2N1c3Npb24gaGVyZSBhYm91dCBpdC4uLlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbHBoYWdvdi9hY2Nlc3NpYmxlLWF1dG9jb21wbGV0ZS9pc3N1ZXMvNDI4XHJcbiAgICAgICAgLy8gYnV0IHdlJ3ZlIGhhZCB0byBpbXBsZW1lbnQgb3VyIG93biAoaGFja3kpIHNvbHV0aW9uIGJ5IHVzaW5nIE11dGF0aW9uT2JzZXJ2ZXJcclxuICAgICAgICAvLyBhbmQgYWRkaW5nIGV4dHJhIGNsYXNzZXMgKHdpdGggY3VzdG9tIGNzcykgdG8gdGhlIGlucHV0IGVsZW1lbnQuXHJcblxyXG4gICAgICAgIC8vIEkgd2FzIGdvaW5nIHRvIHBhY2thZ2UgdXAgdGhpcyBjb2RlIGludG8gYW4gZXhwb3J0ZWQgZnVuY3Rpb24gdG8gZWFzZSByZXVzZSBhbmQgbWFpbnRhbmVuY2UsXHJcbiAgICAgICAgLy8gYnV0IHNvbWVvbmUgaXMgYWRkaW5nIG9mZmljaWFsIHN1cHBvcnQgdG9kYXkgKDIwMjQtMDEtMTIpIHNvIHdlIHNob3VsZCBiZSBhYmxlIHRvIHJlbW92ZSB0aGlzIHNvb24hXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FscGhhZ292L2FjY2Vzc2libGUtYXV0b2NvbXBsZXRlL3B1bGwvNjAyXHJcblxyXG4gICAgICAgIC8vdG9kbzogZml4IGFyaWEtZGVzY3JpYmVkQnkgb24gdGhlIGlucHV0IHRvb1xyXG4gICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYWxwaGFnb3YvYWNjZXNzaWJsZS1hdXRvY29tcGxldGUvaXNzdWVzLzU4OVxyXG5cclxuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdC5pZC5yZXBsYWNlKCctc2VsZWN0JywgJycpKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGlmICghaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnb3Z1ay1pbnB1dCcpKSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoJ2dvdnVrLWlucHV0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2VsZWN0LmNsYXNzTGlzdC5jb250YWlucygnZ292dWstc2VsZWN0LS1lcnJvcicpKSB7XHJcblxyXG4gICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdnb3Z1ay1pbnB1dC0tZXJyb3InKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9uc0xpc3QsIG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBtdXRhdGlvbiBvZiBtdXRhdGlvbnNMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdhdHRyaWJ1dGVzJyAmJiBtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnY2xhc3MnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmNsYXNzTGlzdC5jb250YWlucygnZ292dWstaW5wdXQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnZ292dWstaW5wdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2dvdnVrLWlucHV0LS1lcnJvcicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdnb3Z1ay1pbnB1dC0tZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGlucHV0LCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vdG9kbzogdGhpcyBpcyBhIGhhY2sgLSB3ZSB3YW50IHNldHVwTGFuZ3VhZ2VBdXRvY29tcGxldGVXaGVuQWRkQW5vdGhlciB0byBiZSBpbiB0aGUgZ2VuZXJhdGVkIGpzIGZpbGUuXHJcbi8vIGlmIHdlIGV4cG9ydCBpdCwgaXQgaW5jbHVkZXMgdGhlIGV4cG9ydCBrZXl3b3JkIGluIHRoZSBnZW5lcmF0ZWQganMgZmlsZVxyXG4vLyAoYnV0IHdlIHVzZSBleHBvcnQgaW4gdGhlIG90aGVyIHRzIGZpbGVzLCB3aXRob3V0IHRoZSBqcyBjb250YWluaW5nIGV4cG9ydCEpXHJcbi8vIHNvIGFzIGEgd29ya2Fyb3VuZCB3ZSBjYWxsIGl0IHdoZXJlIGl0IG5vLW9wc1xyXG5zZXR1cExhbmd1YWdlQXV0b2NvbXBsZXRlV2hlbkFkZEFub3RoZXIobnVsbCk7XHJcbi8vfSk7Il19\n"]}