{"version":3,"sources":["tmp/js/components/cookie-functions.js","tmp/js/components/helpers.js","tmp/js/components/postcode.js","tmp/js/components/analytics.js","tmp/js/components/cookie-banner.js","tmp/js/components/cookies-page.js","tmp/js/components/clarity.js","tmp/js/components/add-another.js","tmp/js/components/back-links.js","tmp/js/components/visibility-toggle.js","tmp/js/components/open-close-button.js","tmp/js/familyhubs.js"],"names":["COOKIE_CATEGORIES","analytics","window","GA_CONTAINER_ID","essential","GA_COOKIE_NAME","DEFAULT_COOKIE_CONSENT","version","GDS_CONSENT_COOKIE_VERSION","getConsentCookie","consentCookie","getCookie","consentCookieObj","JSON","parse","err","isValidConsentCookie","options","setConsentCookie","cookieConsent","option","stringify","setCookie","days","resetCookies","cookieType","forEach","cookie","deleteCookie","userAllowsCookieCategory","cookieCategory","cookiePreferences","e","console","error","userAllowsCookie","cookieName","category","indexOf","name","nameEQ","cookies","document","split","i","len","length","charAt","substring","decodeURIComponent","value","cookieString","date","Date","setTime","getTime","toUTCString","location","protocol","hostname","nodeListForEach","nodes","callback","NodeList","prototype","call","INCODE_REGEX","POSTCODE_REGEX","SPACE_REGEX","sanitize","s","replace","toUpperCase","isValid","postcode","match","toOutcode","gtag","command","args","dataLayer","push","arguments","GaMeasurementId","initAnalytics","gaMeasurementId","Boolean","setDefaultConsent","loadGaScript","pageViewParams","getPiiSafePageView","send_page_view","page_path","page_location","page_referrer","referrer","cookie_flags","userConsent","updateAnalyticsStorageConsent","sendPageViewEvent","sendFilterPageCustomEvent","analytics_storage","granted","delayMs","element","getElementById","totalResults","getAttribute","undefined","total_results","sendAnalyticsCustomEvent","accepted","source","f","getElementsByTagName","j","createElement","async","src","parentNode","insertBefore","pageView","page_title","title","send_to","piiSafeReferrerQueryString","getPiiSafeQueryString","URL","search","urlArray","piiSafeQueryString","href","pathname","queryString","queryParams","URLSearchParams","get","set","delete","toString","cookieBannerAcceptSelector","cookieBannerRejectSelector","cookieBannerHideButtonSelector","cookieMessageSelector","cookieConfirmationAcceptSelector","cookieConfirmationRejectSelector","CookieBanner","$module","this","CookiesPage","initClarity","clarityId","clarity","q","loadClarityScript","initializeAddAnother","querySelectorAll","$addAnother","FamilyHubsFrontend","AddAnother","initializeBackButtons","history","link","classList","add","initializeVisibilityToggles","toggle","addEventListener","event","toToggleId","toToggle","style","display","init","$cookieBanner","$acceptButton","querySelector","$rejectButton","$cookieMessage","$cookieConfirmationAccept","$cookieConfirmationReject","$cookieBannerHideButtons","onCookiesPage","currentConsentCookie","CookieFunctions.getConsentCookie","CookieFunctions.isValidConsentCookie","CookieFunctions.resetCookies","removeAttribute","acceptCookies","bind","rejectCookies","$cookieBannerHideButton","hideBanner","setAttribute","CookieFunctions.setConsentCookie","revealConfirmationMessage","confirmationMessage","focus","$cookiePage","$cookieForm","$cookieFormFieldsets","$successNotification","$successLink","$cookieFormFieldset","showUserPreference","savePreferences","preventDefault","preferences","getCookieType","selectedItem","analyticsAccepted","showSuccessNotification","preference","radioValue","checked","scrollTo","id","container","$","index","data","functionName","on","proxy","find","prop","onAddButtonClick","item","getNewItem","firstItem","getItems","first","hasRemoveButton","createRemoveButton","last","after","stripErrorFromNewItem","el","remove","removeChild","cloneNode","wrapper","$item","updateAttributes","resetItem","each","originalId","attr","siblings","parents","htmlFor","append","type","onRemoveButtonClick","currentTarget","items","focusHeading","OpenCloseButton","constructor","openCloseButton","targetId","target","showText","textContent","hideText","hideTarget","showTarget","handleClick","contains","initAll","GA_MEASUREMENT_ID","CLARITY_ID","openCloseButtons","GOVUKFrontend","MOJFrontend"],"mappings":"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","file":"familyhubs-frontend-9.1.7.min.js","sourcesContent":["/* Users can (dis)allow different groups of cookies. */\nconst COOKIE_CATEGORIES = {\n    analytics: ['_ga', '_ga_' + window.GA_CONTAINER_ID],\n    /* Essential cookies\n     *\n     * Essential cookies cannot be deselected, but we want our cookie code to\n     * only allow adding cookies that are documented in this object, so they need\n     * to be added here.\n     */\n    essential: [window.GA_COOKIE_NAME]\n};\n/*\n * Default cookie preferences if user has no cookie preferences.\n *\n * Note that this doesn't include a key for essential cookies, essential\n * cookies cannot be disallowed. If the object contains { essential: false }\n * this will be ignored.\n */\nconst DEFAULT_COOKIE_CONSENT = {\n    analytics: false,\n    version: window.GDS_CONSENT_COOKIE_VERSION\n};\n/** Return the user's cookie preferences.\n *\n * If the consent cookie is malformed, or not present,\n * returns null.\n */\nexport function getConsentCookie() {\n    const consentCookie = getCookie(window.GA_COOKIE_NAME);\n    let consentCookieObj;\n    if (consentCookie) {\n        try {\n            consentCookieObj = JSON.parse(consentCookie);\n        }\n        catch (err) {\n            return null;\n        }\n    }\n    else {\n        return null;\n    }\n    return consentCookieObj;\n}\n/** Check the cookie preferences object.\n *\n * If the consent object is not present, malformed, or incorrect version,\n * returns false, otherwise returns true.\n */\nexport function isValidConsentCookie(options) {\n    return (options && options.version >= window.GDS_CONSENT_COOKIE_VERSION);\n}\n/** Update the user's cookie preferences. */\nexport function setConsentCookie(options) {\n    let cookieConsent = getConsentCookie();\n    if (!cookieConsent) {\n        cookieConsent = JSON.parse(JSON.stringify(DEFAULT_COOKIE_CONSENT));\n    }\n    // Merge current cookie preferences and new preferences\n    for (var option in options) {\n        cookieConsent[option] = options[option];\n    }\n    // Essential cookies cannot be deselected, ignore this cookie type\n    delete cookieConsent.essential;\n    cookieConsent.version = window.GDS_CONSENT_COOKIE_VERSION;\n    // Set the consent cookie\n    setCookie(window.GA_COOKIE_NAME, JSON.stringify(cookieConsent), { days: 365 });\n    // Update the other cookies\n    resetCookies();\n}\n/** Apply the user's cookie preferences\n *\n * Deletes any cookies the user has not consented to.\n */\nexport function resetCookies() {\n    var options = getConsentCookie();\n    // If no preferences or old version use the default\n    if (!isValidConsentCookie(options)) {\n        options = JSON.parse(JSON.stringify(DEFAULT_COOKIE_CONSENT));\n    }\n    for (var cookieType in options) {\n        if (cookieType === 'version') {\n            continue;\n        }\n        // Essential cookies cannot be deselected, ignore this cookie type\n        if (cookieType === 'essential') {\n            continue;\n        }\n        if (!options[cookieType]) {\n            // Fetch the cookies in that category\n            var cookiesInCategory = COOKIE_CATEGORIES[cookieType];\n            cookiesInCategory.forEach(function (cookie) {\n                deleteCookie(cookie);\n            });\n        }\n    }\n}\nfunction userAllowsCookieCategory(cookieCategory, cookiePreferences) {\n    // Essential cookies are always allowed\n    if (cookieCategory === 'essential') {\n        return true;\n    }\n    // Sometimes cookiePreferences is malformed in some of the tests, so we need to handle these\n    try {\n        return cookiePreferences[cookieCategory];\n    }\n    catch (e) {\n        console.error(e);\n        return false;\n    }\n}\nfunction userAllowsCookie(cookieName) {\n    // Always allow setting the consent cookie\n    if (cookieName === window.GA_COOKIE_NAME) {\n        return true;\n    }\n    // Get the current cookie preferences\n    var cookiePreferences = getConsentCookie();\n    // If no preferences or old version use the default\n    if (!isValidConsentCookie(cookiePreferences)) {\n        cookiePreferences = DEFAULT_COOKIE_CONSENT;\n    }\n    for (var category in COOKIE_CATEGORIES) {\n        var cookiesInCategory = COOKIE_CATEGORIES[category];\n        if (cookiesInCategory.indexOf(cookieName) !== '-1') {\n            return userAllowsCookieCategory(category, cookiePreferences);\n        }\n    }\n    // Deny the cookie if it is not known to us\n    return false;\n}\nfunction getCookie(name) {\n    var nameEQ = name + '=';\n    var cookies = document.cookie.split(';');\n    for (var i = 0, len = cookies.length; i < len; i++) {\n        var cookie = cookies[i];\n        while (cookie.charAt(0) === ' ') {\n            cookie = cookie.substring(1, cookie.length);\n        }\n        if (cookie.indexOf(nameEQ) === 0) {\n            return decodeURIComponent(cookie.substring(nameEQ.length));\n        }\n    }\n    return null;\n}\n// do we need to set the domain?\nfunction setCookie(name, value, options) {\n    if (userAllowsCookie(name)) {\n        if (typeof options === 'undefined') {\n            options = {};\n        }\n        var cookieString = name + '=' + value + '; path=/; SameSite=Strict';\n        if (options.days) {\n            var date = new Date();\n            date.setTime(date.getTime() + (options.days * 24 * 60 * 60 * 1000));\n            cookieString = cookieString + '; expires=' + date.toUTCString();\n        }\n        if (document.location.protocol === 'https:') {\n            cookieString = cookieString + '; Secure';\n        }\n        document.cookie = cookieString;\n    }\n}\nfunction deleteCookie(name) {\n    if (getCookie(name)) {\n        // Cookies need to be deleted in the same level of specificity in which they were set\n        // If a cookie was set with a specified domain, it needs to be specified when deleted\n        // If a cookie wasn't set with the domain attribute, it shouldn't be there when deleted\n        // You can't tell if a cookie was set with a domain attribute or not, so try both options\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=' + window.location.hostname + ';path=/';\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=.' + window.location.hostname + ';path=/';\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llLWZ1bmN0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpQkEsdURBQXVEO0FBQ3ZELE1BQU0saUJBQWlCLEdBQXFCO0lBQ3hDLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQztJQUNuRDs7Ozs7T0FLRztJQUNILFNBQVMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUM7Q0FDckMsQ0FBQTtBQUVEOzs7Ozs7R0FNRztBQUNILE1BQU0sc0JBQXNCLEdBQWtCO0lBQzFDLFNBQVMsRUFBRSxLQUFLO0lBQ2hCLE9BQU8sRUFBRSxNQUFNLENBQUMsMEJBQTBCO0NBQzdDLENBQUE7QUFFRDs7OztHQUlHO0FBQ0gsTUFBTSxVQUFVLGdCQUFnQjtJQUM1QixNQUFNLGFBQWEsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ3ZELElBQUksZ0JBQXNDLENBQUM7SUFFM0MsSUFBSSxhQUFhLEVBQUUsQ0FBQztRQUNoQixJQUFJLENBQUM7WUFDRCxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ2pELENBQUM7UUFBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1lBQ1gsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztJQUNMLENBQUM7U0FBTSxDQUFDO1FBQ0osT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVELE9BQU8sZ0JBQWdCLENBQUM7QUFDNUIsQ0FBQztBQUVEOzs7O0dBSUc7QUFDSCxNQUFNLFVBQVUsb0JBQW9CLENBQUMsT0FBc0I7SUFDdkQsT0FBTyxDQUFDLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxJQUFJLE1BQU0sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQzdFLENBQUM7QUFFRCw0Q0FBNEM7QUFDNUMsTUFBTSxVQUFVLGdCQUFnQixDQUFDLE9BQXNCO0lBQ25ELElBQUksYUFBYSxH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UyxDQUFDO0lBQ3ZILENBQUM7QUFDTCxDQUFDIiwiZmlsZSI6ImNvbXBvbmVudHMvY29va2llLWZ1bmN0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGludGVyZmFjZSBDb25zZW50Q29va2llIHtcbiAgICAvL3RvZG86IGp1c3QgcmVtb3ZlIGVzc2VudGlhbD9cbiAgICBlc3NlbnRpYWw/OiBib29sZWFuO1xuICAgIGFuYWx5dGljcz86IGJvb2xlYW47XG4gICAgdmVyc2lvbj86IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIENvb2tpZUNhdGVnb3JpZXMge1xuICAgIGFuYWx5dGljczogc3RyaW5nW107XG4gICAgZXNzZW50aWFsOiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIENvb2tpZU9wdGlvbnMge1xuICAgIGRheXM/OiBudW1iZXI7XG59XG5cbi8qIFVzZXJzIGNhbiAoZGlzKWFsbG93IGRpZmZlcmVudCBncm91cHMgb2YgY29va2llcy4gKi9cbmNvbnN0IENPT0tJRV9DQVRFR09SSUVTOiBDb29raWVDYXRlZ29yaWVzID0ge1xuICAgIGFuYWx5dGljczogWydfZ2EnLCAnX2dhXycgKyB3aW5kb3cuR0FfQ09OVEFJTkVSX0lEXSxcbiAgICAvKiBFc3NlbnRpYWwgY29va2llc1xuICAgICAqXG4gICAgICogRXNzZW50aWFsIGNvb2tpZXMgY2Fubm90IGJlIGRlc2VsZWN0ZWQsIGJ1dCB3ZSB3YW50IG91ciBjb29raWUgY29kZSB0b1xuICAgICAqIG9ubHkgYWxsb3cgYWRkaW5nIGNvb2tpZXMgdGhhdCBhcmUgZG9jdW1lbnRlZCBpbiB0aGlzIG9iamVjdCwgc28gdGhleSBuZWVkXG4gICAgICogdG8gYmUgYWRkZWQgaGVyZS5cbiAgICAgKi9cbiAgICBlc3NlbnRpYWw6IFt3aW5kb3cuR0FfQ09PS0lFX05BTUVdXG59XG5cbi8qXG4gKiBEZWZhdWx0IGNvb2tpZSBwcmVmZXJlbmNlcyBpZiB1c2VyIGhhcyBubyBjb29raWUgcHJlZmVyZW5jZXMuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgZG9lc24ndCBpbmNsdWRlIGEga2V5IGZvciBlc3NlbnRpYWwgY29va2llcywgZXNzZW50aWFsXG4gKiBjb29raWVzIGNhbm5vdCBiZSBkaXNhbGxvd2VkLiBJZiB0aGUgb2JqZWN0IGNvbnRhaW5zIHsgZXNzZW50aWFsOiBmYWxzZSB9XG4gKiB0aGlzIHdpbGwgYmUgaWdub3JlZC5cbiAqL1xuY29uc3QgREVGQVVMVF9DT09LSUVfQ09OU0VOVDogQ29uc2VudENvb2tpZSA9IHtcbiAgICBhbmFseXRpY3M6IGZhbHNlLFxuICAgIHZlcnNpb246IHdpbmRvdy5HRFNfQ09OU0VOVF9DT09LSUVfVkVSU0lPTlxufVxuXG4vKiogUmV0dXJuIHRoZSB1c2VyJ3MgY29va2llIHByZWZlcmVuY2VzLlxuICpcbiAqIElmIHRoZSBjb25zZW50IGNvb2tpZSBpcyBtYWxmb3JtZWQsIG9yIG5vdCBwcmVzZW50LFxuICogcmV0dXJucyBudWxsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uc2VudENvb2tpZSgpOiBDb25zZW50Q29va2llIHwgbnVsbCB7XG4gICAgY29uc3QgY29uc2VudENvb2tpZSA9IGdldENvb2tpZSh3aW5kb3cuR0FfQ09PS0lFX05BTUUpO1xuICAgIGxldCBjb25zZW50Q29va2llT2JqOiBDb25zZW50Q29va2llIHwgbnVsbDtcblxuICAgIGlmIChjb25zZW50Q29va2llKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zZW50Q29va2llT2JqID0gSlNPTi5wYXJzZShjb25zZW50Q29va2llKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBjb25zZW50Q29va2llT2JqO1xufVxuXG4vKiogQ2hlY2sgdGhlIGNvb2tpZSBwcmVmZXJlbmNlcyBvYmplY3QuXG4gKlxuICogSWYgdGhlIGNvbnNlbnQgb2JqZWN0IGlzIG5vdCBwcmVzZW50LCBtYWxmb3JtZWQsIG9yIGluY29ycmVjdCB2ZXJzaW9uLFxuICogcmV0dXJucyBmYWxzZSwgb3RoZXJ3aXNlIHJldHVybnMgdHJ1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRDb25zZW50Q29va2llKG9wdGlvbnM6IENvbnNlbnRDb29raWUpIHtcbiAgICByZXR1cm4gKG9wdGlvbnMgJiYgb3B0aW9ucy52ZXJzaW9uID49IHdpbmRvdy5HRFNfQ09OU0VOVF9DT09LSUVfVkVSU0lPTik7XG59XG5cbi8qKiBVcGRhdGUgdGhlIHVzZXIncyBjb29raWUgcHJlZmVyZW5jZXMuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Q29uc2VudENvb2tpZShvcHRpb25zOiBDb25zZW50Q29va2llKSB7XG4gICAgbGV0IGNvb2tpZUNvbnNlbnQgPSBnZXRDb25zZW50Q29va2llKCk7XG5cbiAgICBpZiAoIWNvb2tpZUNvbnNlbnQpIHtcbiAgICAgICAgY29va2llQ29uc2VudCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9DT09LSUVfQ09OU0VOVCkpO1xuICAgIH1cblxuICAgIC8vIE1lcmdlIGN1cnJlbnQgY29va2llIHByZWZlcmVuY2VzIGFuZCBuZXcgcHJlZmVyZW5jZXNcbiAgICBmb3IgKHZhciBvcHRpb24gaW4gb3B0aW9ucykge1xuICAgICAgICBjb29raWVDb25zZW50W29wdGlvbl0gPSBvcHRpb25zW29wdGlvbl07XG4gICAgfVxuXG4gICAgLy8gRXNzZW50aWFsIGNvb2tpZXMgY2Fubm90IGJlIGRlc2VsZWN0ZWQsIGlnbm9yZSB0aGlzIGNvb2tpZSB0eXBlXG4gICAgZGVsZXRlIGNvb2tpZUNvbnNlbnQuZXNzZW50aWFsO1xuXG4gICAgY29va2llQ29uc2VudC52ZXJzaW9uID0gd2luZG93LkdEU19DT05TRU5UX0NPT0tJRV9WRVJTSU9OO1xuXG4gICAgLy8gU2V0IHRoZSBjb25zZW50IGNvb2tpZVxuICAgIHNldENvb2tpZSh3aW5kb3cuR0FfQ09PS0lFX05BTUUsIEpTT04uc3RyaW5naWZ5KGNvb2tpZUNvbnNlbnQpLCB7IGRheXM6IDM2NSB9KTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgb3RoZXIgY29va2llc1xuICAgIHJlc2V0Q29va2llcygpO1xufVxuXG4vKiogQXBwbHkgdGhlIHVzZXIncyBjb29raWUgcHJlZmVyZW5jZXNcbiAqXG4gKiBEZWxldGVzIGFueSBjb29raWVzIHRoZSB1c2VyIGhhcyBub3QgY29uc2VudGVkIHRvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDb29raWVzKCkge1xuICAgIHZhciBvcHRpb25zID0gZ2V0Q29uc2VudENvb2tpZSgpO1xuXG4gICAgLy8gSWYgbm8gcHJlZmVyZW5jZXMgb3Igb2xkIHZlcnNpb24gdXNlIHRoZSBkZWZhdWx0XG4gICAgaWYgKCFpc1ZhbGlkQ29uc2VudENvb2tpZShvcHRpb25zKSkge1xuICAgICAgICBvcHRpb25zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShERUZBVUxUX0NPT0tJRV9DT05TRU5UKSk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgY29va2llVHlwZSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGlmIChjb29raWVUeXBlID09PSAndmVyc2lvbicpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXNzZW50aWFsIGNvb2tpZXMgY2Fubm90IGJlIGRlc2VsZWN0ZWQsIGlnbm9yZSB0aGlzIGNvb2tpZSB0eXBlXG4gICAgICAgIGlmIChjb29raWVUeXBlID09PSAnZXNzZW50aWFsJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW9wdGlvbnNbY29va2llVHlwZV0pIHtcbiAgICAgICAgICAgIC8vIEZldGNoIHRoZSBjb29raWVzIGluIHRoYXQgY2F0ZWdvcnlcbiAgICAgICAgICAgIHZhciBjb29raWVzSW5DYXRlZ29yeSA9IENPT0tJRV9DQVRFR09SSUVTW2Nvb2tpZVR5cGVdXG5cbiAgICAgICAgICAgIGNvb2tpZXNJbkNhdGVnb3J5LmZvckVhY2goZnVuY3Rpb24gKGNvb2tpZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZUNvb2tpZShjb29raWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVzZXJBbGxvd3NDb29raWVDYXRlZ29yeShjb29raWVDYXRlZ29yeSwgY29va2llUHJlZmVyZW5jZXMpIHtcbiAgICAvLyBFc3NlbnRpYWwgY29va2llcyBhcmUgYWx3YXlzIGFsbG93ZWRcbiAgICBpZiAoY29va2llQ2F0ZWdvcnkgPT09ICdlc3NlbnRpYWwnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFNvbWV0aW1lcyBjb29raWVQcmVmZXJlbmNlcyBpcyBtYWxmb3JtZWQgaW4gc29tZSBvZiB0aGUgdGVzdHMsIHNvIHdlIG5lZWQgdG8gaGFuZGxlIHRoZXNlXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGNvb2tpZVByZWZlcmVuY2VzW2Nvb2tpZUNhdGVnb3J5XTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVzZXJBbGxvd3NDb29raWUoY29va2llTmFtZTogc3RyaW5nKSB7XG4gICAgLy8gQWx3YXlzIGFsbG93IHNldHRpbmcgdGhlIGNvbnNlbnQgY29va2llXG4gICAgaWYgKGNvb2tpZU5hbWUgPT09IHdpbmRvdy5HQV9DT09LSUVfTkFNRSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgY29va2llIHByZWZlcmVuY2VzXG4gICAgdmFyIGNvb2tpZVByZWZlcmVuY2VzID0gZ2V0Q29uc2VudENvb2tpZSgpO1xuXG4gICAgLy8gSWYgbm8gcHJlZmVyZW5jZXMgb3Igb2xkIHZlcnNpb24gdXNlIHRoZSBkZWZhdWx0XG4gICAgaWYgKCFpc1ZhbGlkQ29uc2VudENvb2tpZShjb29raWVQcmVmZXJlbmNlcykpIHtcbiAgICAgICAgY29va2llUHJlZmVyZW5jZXMgPSBERUZBVUxUX0NPT0tJRV9DT05TRU5UO1xuICAgIH1cblxuICAgIGZvciAodmFyIGNhdGVnb3J5IGluIENPT0tJRV9DQVRFR09SSUVTKSB7XG4gICAgICAgIHZhciBjb29raWVzSW5DYXRlZ29yeSA9IENPT0tJRV9DQVRFR09SSUVTW2NhdGVnb3J5XTtcblxuICAgICAgICBpZiAoY29va2llc0luQ2F0ZWdvcnkuaW5kZXhPZihjb29raWVOYW1lKSAhPT0gJy0xJykge1xuICAgICAgICAgICAgcmV0dXJuIHVzZXJBbGxvd3NDb29raWVDYXRlZ29yeShjYXRlZ29yeSwgY29va2llUHJlZmVyZW5jZXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGVueSB0aGUgY29va2llIGlmIGl0IGlzIG5vdCBrbm93biB0byB1c1xuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29va2llKG5hbWU6IHN0cmluZykge1xuICAgIHZhciBuYW1lRVEgPSBuYW1lICsgJz0nO1xuICAgIHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvb2tpZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGNvb2tpZSA9IGNvb2tpZXNbaV07XG4gICAgICAgIHdoaWxlIChjb29raWUuY2hhckF0KDApID09PSAnICcpIHtcbiAgICAgICAgICAgIGNvb2tpZSA9IGNvb2tpZS5zdWJzdHJpbmcoMSwgY29va2llLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvb2tpZS5pbmRleE9mKG5hbWVFUSkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhuYW1lRVEubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8vIGRvIHdlIG5lZWQgdG8gc2V0IHRoZSBkb21haW4/XG5mdW5jdGlvbiBzZXRDb29raWUobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcHRpb25zPzogQ29va2llT3B0aW9ucykge1xuICAgIGlmICh1c2VyQWxsb3dzQ29va2llKG5hbWUpKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fVxuICAgICAgICB9XG4gICAgICAgIHZhciBjb29raWVTdHJpbmcgPSBuYW1lICsgJz0nICsgdmFsdWUgKyAnOyBwYXRoPS87IFNhbWVTaXRlPVN0cmljdCc7XG4gICAgICAgIGlmIChvcHRpb25zLmRheXMpIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIChvcHRpb25zLmRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XG4gICAgICAgICAgICBjb29raWVTdHJpbmcgPSBjb29raWVTdHJpbmcgKyAnOyBleHBpcmVzPScgKyBkYXRlLnRvVVRDU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6Jykge1xuICAgICAgICAgICAgY29va2llU3RyaW5nID0gY29va2llU3RyaW5nICsgJzsgU2VjdXJlJztcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWVTdHJpbmc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZWxldGVDb29raWUobmFtZTogc3RyaW5nKSB7XG4gICAgaWYgKGdldENvb2tpZShuYW1lKSkge1xuICAgICAgICAvLyBDb29raWVzIG5lZWQgdG8gYmUgZGVsZXRlZCBpbiB0aGUgc2FtZSBsZXZlbCBvZiBzcGVjaWZpY2l0eSBpbiB3aGljaCB0aGV5IHdlcmUgc2V0XG4gICAgICAgIC8vIElmIGEgY29va2llIHdhcyBzZXQgd2l0aCBhIHNwZWNpZmllZCBkb21haW4sIGl0IG5lZWRzIHRvIGJlIHNwZWNpZmllZCB3aGVuIGRlbGV0ZWRcbiAgICAgICAgLy8gSWYgYSBjb29raWUgd2Fzbid0IHNldCB3aXRoIHRoZSBkb21haW4gYXR0cmlidXRlLCBpdCBzaG91bGRuJ3QgYmUgdGhlcmUgd2hlbiBkZWxldGVkXG4gICAgICAgIC8vIFlvdSBjYW4ndCB0ZWxsIGlmIGEgY29va2llIHdhcyBzZXQgd2l0aCBhIGRvbWFpbiBhdHRyaWJ1dGUgb3Igbm90LCBzbyB0cnkgYm90aCBvcHRpb25zXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPTtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UO3BhdGg9Lyc7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPTtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UO2RvbWFpbj0nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgJztwYXRoPS8nO1xuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz07ZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVDtkb21haW49LicgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnO3BhdGg9Lyc7XG4gICAgfVxufSJdfQ==\n","/*todo: remove this and use NodeList.prototype.forEach instead, as govuk has for v5 */\n/* https://github.com/alphagov/govuk-frontend/issues/3466 */\n/* https://github.com/alphagov/govuk-frontend/pull/3570/files */\nexport function nodeListForEach(nodes, callback) {\n    if (window.NodeList.prototype.forEach) {\n        return nodes.forEach(callback);\n    }\n    for (var i = 0; i < nodes.length; i++) {\n        callback.call(window, nodes[i], i, nodes);\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvaGVscGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxzRkFBc0Y7QUFDdEYsNERBQTREO0FBQzVELGdFQUFnRTtBQUVoRSxNQUFNLFVBQVUsZUFBZSxDQUMzQixLQUEwQixFQUMxQixRQUE0RTtJQUU1RSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3BDLE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBQ0QsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUNwQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzlDLENBQUM7QUFDTCxDQUFDIiwiZmlsZSI6ImNvbXBvbmVudHMvaGVscGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qdG9kbzogcmVtb3ZlIHRoaXMgYW5kIHVzZSBOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCBpbnN0ZWFkLCBhcyBnb3Z1ayBoYXMgZm9yIHY1ICovXG4vKiBodHRwczovL2dpdGh1Yi5jb20vYWxwaGFnb3YvZ292dWstZnJvbnRlbmQvaXNzdWVzLzM0NjYgKi9cbi8qIGh0dHBzOi8vZ2l0aHViLmNvbS9hbHBoYWdvdi9nb3Z1ay1mcm9udGVuZC9wdWxsLzM1NzAvZmlsZXMgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5vZGVMaXN0Rm9yRWFjaChcbiAgICBub2RlczogTm9kZUxpc3RPZjxFbGVtZW50PixcbiAgICBjYWxsYmFjazogKG5vZGU6IEVsZW1lbnQsIGluZGV4OiBudW1iZXIsIG5vZGVzOiBOb2RlTGlzdE9mPEVsZW1lbnQ+KSA9PiB2b2lkXG4pOiB2b2lkIHtcbiAgICBpZiAod2luZG93Lk5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoKSB7XG4gICAgICAgIHJldHVybiBub2Rlcy5mb3JFYWNoKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjYWxsYmFjay5jYWxsKHdpbmRvdywgbm9kZXNbaV0sIGksIG5vZGVzKTtcbiAgICB9XG59XG4iXX0=\n","// from https://github.com/ideal-postcodes/postcode\n/**\n * @hidden\n */\nexport const DISTRICT_SPLIT_REGEX = /^([a-z]{1,2}\\d)([a-z])$/i;\n/**\n * Tests for the unit section of a postcode\n */\nexport const UNIT_REGEX = /[a-z]{2}$/i;\n/**\n * Tests for the inward code section of a postcode\n */\nexport const INCODE_REGEX = /\\d[a-z]{2}$/i;\n/**\n * Tests for the outward code section of a postcode\n */\nexport const OUTCODE_REGEX = /^[a-z]{1,2}\\d[a-z\\d]?$/i;\n/**\n * Tests for a valid postcode\n */\nexport const POSTCODE_REGEX = /^[a-z]{1,2}\\d[a-z\\d]?\\s*\\d[a-z]{2}$/i;\n/**\n * Test for a valid postcode embedded in text\n */\nexport const POSTCODE_CORPUS_REGEX = /[a-z]{1,2}\\d[a-z\\d]?\\s*\\d[a-z]{2}/gi;\n/**\n * Tests for the area section of a postcode\n */\nexport const AREA_REGEX = /^[a-z]{1,2}/i;\n/**\n * Invalid postcode prototype\n * @hidden\n */\nconst invalidPostcode = {\n    valid: false,\n    postcode: null,\n    incode: null,\n    outcode: null,\n    area: null,\n    district: null,\n    subDistrict: null,\n    sector: null,\n    unit: null,\n};\n/**\n * Return first elem of input is RegExpMatchArray or null if input null\n * @hidden\n */\nconst firstOrNull = (match) => {\n    if (match === null)\n        return null;\n    return match[0];\n};\nconst SPACE_REGEX = /\\s+/gi;\n/**\n * Drop all spaces and uppercase\n * @hidden\n */\nconst sanitize = (s) => s.replace(SPACE_REGEX, \"\").toUpperCase();\n/**\n * Sanitizes string and returns regex matches\n * @hidden\n */\nconst matchOn = (s, regex) => sanitize(s).match(regex);\n/**\n * Detects a \"valid\" postcode\n * - Starts and ends on a non-space character\n * - Any length of intervening space is allowed\n * - Must conform to one of following schemas:\n *  - AA1A 1AA\n *  - A1A 1AA\n *  - A1 1AA\n *  - A99 9AA\n *  - AA9 9AA\n *  - AA99 9AA\n */\nexport const isValid = (postcode) => postcode.match(POSTCODE_REGEX) !== null;\n/**\n * Returns true if string is a valid outcode\n */\nexport const validOutcode = (outcode) => outcode.match(OUTCODE_REGEX) !== null;\n/**\n * Returns a normalised postcode string (i.e. uppercased and properly spaced)\n *\n * Returns null if invalid postcode\n */\nexport const toNormalised = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const incode = toIncode(postcode);\n    if (incode === null)\n        return null;\n    return `${outcode} ${incode}`;\n};\n/**\n * Returns a correctly formatted outcode given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toOutcode = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    return sanitize(postcode).replace(INCODE_REGEX, \"\");\n};\n/**\n * Returns a correctly formatted incode given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toIncode = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, INCODE_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted area given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toArea = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, AREA_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted sector given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toSector = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const incode = toIncode(postcode);\n    if (incode === null)\n        return null;\n    return `${outcode} ${incode[0]}`;\n};\n/**\n * Returns a correctly formatted unit given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toUnit = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, UNIT_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted district given a postcode\n *\n * Returns null if invalid postcode\n *\n * @example\n *\n * ```\n * toDistrict(\"AA9 9AA\") // => \"AA9\"\n * toDistrict(\"A9A 9AA\") // => \"A9\"\n * ```\n */\nexport const toDistrict = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const match = outcode.match(DISTRICT_SPLIT_REGEX);\n    if (match === null)\n        return outcode;\n    return match[1];\n};\n/**\n * Returns a correctly formatted subdistrict given a postcode\n *\n * Returns null if no subdistrict is available on valid postcode\n * Returns null if invalid postcode\n *\n * @example\n *\n * ```\n * toSubDistrict(\"AA9A 9AA\") // => \"AA9A\"\n * toSubDistrict(\"A9A 9AA\") // => \"A9A\"\n * toSubDistrict(\"AA9 9AA\") // => null\n * toSubDistrict(\"A9 9AA\") // => null\n * ```\n */\nexport const toSubDistrict = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const split = outcode.match(DISTRICT_SPLIT_REGEX);\n    if (split === null)\n        return null;\n    return outcode;\n};\n/**\n * Returns a ValidPostcode or InvalidPostcode object from a postcode string\n *\n * @example\n *\n * ```\n * import { parse } from \"postcode\";\n *\n * const {\n * postcode,    // => \"SW1A 2AA\"\n * outcode,     // => \"SW1A\"\n * incode,      // => \"2AA\"\n * area,        // => \"SW\"\n * district,    // => \"SW1\"\n * unit,        // => \"AA\"\n * sector,      // => \"SW1A 2\"\n * subDistrict, // => \"SW1A\"\n * valid,       // => true\n * } = parse(\"Sw1A     2aa\");\n *\n * const {\n * postcode,    // => null\n * outcode,     // => null\n * incode,      // => null\n * area,        // => null\n * district,    // => null\n * unit,        // => null\n * sector,      // => null\n * subDistrict, // => null\n * valid,       // => false\n * } = parse(\"    Oh no, ):   \");\n * ```\n */\nexport const parse = (postcode) => {\n    if (!isValid(postcode))\n        return Object.assign({}, invalidPostcode);\n    return {\n        valid: true,\n        postcode: toNormalised(postcode),\n        incode: toIncode(postcode),\n        outcode: toOutcode(postcode),\n        area: toArea(postcode),\n        district: toDistrict(postcode),\n        subDistrict: toSubDistrict(postcode),\n        sector: toSector(postcode),\n        unit: toUnit(postcode),\n    };\n};\n/**\n * Searches a body of text for postcode matches\n *\n * Returns an empty array if no match\n *\n * @example\n *\n * ```\n * // Retrieve valid postcodes in a body of text\n * const matches = match(\"The PM and her no.2 live at SW1A2aa and SW1A 2AB\"); // => [\"SW1A2aa\", \"SW1A 2AB\"]\n *\n * // Perform transformations like normalisation postcodes using `.map` and `toNormalised`\n * matches.map(toNormalised); // => [\"SW1A 2AA\", \"SW1A 2AB\"]\n *\n * // No matches yields empty array\n * match(\"Some London outward codes are SW1A, NW1 and E1\"); // => []\n * ```\n */\nexport const match = (corpus) => corpus.match(POSTCODE_CORPUS_REGEX) || [];\n/**\n * Replaces postcodes in a body of text with a string\n *\n * By default the replacement string is empty string `\"\"`\n *\n * @example\n *\n * ```\n * // Replace postcodes in a body of text\n * replace(\"The PM and her no.2 live at SW1A2AA and SW1A 2AB\");\n * // => { match: [\"SW1A2AA\", \"SW1A 2AB\"], result: \"The PM and her no.2 live at  and \" }\n *\n * // Add custom replacement\n * replace(\"The PM lives at SW1A 2AA\", \"Downing Street\");\n * // => { match: [\"SW1A 2AA\"], result: \"The PM lives at Downing Street\" };\n *\n * // No match\n * replace(\"Some London outward codes are SW1A, NW1 and E1\");\n * // => { match: [], result: \"Some London outward codes are SW1A, NW1 and E1\" }\n * ```\n */\nexport const replace = (corpus, replaceWith = \"\") => ({\n    match: match(corpus),\n    result: corpus.replace(POSTCODE_CORPUS_REGEX, replaceWith),\n});\nexport const FIXABLE_REGEX = /^\\s*[a-z01]{1,2}[0-9oi][a-z\\d]?\\s*[0-9oi][a-z01]{2}\\s*$/i;\n/**\n * Attempts to fix and clean a postcode. Specifically:\n * - Performs character conversion on obviously wrong and commonly mixed up letters (e.g. O => 0 and vice versa)\n * - Trims string\n * - Properly adds space between outward and inward codes\n *\n * If the postcode cannot be coerced into a valid format, the original string is returned\n *\n * @example\n * ```javascript\n * fix(\" SW1A  2AO\") => \"SW1A 2AO\" // Properly spaces\n * fix(\"SW1A 2A0\") => \"SW1A 2AO\" // 0 is coerced into \"0\"\n * ```\n *\n * Aims to be used in conjunction with parse to make postcode entry more forgiving:\n *\n * @example\n * ```javascript\n * const { inward } = parse(fix(\"SW1A 2A0\")); // inward = \"2AO\"\n * ```\n */\nexport const fix = (s) => {\n    const match = s.match(FIXABLE_REGEX);\n    if (match === null)\n        return s;\n    s = s.toUpperCase().trim().replace(/\\s+/gi, \"\");\n    const l = s.length;\n    const inward = s.slice(l - 3, l);\n    return `${coerceOutcode(s.slice(0, l - 3))} ${coerce(\"NLL\", inward)}`;\n};\nconst toLetter = {\n    \"0\": \"O\",\n    \"1\": \"I\",\n};\nconst toNumber = {\n    O: \"0\",\n    I: \"1\",\n};\nconst coerceOutcode = (i) => {\n    if (i.length === 2)\n        return coerce(\"LN\", i);\n    if (i.length === 3)\n        return coerce(\"L??\", i);\n    if (i.length === 4)\n        return coerce(\"LLN?\", i);\n    return i;\n};\n/**\n * Given a pattern of letters, numbers and unknowns represented as a sequence\n * of L, Ns and ? respectively; coerce them into the correct type given a\n * mapping of potentially confused letters\n *\n * @hidden\n *\n * @example coerce(\"LLN\", \"0O8\") => \"OO8\"\n */\nconst coerce = (pattern, input) => input\n    .split(\"\")\n    .reduce((acc, c, i) => {\n    const target = pattern.charAt(i);\n    if (target === \"N\")\n        acc.push(toNumber[c] || c);\n    if (target === \"L\")\n        acc.push(toLetter[c] || c);\n    if (target === \"?\")\n        acc.push(c);\n    return acc;\n}, [])\n    .join(\"\");\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvcG9zdGNvZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbURBQW1EO0FBRW5EOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsMEJBQTBCLENBQUM7QUFDL0Q7O0dBRUc7QUFDSCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDO0FBQ3ZDOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLGNBQWMsQ0FBQztBQUMzQzs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyx5QkFBeUIsQ0FBQztBQUN2RDs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBRyxzQ0FBc0MsQ0FBQztBQUVyRTs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLHFDQUFxQyxDQUFDO0FBRTNFOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLGNBQWMsQ0FBQztBQWdEekM7OztHQUdHO0FBQ0gsTUFBTSxlQUFlLEdBQW9CO0lBQ3JDLEtBQUssRUFBRSxLQUFLO0lBQ1osUUFBUSxFQUFFLElBQUk7SUFDZCxNQUFNLEVBQUUsSUFBSTtJQUNaLE9BQU8sRUFBRSxJQUFJO0lBQ2IsSUFBSSxFQUFFLElBQUk7SUFDVixRQUFRLEVBQUUsSUFBSTtJQUNkLFdBQVcsRUFBRSxJQUFJO0lBQ2pCLE1BQU0sRUFBRSxJQUFJO0lBQ1osSUFBSSxFQUFFLElBQUk7Q0FDYixDQUFDO0FBRUY7OztHQUdHO0FBQ0gsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUE4QixFQUFpQixFQUFFO0lBQ2xFLElBQUksS0FBSyxLQUFLLElBQUk7UUFBRSxPQUFPLElBQUksQ0FBQztJQUNoQyxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQixDQUFDLENBQUM7QUFFRixNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUM7QUFFNUI7OztHQUdHO0FBQ0gsTUFBTSxRQUFRLEdB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RyxDQUFDLE9BQWUsRUFBRSxLQUFhLEVBQVUsRUFBRSxDQUN0RCxLQUFLO0tBQ0EsS0FBSyxDQUFDLEVBQUUsQ0FBQztLQUNULE1BQU0sQ0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDNUIsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqQyxJQUFJLE1BQU0sS0FBSyxHQUFHO1FBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDL0MsSUFBSSxNQUFNLEtBQUssR0FBRztRQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQy9DLElBQUksTUFBTSxLQUFLLEdBQUc7UUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLE9BQU8sR0FBRyxDQUFDO0FBQ2YsQ0FBQyxFQUFFLEVBQUUsQ0FBQztLQUNMLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL3Bvc3Rjb2RlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vaWRlYWwtcG9zdGNvZGVzL3Bvc3Rjb2RlXG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY29uc3QgRElTVFJJQ1RfU1BMSVRfUkVHRVggPSAvXihbYS16XXsxLDJ9XFxkKShbYS16XSkkL2k7XG4vKipcbiAqIFRlc3RzIGZvciB0aGUgdW5pdCBzZWN0aW9uIG9mIGEgcG9zdGNvZGVcbiAqL1xuZXhwb3J0IGNvbnN0IFVOSVRfUkVHRVggPSAvW2Etel17Mn0kL2k7XG4vKipcbiAqIFRlc3RzIGZvciB0aGUgaW53YXJkIGNvZGUgc2VjdGlvbiBvZiBhIHBvc3Rjb2RlXG4gKi9cbmV4cG9ydCBjb25zdCBJTkNPREVfUkVHRVggPSAvXFxkW2Etel17Mn0kL2k7XG4vKipcbiAqIFRlc3RzIGZvciB0aGUgb3V0d2FyZCBjb2RlIHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxuICovXG5leHBvcnQgY29uc3QgT1VUQ09ERV9SRUdFWCA9IC9eW2Etel17MSwyfVxcZFthLXpcXGRdPyQvaTtcbi8qKlxuICogVGVzdHMgZm9yIGEgdmFsaWQgcG9zdGNvZGVcbiAqL1xuZXhwb3J0IGNvbnN0IFBPU1RDT0RFX1JFR0VYID0gL15bYS16XXsxLDJ9XFxkW2EtelxcZF0/XFxzKlxcZFthLXpdezJ9JC9pO1xuXG4vKipcbiAqIFRlc3QgZm9yIGEgdmFsaWQgcG9zdGNvZGUgZW1iZWRkZWQgaW4gdGV4dFxuICovXG5leHBvcnQgY29uc3QgUE9TVENPREVfQ09SUFVTX1JFR0VYID0gL1thLXpdezEsMn1cXGRbYS16XFxkXT9cXHMqXFxkW2Etel17Mn0vZ2k7XG5cbi8qKlxuICogVGVzdHMgZm9yIHRoZSBhcmVhIHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxuICovXG5leHBvcnQgY29uc3QgQVJFQV9SRUdFWCA9IC9eW2Etel17MSwyfS9pO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuaW50ZXJmYWNlIFZhbGlkYXRvciB7XG4gICAgKGlucHV0OiBzdHJpbmcpOiBib29sZWFuO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuaW50ZXJmYWNlIFBhcnNlciB7XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIChwb3N0Y29kZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgdmFsaWQgcG9zdGNvZGVcbiAqXG4gKiBOb3RlIHRoYXQgcmVzdWx0cyB3aWxsIGJlIG5vcm1hbGlzZWQgKGkuZS4gY29ycmVjdGx5IGZvcm1hdHRlZCksIGluY2x1ZGluZyBgcG9zdGNvZGVgXG4gKi9cbnR5cGUgVmFsaWRQb3N0Y29kZSA9IHtcbiAgICB2YWxpZDogdHJ1ZTtcbiAgICBwb3N0Y29kZTogc3RyaW5nO1xuICAgIGluY29kZTogc3RyaW5nO1xuICAgIG91dGNvZGU6IHN0cmluZztcbiAgICBhcmVhOiBzdHJpbmc7XG4gICAgZGlzdHJpY3Q6IHN0cmluZztcbiAgICBzdWJEaXN0cmljdDogc3RyaW5nIHwgbnVsbDtcbiAgICBzZWN0b3I6IHN0cmluZztcbiAgICB1bml0OiBzdHJpbmc7XG59O1xuXG50eXBlIEludmFsaWRQb3N0Y29kZSA9IHtcbiAgICB2YWxpZDogZmFsc2U7XG4gICAgcG9zdGNvZGU6IG51bGw7XG4gICAgaW5jb2RlOiBudWxsO1xuICAgIG91dGNvZGU6IG51bGw7XG4gICAgYXJlYTogbnVsbDtcbiAgICBkaXN0cmljdDogbnVsbDtcbiAgICBzdWJEaXN0cmljdDogbnVsbDtcbiAgICBzZWN0b3I6IG51bGw7XG4gICAgdW5pdDogbnVsbDtcbn07XG5cbi8qKlxuICogSW52YWxpZCBwb3N0Y29kZSBwcm90b3R5cGVcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaW52YWxpZFBvc3Rjb2RlOiBJbnZhbGlkUG9zdGNvZGUgPSB7XG4gICAgdmFsaWQ6IGZhbHNlLFxuICAgIHBvc3Rjb2RlOiBudWxsLFxuICAgIGluY29kZTogbnVsbCxcbiAgICBvdXRjb2RlOiBudWxsLFxuICAgIGFyZWE6IG51bGwsXG4gICAgZGlzdHJpY3Q6IG51bGwsXG4gICAgc3ViRGlzdHJpY3Q6IG51bGwsXG4gICAgc2VjdG9yOiBudWxsLFxuICAgIHVuaXQ6IG51bGwsXG59O1xuXG4vKipcbiAqIFJldHVybiBmaXJzdCBlbGVtIG9mIGlucHV0IGlzIFJlZ0V4cE1hdGNoQXJyYXkgb3IgbnVsbCBpZiBpbnB1dCBudWxsXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGZpcnN0T3JOdWxsID0gKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCk6IHN0cmluZyB8IG51bGwgPT4ge1xuICAgIGlmIChtYXRjaCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIG1hdGNoWzBdO1xufTtcblxuY29uc3QgU1BBQ0VfUkVHRVggPSAvXFxzKy9naTtcblxuLyoqXG4gKiBEcm9wIGFsbCBzcGFjZXMgYW5kIHVwcGVyY2FzZVxuICogQGhpZGRlblxuICovXG5jb25zdCBzYW5pdGl6ZSA9IChzOiBzdHJpbmcpOiBzdHJpbmcgPT5cbiAgICBzLnJlcGxhY2UoU1BBQ0VfUkVHRVgsIFwiXCIpLnRvVXBwZXJDYXNlKCk7XG5cbi8qKlxuICogU2FuaXRpemVzIHN0cmluZyBhbmQgcmV0dXJucyByZWdleCBtYXRjaGVzXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IG1hdGNoT24gPSAoczogc3RyaW5nLCByZWdleDogUmVnRXhwKTogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGwgPT5cbiAgICBzYW5pdGl6ZShzKS5tYXRjaChyZWdleCk7XG5cbi8qKlxuICogRGV0ZWN0cyBhIFwidmFsaWRcIiBwb3N0Y29kZVxuICogLSBTdGFydHMgYW5kIGVuZHMgb24gYSBub24tc3BhY2UgY2hhcmFjdGVyXG4gKiAtIEFueSBsZW5ndGggb2YgaW50ZXJ2ZW5pbmcgc3BhY2UgaXMgYWxsb3dlZFxuICogLSBNdXN0IGNvbmZvcm0gdG8gb25lIG9mIGZvbGxvd2luZyBzY2hlbWFzOlxuICogIC0gQUExQSAxQUFcbiAqICAtIEExQSAxQUFcbiAqICAtIEExIDFBQVxuICogIC0gQTk5IDlBQVxuICogIC0gQUE5IDlBQVxuICogIC0gQUE5OSA5QUFcbiAqL1xuZXhwb3J0IGNvbnN0IGlzVmFsaWQ6IFZhbGlkYXRvciA9IChwb3N0Y29kZSkgPT5cbiAgICBwb3N0Y29kZS5tYXRjaChQT1NUQ09ERV9SRUdFWCkgIT09IG51bGw7XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHN0cmluZyBpcyBhIHZhbGlkIG91dGNvZGVcbiAqL1xuZXhwb3J0IGNvbnN0IHZhbGlkT3V0Y29kZTogVmFsaWRhdG9yID0gKG91dGNvZGUpID0+XG4gICAgb3V0Y29kZS5tYXRjaChPVVRDT0RFX1JFR0VYKSAhPT0gbnVsbDtcblxuLyoqXG4gKiBSZXR1cm5zIGEgbm9ybWFsaXNlZCBwb3N0Y29kZSBzdHJpbmcgKGkuZS4gdXBwZXJjYXNlZCBhbmQgcHJvcGVybHkgc3BhY2VkKVxuICpcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXG4gKi9cbmV4cG9ydCBjb25zdCB0b05vcm1hbGlzZWQ6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xuICAgIGlmIChvdXRjb2RlID09PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBpbmNvZGUgPSB0b0luY29kZShwb3N0Y29kZSk7XG4gICAgaWYgKGluY29kZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGAke291dGNvZGV9ICR7aW5jb2RlfWA7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBjb3JyZWN0bHkgZm9ybWF0dGVkIG91dGNvZGUgZ2l2ZW4gYSBwb3N0Y29kZVxuICpcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXG4gKi9cbmV4cG9ydCBjb25zdCB0b091dGNvZGU6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xuICAgIGlmICghaXNWYWxpZChwb3N0Y29kZSkpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBzYW5pdGl6ZShwb3N0Y29kZSkucmVwbGFjZShJTkNPREVfUkVHRVgsIFwiXCIpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBpbmNvZGUgZ2l2ZW4gYSBwb3N0Y29kZVxuICpcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXG4gKi9cbmV4cG9ydCBjb25zdCB0b0luY29kZTogUGFyc2VyID0gKHBvc3Rjb2RlKSA9PiB7XG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWF0Y2ggPSBtYXRjaE9uKHBvc3Rjb2RlLCBJTkNPREVfUkVHRVgpO1xuICAgIHJldHVybiBmaXJzdE9yTnVsbChtYXRjaCk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBjb3JyZWN0bHkgZm9ybWF0dGVkIGFyZWEgZ2l2ZW4gYSBwb3N0Y29kZVxuICpcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXG4gKi9cbmV4cG9ydCBjb25zdCB0b0FyZWE6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xuICAgIGlmICghaXNWYWxpZChwb3N0Y29kZSkpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IG1hdGNoID0gbWF0Y2hPbihwb3N0Y29kZSwgQVJFQV9SRUdFWCk7XG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIGNvcnJlY3RseSBmb3JtYXR0ZWQgc2VjdG9yIGdpdmVuIGEgcG9zdGNvZGVcbiAqXG4gKiBSZXR1cm5zIG51bGwgaWYgaW52YWxpZCBwb3N0Y29kZVxuICovXG5leHBvcnQgY29uc3QgdG9TZWN0b3I6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xuICAgIGlmIChvdXRjb2RlID09PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBpbmNvZGUgPSB0b0luY29kZShwb3N0Y29kZSk7XG4gICAgaWYgKGluY29kZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGAke291dGNvZGV9ICR7aW5jb2RlWzBdfWA7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBjb3JyZWN0bHkgZm9ybWF0dGVkIHVuaXQgZ2l2ZW4gYSBwb3N0Y29kZVxuICpcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXG4gKi9cbmV4cG9ydCBjb25zdCB0b1VuaXQ6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xuICAgIGlmICghaXNWYWxpZChwb3N0Y29kZSkpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IG1hdGNoID0gbWF0Y2hPbihwb3N0Y29kZSwgVU5JVF9SRUdFWCk7XG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIGNvcnJlY3RseSBmb3JtYXR0ZWQgZGlzdHJpY3QgZ2l2ZW4gYSBwb3N0Y29kZVxuICpcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGBcbiAqIHRvRGlzdHJpY3QoXCJBQTkgOUFBXCIpIC8vID0+IFwiQUE5XCJcbiAqIHRvRGlzdHJpY3QoXCJBOUEgOUFBXCIpIC8vID0+IFwiQTlcIlxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCB0b0Rpc3RyaWN0OiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcbiAgICBjb25zdCBvdXRjb2RlID0gdG9PdXRjb2RlKHBvc3Rjb2RlKTtcbiAgICBpZiAob3V0Y29kZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWF0Y2ggPSBvdXRjb2RlLm1hdGNoKERJU1RSSUNUX1NQTElUX1JFR0VYKTtcbiAgICBpZiAobWF0Y2ggPT09IG51bGwpIHJldHVybiBvdXRjb2RlO1xuICAgIHJldHVybiBtYXRjaFsxXTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIGNvcnJlY3RseSBmb3JtYXR0ZWQgc3ViZGlzdHJpY3QgZ2l2ZW4gYSBwb3N0Y29kZVxuICpcbiAqIFJldHVybnMgbnVsbCBpZiBubyBzdWJkaXN0cmljdCBpcyBhdmFpbGFibGUgb24gdmFsaWQgcG9zdGNvZGVcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGBcbiAqIHRvU3ViRGlzdHJpY3QoXCJBQTlBIDlBQVwiKSAvLyA9PiBcIkFBOUFcIlxuICogdG9TdWJEaXN0cmljdChcIkE5QSA5QUFcIikgLy8gPT4gXCJBOUFcIlxuICogdG9TdWJEaXN0cmljdChcIkFBOSA5QUFcIikgLy8gPT4gbnVsbFxuICogdG9TdWJEaXN0cmljdChcIkE5IDlBQVwiKSAvLyA9PiBudWxsXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IHRvU3ViRGlzdHJpY3Q6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xuICAgIGlmIChvdXRjb2RlID09PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBzcGxpdCA9IG91dGNvZGUubWF0Y2goRElTVFJJQ1RfU1BMSVRfUkVHRVgpO1xuICAgIGlmIChzcGxpdCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIG91dGNvZGU7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBWYWxpZFBvc3Rjb2RlIG9yIEludmFsaWRQb3N0Y29kZSBvYmplY3QgZnJvbSBhIHBvc3Rjb2RlIHN0cmluZ1xuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgXG4gKiBpbXBvcnQgeyBwYXJzZSB9IGZyb20gXCJwb3N0Y29kZVwiO1xuICpcbiAqIGNvbnN0IHtcbiAqIHBvc3Rjb2RlLCAgICAvLyA9PiBcIlNXMUEgMkFBXCJcbiAqIG91dGNvZGUsICAgICAvLyA9PiBcIlNXMUFcIlxuICogaW5jb2RlLCAgICAgIC8vID0+IFwiMkFBXCJcbiAqIGFyZWEsICAgICAgICAvLyA9PiBcIlNXXCJcbiAqIGRpc3RyaWN0LCAgICAvLyA9PiBcIlNXMVwiXG4gKiB1bml0LCAgICAgICAgLy8gPT4gXCJBQVwiXG4gKiBzZWN0b3IsICAgICAgLy8gPT4gXCJTVzFBIDJcIlxuICogc3ViRGlzdHJpY3QsIC8vID0+IFwiU1cxQVwiXG4gKiB2YWxpZCwgICAgICAgLy8gPT4gdHJ1ZVxuICogfSA9IHBhcnNlKFwiU3cxQSAgICAgMmFhXCIpO1xuICpcbiAqIGNvbnN0IHtcbiAqIHBvc3Rjb2RlLCAgICAvLyA9PiBudWxsXG4gKiBvdXRjb2RlLCAgICAgLy8gPT4gbnVsbFxuICogaW5jb2RlLCAgICAgIC8vID0+IG51bGxcbiAqIGFyZWEsICAgICAgICAvLyA9PiBudWxsXG4gKiBkaXN0cmljdCwgICAgLy8gPT4gbnVsbFxuICogdW5pdCwgICAgICAgIC8vID0+IG51bGxcbiAqIHNlY3RvciwgICAgICAvLyA9PiBudWxsXG4gKiBzdWJEaXN0cmljdCwgLy8gPT4gbnVsbFxuICogdmFsaWQsICAgICAgIC8vID0+IGZhbHNlXG4gKiB9ID0gcGFyc2UoXCIgICAgT2ggbm8sICk6ICAgXCIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBwYXJzZSA9IChwb3N0Y29kZTogc3RyaW5nKTogVmFsaWRQb3N0Y29kZSB8IEludmFsaWRQb3N0Y29kZSA9PiB7XG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIHsgLi4uaW52YWxpZFBvc3Rjb2RlIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IHRydWUsXG4gICAgICAgIHBvc3Rjb2RlOiB0b05vcm1hbGlzZWQocG9zdGNvZGUpIGFzIHN0cmluZyxcbiAgICAgICAgaW5jb2RlOiB0b0luY29kZShwb3N0Y29kZSkgYXMgc3RyaW5nLFxuICAgICAgICBvdXRjb2RlOiB0b091dGNvZGUocG9zdGNvZGUpIGFzIHN0cmluZyxcbiAgICAgICAgYXJlYTogdG9BcmVhKHBvc3Rjb2RlKSBhcyBzdHJpbmcsXG4gICAgICAgIGRpc3RyaWN0OiB0b0Rpc3RyaWN0KHBvc3Rjb2RlKSBhcyBzdHJpbmcsXG4gICAgICAgIHN1YkRpc3RyaWN0OiB0b1N1YkRpc3RyaWN0KHBvc3Rjb2RlKSxcbiAgICAgICAgc2VjdG9yOiB0b1NlY3Rvcihwb3N0Y29kZSkgYXMgc3RyaW5nLFxuICAgICAgICB1bml0OiB0b1VuaXQocG9zdGNvZGUpIGFzIHN0cmluZyxcbiAgICB9O1xufTtcblxuLyoqXG4gKiBTZWFyY2hlcyBhIGJvZHkgb2YgdGV4dCBmb3IgcG9zdGNvZGUgbWF0Y2hlc1xuICpcbiAqIFJldHVybnMgYW4gZW1wdHkgYXJyYXkgaWYgbm8gbWF0Y2hcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYFxuICogLy8gUmV0cmlldmUgdmFsaWQgcG9zdGNvZGVzIGluIGEgYm9keSBvZiB0ZXh0XG4gKiBjb25zdCBtYXRjaGVzID0gbWF0Y2goXCJUaGUgUE0gYW5kIGhlciBuby4yIGxpdmUgYXQgU1cxQTJhYSBhbmQgU1cxQSAyQUJcIik7IC8vID0+IFtcIlNXMUEyYWFcIiwgXCJTVzFBIDJBQlwiXVxuICpcbiAqIC8vIFBlcmZvcm0gdHJhbnNmb3JtYXRpb25zIGxpa2Ugbm9ybWFsaXNhdGlvbiBwb3N0Y29kZXMgdXNpbmcgYC5tYXBgIGFuZCBgdG9Ob3JtYWxpc2VkYFxuICogbWF0Y2hlcy5tYXAodG9Ob3JtYWxpc2VkKTsgLy8gPT4gW1wiU1cxQSAyQUFcIiwgXCJTVzFBIDJBQlwiXVxuICpcbiAqIC8vIE5vIG1hdGNoZXMgeWllbGRzIGVtcHR5IGFycmF5XG4gKiBtYXRjaChcIlNvbWUgTG9uZG9uIG91dHdhcmQgY29kZXMgYXJlIFNXMUEsIE5XMSBhbmQgRTFcIik7IC8vID0+IFtdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IG1hdGNoID0gKGNvcnB1czogc3RyaW5nKTogc3RyaW5nW10gPT5cbiAgICBjb3JwdXMubWF0Y2goUE9TVENPREVfQ09SUFVTX1JFR0VYKSB8fCBbXTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmludGVyZmFjZSBSZXBsYWNlUmVzdWx0IHtcbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIG1hdGNoaW5nIHBvc3Rjb2RlcyBmb3VuZCBpbnRleHRcbiAgICAgKi9cbiAgICBtYXRjaDogc3RyaW5nW107XG4gICAgLyoqXG4gICAgICogQm9keSBvZiB0ZXh0IHdpdGggcG9zdGNvZGVzIHJlcGxhY2VkICh3aXRoIGVtcHR5IHN0cmluZyBieSBkZWZhdWx0KVxuICAgICAqL1xuICAgIHJlc3VsdDogc3RyaW5nO1xufVxuXG4vKipcbiAqIFJlcGxhY2VzIHBvc3Rjb2RlcyBpbiBhIGJvZHkgb2YgdGV4dCB3aXRoIGEgc3RyaW5nXG4gKlxuICogQnkgZGVmYXVsdCB0aGUgcmVwbGFjZW1lbnQgc3RyaW5nIGlzIGVtcHR5IHN0cmluZyBgXCJcImBcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYFxuICogLy8gUmVwbGFjZSBwb3N0Y29kZXMgaW4gYSBib2R5IG9mIHRleHRcbiAqIHJlcGxhY2UoXCJUaGUgUE0gYW5kIGhlciBuby4yIGxpdmUgYXQgU1cxQTJBQSBhbmQgU1cxQSAyQUJcIik7XG4gKiAvLyA9PiB7IG1hdGNoOiBbXCJTVzFBMkFBXCIsIFwiU1cxQSAyQUJcIl0sIHJlc3VsdDogXCJUaGUgUE0gYW5kIGhlciBuby4yIGxpdmUgYXQgIGFuZCBcIiB9XG4gKlxuICogLy8gQWRkIGN1c3RvbSByZXBsYWNlbWVudFxuICogcmVwbGFjZShcIlRoZSBQTSBsaXZlcyBhdCBTVzFBIDJBQVwiLCBcIkRvd25pbmcgU3RyZWV0XCIpO1xuICogLy8gPT4geyBtYXRjaDogW1wiU1cxQSAyQUFcIl0sIHJlc3VsdDogXCJUaGUgUE0gbGl2ZXMgYXQgRG93bmluZyBTdHJlZXRcIiB9O1xuICpcbiAqIC8vIE5vIG1hdGNoXG4gKiByZXBsYWNlKFwiU29tZSBMb25kb24gb3V0d2FyZCBjb2RlcyBhcmUgU1cxQSwgTlcxIGFuZCBFMVwiKTtcbiAqIC8vID0+IHsgbWF0Y2g6IFtdLCByZXN1bHQ6IFwiU29tZSBMb25kb24gb3V0d2FyZCBjb2RlcyBhcmUgU1cxQSwgTlcxIGFuZCBFMVwiIH1cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgcmVwbGFjZSA9IChjb3JwdXM6IHN0cmluZywgcmVwbGFjZVdpdGggPSBcIlwiKTogUmVwbGFjZVJlc3VsdCA9PiAoe1xuICAgIG1hdGNoOiBtYXRjaChjb3JwdXMpLFxuICAgIHJlc3VsdDogY29ycHVzLnJlcGxhY2UoUE9TVENPREVfQ09SUFVTX1JFR0VYLCByZXBsYWNlV2l0aCksXG59KTtcblxuZXhwb3J0IGNvbnN0IEZJWEFCTEVfUkVHRVggPSAvXlxccypbYS16MDFdezEsMn1bMC05b2ldW2EtelxcZF0/XFxzKlswLTlvaV1bYS16MDFdezJ9XFxzKiQvaTtcblxuLyoqXG4gKiBBdHRlbXB0cyB0byBmaXggYW5kIGNsZWFuIGEgcG9zdGNvZGUuIFNwZWNpZmljYWxseTpcbiAqIC0gUGVyZm9ybXMgY2hhcmFjdGVyIGNvbnZlcnNpb24gb24gb2J2aW91c2x5IHdyb25nIGFuZCBjb21tb25seSBtaXhlZCB1cCBsZXR0ZXJzIChlLmcuIE8gPT4gMCBhbmQgdmljZSB2ZXJzYSlcbiAqIC0gVHJpbXMgc3RyaW5nXG4gKiAtIFByb3Blcmx5IGFkZHMgc3BhY2UgYmV0d2VlbiBvdXR3YXJkIGFuZCBpbndhcmQgY29kZXNcbiAqXG4gKiBJZiB0aGUgcG9zdGNvZGUgY2Fubm90IGJlIGNvZXJjZWQgaW50byBhIHZhbGlkIGZvcm1hdCwgdGhlIG9yaWdpbmFsIHN0cmluZyBpcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBmaXgoXCIgU1cxQSAgMkFPXCIpID0+IFwiU1cxQSAyQU9cIiAvLyBQcm9wZXJseSBzcGFjZXNcbiAqIGZpeChcIlNXMUEgMkEwXCIpID0+IFwiU1cxQSAyQU9cIiAvLyAwIGlzIGNvZXJjZWQgaW50byBcIjBcIlxuICogYGBgXG4gKlxuICogQWltcyB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggcGFyc2UgdG8gbWFrZSBwb3N0Y29kZSBlbnRyeSBtb3JlIGZvcmdpdmluZzpcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogY29uc3QgeyBpbndhcmQgfSA9IHBhcnNlKGZpeChcIlNXMUEgMkEwXCIpKTsgLy8gaW53YXJkID0gXCIyQU9cIlxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBmaXggPSAoczogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBtYXRjaCA9IHMubWF0Y2goRklYQUJMRV9SRUdFWCk7XG4gICAgaWYgKG1hdGNoID09PSBudWxsKSByZXR1cm4gcztcbiAgICBzID0gcy50b1VwcGVyQ2FzZSgpLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2dpLCBcIlwiKTtcbiAgICBjb25zdCBsID0gcy5sZW5ndGg7XG4gICAgY29uc3QgaW53YXJkID0gcy5zbGljZShsIC0gMywgbCk7XG4gICAgcmV0dXJuIGAke2NvZXJjZU91dGNvZGUocy5zbGljZSgwLCBsIC0gMykpfSAke2NvZXJjZShcIk5MTFwiLCBpbndhcmQpfWA7XG59O1xuXG5jb25zdCB0b0xldHRlcjogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICBcIjBcIjogXCJPXCIsXG4gICAgXCIxXCI6IFwiSVwiLFxufTtcblxuY29uc3QgdG9OdW1iZXI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgTzogXCIwXCIsXG4gICAgSTogXCIxXCIsXG59O1xuXG5jb25zdCBjb2VyY2VPdXRjb2RlID0gKGk6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgaWYgKGkubGVuZ3RoID09PSAyKSByZXR1cm4gY29lcmNlKFwiTE5cIiwgaSk7XG4gICAgaWYgKGkubGVuZ3RoID09PSAzKSByZXR1cm4gY29lcmNlKFwiTD8/XCIsIGkpO1xuICAgIGlmIChpLmxlbmd0aCA9PT0gNCkgcmV0dXJuIGNvZXJjZShcIkxMTj9cIiwgaSk7XG4gICAgcmV0dXJuIGk7XG59O1xuXG4vKipcbiAqIEdpdmVuIGEgcGF0dGVybiBvZiBsZXR0ZXJzLCBudW1iZXJzIGFuZCB1bmtub3ducyByZXByZXNlbnRlZCBhcyBhIHNlcXVlbmNlXG4gKiBvZiBMLCBOcyBhbmQgPyByZXNwZWN0aXZlbHk7IGNvZXJjZSB0aGVtIGludG8gdGhlIGNvcnJlY3QgdHlwZSBnaXZlbiBhXG4gKiBtYXBwaW5nIG9mIHBvdGVudGlhbGx5IGNvbmZ1c2VkIGxldHRlcnNcbiAqXG4gKiBAaGlkZGVuXG4gKlxuICogQGV4YW1wbGUgY29lcmNlKFwiTExOXCIsIFwiME84XCIpID0+IFwiT084XCJcbiAqL1xuY29uc3QgY29lcmNlID0gKHBhdHRlcm46IHN0cmluZywgaW5wdXQ6IHN0cmluZyk6IHN0cmluZyA9PlxuICAgIGlucHV0XG4gICAgICAgIC5zcGxpdChcIlwiKVxuICAgICAgICAucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBwYXR0ZXJuLmNoYXJBdChpKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IFwiTlwiKSBhY2MucHVzaCh0b051bWJlcltjXSB8fCBjKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IFwiTFwiKSBhY2MucHVzaCh0b0xldHRlcltjXSB8fCBjKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IFwiP1wiKSBhY2MucHVzaChjKTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIFtdKVxuICAgICAgICAuam9pbihcIlwiKTsiXX0=\n","//todo: consent mode debugging/check: https://developers.google.com/tag-platform/devguides/consent-debugging\nimport { getConsentCookie, isValidConsentCookie } from './cookie-functions';\nimport { toOutcode } from './postcode';\nfunction gtag(command, ...args) {\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push(arguments);\n}\nlet GaMeasurementId = '';\n//todo: use prototype? (or class?)\n// (having an object (prototype/class) will ensure that GaMeasurementId will have already been set)\nexport default function initAnalytics(gaMeasurementId) {\n    // if the environment doesn't have a measurement id, don't load analytics\n    if (!Boolean(gaMeasurementId)) {\n        return;\n    }\n    GaMeasurementId = gaMeasurementId;\n    setDefaultConsent();\n    loadGaScript(gaMeasurementId);\n    gtag('js', new Date());\n    const pageViewParams = getPiiSafePageView(gaMeasurementId);\n    // set the config for auto generated events other than page_view\n    gtag('config', gaMeasurementId, {\n        send_page_view: false, //disable auto page_view measurement\n        page_path: pageViewParams.page_path,\n        page_location: pageViewParams.page_location,\n        page_referrer: pageViewParams.referrer,\n        cookie_flags: 'secure'\n    });\n    const userConsent = getConsentCookie();\n    if (userConsent && isValidConsentCookie(userConsent) && userConsent.analytics) {\n        updateAnalyticsStorageConsent(true);\n    }\n    sendPageViewEvent();\n    sendFilterPageCustomEvent();\n}\nfunction setDefaultConsent() {\n    gtag('consent', 'default', {\n        'analytics_storage': 'denied'\n    });\n    gtag('set', 'url_passthrough', true);\n}\nexport function updateAnalyticsStorageConsent(granted, delayMs) {\n    let options = {\n        'analytics_storage': granted ? 'granted' : 'denied'\n    };\n    if (typeof delayMs !== 'undefined') {\n        options['wait_for_update'] = delayMs;\n    }\n    gtag('consent', 'update', options);\n}\nexport function sendPageViewEvent() {\n    // send the page_view event manually (https://developers.google.com/analytics/devguides/collection/gtagjs/pages#default_behavior)\n    gtag('event', 'page_view', getPiiSafePageView(GaMeasurementId));\n}\nexport function sendFilterPageCustomEvent() {\n    //todo: make filter page only\n    const element = document.getElementById('results');\n    const totalResults = element === null || element === void 0 ? void 0 : element.getAttribute('data-total-results');\n    if (totalResults === undefined)\n        return;\n    gtag('event', 'filter_page', {\n        'total_results': totalResults\n    });\n}\nexport function sendAnalyticsCustomEvent(accepted, source) {\n    gtag('event', 'analytics', {\n        'accepted': accepted,\n        'source': source\n    });\n}\nfunction loadGaScript(gaMeasurementId) {\n    const f = document.getElementsByTagName('script')[0];\n    const j = document.createElement('script');\n    j.async = true;\n    j.src = 'https://www.googletagmanager.com/gtag/js?id=' + gaMeasurementId;\n    f.parentNode.insertBefore(j, f);\n}\nfunction getPiiSafePageView(gaMeasurementId) {\n    const pageView = {\n        page_title: document.title,\n        send_to: gaMeasurementId,\n        referrer: '',\n        page_location: '',\n        page_path: ''\n    };\n    //todo: set as referrer or page_referrer in pageView - does it matter? is it only picking it up from the config?\n    //todo: get piisafe referrer function\n    if (document.referrer !== '') {\n        const referrerUrl = new URL(document.referrer);\n        const piiSafeReferrerQueryString = getPiiSafeQueryString(referrerUrl.search);\n        if (piiSafeReferrerQueryString == null) {\n            pageView.referrer = document.referrer;\n        }\n        else {\n            const urlArray = document.referrer.split('?');\n            pageView.referrer = urlArray[0] + piiSafeReferrerQueryString;\n        }\n    }\n    const piiSafeQueryString = getPiiSafeQueryString(window.location.search);\n    if (piiSafeQueryString == null) {\n        pageView.page_location = window.location.href;\n        pageView.page_path = window.location.pathname + window.location.search;\n        return pageView;\n    }\n    const urlArray = window.location.href.split('?');\n    pageView.page_location = urlArray[0] + piiSafeQueryString;\n    pageView.page_path = window.location.pathname + piiSafeQueryString;\n    return pageView;\n}\nfunction getPiiSafeQueryString(queryString) {\n    //todo: for safety, convert to lowercase, so that if the user changes the case of the url, we still don't collect pii\n    const queryParams = new URLSearchParams(queryString);\n    let postcode = queryParams.get('postcode');\n    if (postcode == null) {\n        // null indicates original query params were already pii safe\n        return null;\n    }\n    postcode = toOutcode(postcode);\n    queryParams.set('postcode', postcode);\n    queryParams.delete('latitude');\n    queryParams.delete('longitude');\n    return '?' + queryParams.toString();\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYW5hbHl0aWNzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLDRHQUE0RztBQUU1RyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQUMzRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sWUFBWSxDQUFBO0FBRXRDLFNBQVMsSUFBSSxDQUFDLE9BQWUsRUFBRSxHQUFHLElBQVc7SUFDekMsTUFBTSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQztJQUMxQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNyQyxDQUFDO0FBRUQsSUFBSSxlQUFlLEdBQVcsRUFBRSxDQUFDO0FBRWpDLGtDQUFrQztBQUNsQyxtR0FBbUc7QUFDbkcsTUFBTSxDQUFDLE9BQU8sVUFBVSxhQUFhLENBQUMsZUFBdUI7SUFFekQseUVBQXlFO0lBQ3pFLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQztRQUM1QixPQUFPO0lBQ1gsQ0FBQztJQUVELGVBQWUsR0FBRyxlQUFlLENBQUM7SUFFbEMsaUJBQWlCLEVBQUUsQ0FBQztJQUVwQixZQUFZLENBQUMsZUFBZSxDQUFDLENBQUM7SUFFOUIsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLENBQUM7SUFFdkIsTUFBTSxjQUFjLEdBQUcsa0JBQWtCLENBQUMsZUFBZSxDQUFDLENBQUM7SUFFM0QsZ0VBQWdFO0lBQ2hFLElBQUksQ0FBQyxRQUFRLEVBQUUsZUFBZSxFQUFFO1FBQzVCLGNBQWMsRUFBRSxLQUFLLEVBQUUsb0NBQW9DO1FBQzNELFNBQVMsRUFBRSxjQUFjLENBQUMsU0FBUztRQUNuQyxhQUFhLEVBQUUsY0FBYyxDQUFDLGFBQWE7UUFDM0MsYUFBYSxFQUFFLGNBQWMsQ0FBQyxRQUFRO1FBQ3RDLFlBQVksRUFBRSxRQUFRO0tBQ3pC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LHFIQUFxSDtJQUNySCxNQUFNLFdBQVcsR0FBRyxJQUFJLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUVyRCxJQUFJLFFBQVEsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzNDLElBQUksUUFBUSxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ25CLDZEQUE2RDtRQUM3RCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQsUUFBUSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMvQixXQUFXLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN0QyxXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQy9CLFdBQVcsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFaEMsT0FBTyxHQUFHLEdBQUcsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQ3hDLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9hbmFseXRpY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vdG9kbzogY29uc2VudCBtb2RlIGRlYnVnZ2luZy9jaGVjazogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vdGFnLXBsYXRmb3JtL2Rldmd1aWRlcy9jb25zZW50LWRlYnVnZ2luZ1xuXG5pbXBvcnQgeyBnZXRDb25zZW50Q29va2llLCBpc1ZhbGlkQ29uc2VudENvb2tpZSB9IGZyb20gJy4vY29va2llLWZ1bmN0aW9ucydcbmltcG9ydCB7IHRvT3V0Y29kZSB9IGZyb20gJy4vcG9zdGNvZGUnXG5cbmZ1bmN0aW9uIGd0YWcoY29tbWFuZDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIHdpbmRvdy5kYXRhTGF5ZXIgPSB3aW5kb3cuZGF0YUxheWVyIHx8IFtdO1xuICAgIHdpbmRvdy5kYXRhTGF5ZXIucHVzaChhcmd1bWVudHMpO1xufVxuXG5sZXQgR2FNZWFzdXJlbWVudElkOiBzdHJpbmcgPSAnJztcblxuLy90b2RvOiB1c2UgcHJvdG90eXBlPyAob3IgY2xhc3M/KVxuLy8gKGhhdmluZyBhbiBvYmplY3QgKHByb3RvdHlwZS9jbGFzcykgd2lsbCBlbnN1cmUgdGhhdCBHYU1lYXN1cmVtZW50SWQgd2lsbCBoYXZlIGFscmVhZHkgYmVlbiBzZXQpXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0QW5hbHl0aWNzKGdhTWVhc3VyZW1lbnRJZDogc3RyaW5nKSB7XG5cbiAgICAvLyBpZiB0aGUgZW52aXJvbm1lbnQgZG9lc24ndCBoYXZlIGEgbWVhc3VyZW1lbnQgaWQsIGRvbid0IGxvYWQgYW5hbHl0aWNzXG4gICAgaWYgKCFCb29sZWFuKGdhTWVhc3VyZW1lbnRJZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIEdhTWVhc3VyZW1lbnRJZCA9IGdhTWVhc3VyZW1lbnRJZDtcblxuICAgIHNldERlZmF1bHRDb25zZW50KCk7XG5cbiAgICBsb2FkR2FTY3JpcHQoZ2FNZWFzdXJlbWVudElkKTtcblxuICAgIGd0YWcoJ2pzJywgbmV3IERhdGUoKSk7XG5cbiAgICBjb25zdCBwYWdlVmlld1BhcmFtcyA9IGdldFBpaVNhZmVQYWdlVmlldyhnYU1lYXN1cmVtZW50SWQpO1xuXG4gICAgLy8gc2V0IHRoZSBjb25maWcgZm9yIGF1dG8gZ2VuZXJhdGVkIGV2ZW50cyBvdGhlciB0aGFuIHBhZ2Vfdmlld1xuICAgIGd0YWcoJ2NvbmZpZycsIGdhTWVhc3VyZW1lbnRJZCwge1xuICAgICAgICBzZW5kX3BhZ2VfdmlldzogZmFsc2UsIC8vZGlzYWJsZSBhdXRvIHBhZ2VfdmlldyBtZWFzdXJlbWVudFxuICAgICAgICBwYWdlX3BhdGg6IHBhZ2VWaWV3UGFyYW1zLnBhZ2VfcGF0aCxcbiAgICAgICAgcGFnZV9sb2NhdGlvbjogcGFnZVZpZXdQYXJhbXMucGFnZV9sb2NhdGlvbixcbiAgICAgICAgcGFnZV9yZWZlcnJlcjogcGFnZVZpZXdQYXJhbXMucmVmZXJyZXIsXG4gICAgICAgIGNvb2tpZV9mbGFnczogJ3NlY3VyZSdcbiAgICB9KTtcblxuICAgIGNvbnN0IHVzZXJDb25zZW50ID0gZ2V0Q29uc2VudENvb2tpZSgpO1xuICAgIGlmICh1c2VyQ29uc2VudCAmJiBpc1ZhbGlkQ29uc2VudENvb2tpZSh1c2VyQ29uc2VudCkgJiYgdXNlckNvbnNlbnQuYW5hbHl0aWNzKSB7XG4gICAgICAgIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KHRydWUpO1xuICAgIH1cblxuICAgIHNlbmRQYWdlVmlld0V2ZW50KCk7XG4gICAgc2VuZEZpbHRlclBhZ2VDdXN0b21FdmVudCgpO1xufVxuXG5mdW5jdGlvbiBzZXREZWZhdWx0Q29uc2VudCgpIHtcbiAgICBndGFnKCdjb25zZW50JywgJ2RlZmF1bHQnLCB7XG4gICAgICAgICdhbmFseXRpY3Nfc3RvcmFnZSc6ICdkZW5pZWQnXG4gICAgfSk7XG5cbiAgICBndGFnKCdzZXQnLCAndXJsX3Bhc3N0aHJvdWdoJywgdHJ1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudChncmFudGVkOiBib29sZWFuLCBkZWxheU1zPzogbnVtYmVyKSB7XG5cbiAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgICAgJ2FuYWx5dGljc19zdG9yYWdlJzogZ3JhbnRlZCA/ICdncmFudGVkJyA6ICdkZW5pZWQnXG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgZGVsYXlNcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgb3B0aW9uc1snd2FpdF9mb3JfdXBkYXRlJ10gPSBkZWxheU1zO1xuICAgIH1cblxuICAgIGd0YWcoJ2NvbnNlbnQnLCAndXBkYXRlJywgb3B0aW9ucyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZW5kUGFnZVZpZXdFdmVudCgpIHtcbiAgICAvLyBzZW5kIHRoZSBwYWdlX3ZpZXcgZXZlbnQgbWFudWFsbHkgKGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9ndGFnanMvcGFnZXMjZGVmYXVsdF9iZWhhdmlvcilcbiAgICBndGFnKCdldmVudCcsICdwYWdlX3ZpZXcnLCBnZXRQaWlTYWZlUGFnZVZpZXcoR2FNZWFzdXJlbWVudElkKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZW5kRmlsdGVyUGFnZUN1c3RvbUV2ZW50KCkge1xuICAgIC8vdG9kbzogbWFrZSBmaWx0ZXIgcGFnZSBvbmx5XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRzJyk7XG4gICAgY29uc3QgdG90YWxSZXN1bHRzID0gZWxlbWVudD8uZ2V0QXR0cmlidXRlKCdkYXRhLXRvdGFsLXJlc3VsdHMnKTtcbiAgICBpZiAodG90YWxSZXN1bHRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybjtcblxuICAgIGd0YWcoJ2V2ZW50JywgJ2ZpbHRlcl9wYWdlJywge1xuICAgICAgICAndG90YWxfcmVzdWx0cyc6IHRvdGFsUmVzdWx0c1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VuZEFuYWx5dGljc0N1c3RvbUV2ZW50KGFjY2VwdGVkOiBib29sZWFuLCBzb3VyY2U6IHN0cmluZykge1xuXG4gICAgZ3RhZygnZXZlbnQnLCAnYW5hbHl0aWNzJywge1xuICAgICAgICAnYWNjZXB0ZWQnOiBhY2NlcHRlZCxcbiAgICAgICAgJ3NvdXJjZSc6IHNvdXJjZVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBsb2FkR2FTY3JpcHQoZ2FNZWFzdXJlbWVudElkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBmID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICAgIGNvbnN0IGogPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICBqLmFzeW5jID0gdHJ1ZTtcbiAgICBqLnNyYyA9ICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzP2lkPScgKyBnYU1lYXN1cmVtZW50SWQ7XG4gICAgZi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqLCBmKTtcbn1cblxuZnVuY3Rpb24gZ2V0UGlpU2FmZVBhZ2VWaWV3KGdhTWVhc3VyZW1lbnRJZDogc3RyaW5nKSB7XG5cbiAgICBjb25zdCBwYWdlVmlldyA9IHtcbiAgICAgICAgcGFnZV90aXRsZTogZG9jdW1lbnQudGl0bGUsXG4gICAgICAgIHNlbmRfdG86IGdhTWVhc3VyZW1lbnRJZCxcbiAgICAgICAgcmVmZXJyZXI6ICcnLFxuICAgICAgICBwYWdlX2xvY2F0aW9uOiAnJyxcbiAgICAgICAgcGFnZV9wYXRoOiAnJ1xuICAgIH07XG5cbiAgICAvL3RvZG86IHNldCBhcyByZWZlcnJlciBvciBwYWdlX3JlZmVycmVyIGluIHBhZ2VWaWV3IC0gZG9lcyBpdCBtYXR0ZXI/IGlzIGl0IG9ubHkgcGlja2luZyBpdCB1cCBmcm9tIHRoZSBjb25maWc/XG4gICAgLy90b2RvOiBnZXQgcGlpc2FmZSByZWZlcnJlciBmdW5jdGlvblxuICAgIGlmIChkb2N1bWVudC5yZWZlcnJlciAhPT0gJycpIHtcbiAgICAgICAgY29uc3QgcmVmZXJyZXJVcmwgPSBuZXcgVVJMKGRvY3VtZW50LnJlZmVycmVyKTtcbiAgICAgICAgY29uc3QgcGlpU2FmZVJlZmVycmVyUXVlcnlTdHJpbmcgPSBnZXRQaWlTYWZlUXVlcnlTdHJpbmcocmVmZXJyZXJVcmwuc2VhcmNoKTtcbiAgICAgICAgaWYgKHBpaVNhZmVSZWZlcnJlclF1ZXJ5U3RyaW5nID09IG51bGwpIHtcbiAgICAgICAgICAgIHBhZ2VWaWV3LnJlZmVycmVyID0gZG9jdW1lbnQucmVmZXJyZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1cmxBcnJheSA9IGRvY3VtZW50LnJlZmVycmVyLnNwbGl0KCc/Jyk7XG5cbiAgICAgICAgICAgIHBhZ2VWaWV3LnJlZmVycmVyID0gdXJsQXJyYXlbMF0gKyBwaWlTYWZlUmVmZXJyZXJRdWVyeVN0cmluZztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBpaVNhZmVRdWVyeVN0cmluZyA9IGdldFBpaVNhZmVRdWVyeVN0cmluZyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcblxuICAgIGlmIChwaWlTYWZlUXVlcnlTdHJpbmcgPT0gbnVsbCkge1xuICAgICAgICBwYWdlVmlldy5wYWdlX2xvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgICAgIHBhZ2VWaWV3LnBhZ2VfcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG5cbiAgICAgICAgcmV0dXJuIHBhZ2VWaWV3O1xuICAgIH1cblxuICAgIGNvbnN0IHVybEFycmF5ID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJz8nKTtcblxuICAgIHBhZ2VWaWV3LnBhZ2VfbG9jYXRpb24gPSB1cmxBcnJheVswXSArIHBpaVNhZmVRdWVyeVN0cmluZztcbiAgICBwYWdlVmlldy5wYWdlX3BhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyBwaWlTYWZlUXVlcnlTdHJpbmc7XG5cbiAgICByZXR1cm4gcGFnZVZpZXc7XG59XG5cbmZ1bmN0aW9uIGdldFBpaVNhZmVRdWVyeVN0cmluZyhxdWVyeVN0cmluZzogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG5cbiAgICAvL3RvZG86IGZvciBzYWZldHksIGNvbnZlcnQgdG8gbG93ZXJjYXNlLCBzbyB0aGF0IGlmIHRoZSB1c2VyIGNoYW5nZXMgdGhlIGNhc2Ugb2YgdGhlIHVybCwgd2Ugc3RpbGwgZG9uJ3QgY29sbGVjdCBwaWlcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlTdHJpbmcpO1xuXG4gICAgbGV0IHBvc3Rjb2RlID0gcXVlcnlQYXJhbXMuZ2V0KCdwb3N0Y29kZScpO1xuICAgIGlmIChwb3N0Y29kZSA9PSBudWxsKSB7XG4gICAgICAgIC8vIG51bGwgaW5kaWNhdGVzIG9yaWdpbmFsIHF1ZXJ5IHBhcmFtcyB3ZXJlIGFscmVhZHkgcGlpIHNhZmVcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcG9zdGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xuICAgIHF1ZXJ5UGFyYW1zLnNldCgncG9zdGNvZGUnLCBwb3N0Y29kZSk7XG4gICAgcXVlcnlQYXJhbXMuZGVsZXRlKCdsYXRpdHVkZScpO1xuICAgIHF1ZXJ5UGFyYW1zLmRlbGV0ZSgnbG9uZ2l0dWRlJyk7XG5cbiAgICByZXR1cm4gJz8nICsgcXVlcnlQYXJhbXMudG9TdHJpbmcoKTtcbn1cbiJdfQ==\n","import * as CookieFunctions from './cookie-functions.js';\n/*todo: we don't meed a pollyfill for bind, as long as we server up the non js version of the site for ie8 (https://caniuse.com/?search=bind) */\n/*import 'govuk-frontend/govuk/vendor/polyfills/Function/prototype/bind'*/\n/*todo: i think we're ok for this too (see above about ie8), but we _might_ need it for >8 ie (use? https://www.npmjs.com/package/events-polyfill)*/\n/*import 'govuk-frontend/govuk/vendor/polyfills/Event'*/\nimport { nodeListForEach } from './helpers';\nimport { sendPageViewEvent, sendFilterPageCustomEvent, sendAnalyticsCustomEvent, updateAnalyticsStorageConsent } from './analytics';\nconst cookieBannerAcceptSelector = '.js-cookie-banner-accept';\nconst cookieBannerRejectSelector = '.js-cookie-banner-reject';\nconst cookieBannerHideButtonSelector = '.js-cookie-banner-hide';\nconst cookieMessageSelector = '.js-cookie-banner-message';\nconst cookieConfirmationAcceptSelector = '.js-cookie-banner-confirmation-accept';\nconst cookieConfirmationRejectSelector = '.js-cookie-banner-confirmation-reject';\nexport default function CookieBanner($module) {\n    this.$module = $module;\n}\nCookieBanner.prototype.init = function () {\n    this.$cookieBanner = this.$module;\n    this.$acceptButton = this.$module.querySelector(cookieBannerAcceptSelector);\n    this.$rejectButton = this.$module.querySelector(cookieBannerRejectSelector);\n    this.$cookieMessage = this.$module.querySelector(cookieMessageSelector);\n    this.$cookieConfirmationAccept = this.$module.querySelector(cookieConfirmationAcceptSelector);\n    this.$cookieConfirmationReject = this.$module.querySelector(cookieConfirmationRejectSelector);\n    this.$cookieBannerHideButtons = this.$module.querySelectorAll(cookieBannerHideButtonSelector);\n    // Exit if no cookie banner module\n    // or if we're on the cookies page to avoid circular journeys\n    if (!this.$cookieBanner || this.onCookiesPage()) {\n        return;\n    }\n    // Show the cookie banner to users who have not consented or have an\n    // outdated consent cookie\n    var currentConsentCookie = CookieFunctions.getConsentCookie();\n    if (!currentConsentCookie || !CookieFunctions.isValidConsentCookie(currentConsentCookie)) {\n        // If the consent cookie version is not valid, we need to remove any cookies which have been\n        // set previously\n        CookieFunctions.resetCookies();\n        this.$cookieBanner.removeAttribute('hidden');\n    }\n    this.$acceptButton.addEventListener('click', this.acceptCookies.bind(this));\n    this.$rejectButton.addEventListener('click', this.rejectCookies.bind(this));\n    nodeListForEach(this.$cookieBannerHideButtons, function ($cookieBannerHideButton) {\n        $cookieBannerHideButton.addEventListener('click', this.hideBanner.bind(this));\n    }.bind(this));\n};\nCookieBanner.prototype.hideBanner = function () {\n    this.$cookieBanner.setAttribute('hidden', true);\n};\nCookieBanner.prototype.acceptCookies = function () {\n    // Do actual cookie consent bit\n    CookieFunctions.setConsentCookie({ analytics: true });\n    updateAnalyticsStorageConsent(true);\n    sendAnalyticsCustomEvent(true, 'banner');\n    sendPageViewEvent();\n    sendFilterPageCustomEvent();\n    // Hide banner and show confirmation message\n    this.$cookieMessage.setAttribute('hidden', true);\n    this.revealConfirmationMessage(this.$cookieConfirmationAccept);\n};\nCookieBanner.prototype.rejectCookies = function () {\n    updateAnalyticsStorageConsent(true);\n    sendAnalyticsCustomEvent(false, 'banner');\n    updateAnalyticsStorageConsent(false);\n    //setTimeout(CookieFunctions.setConsentCookie.bind({ analytics: false }), 250);\n    CookieFunctions.setConsentCookie({ analytics: false });\n    // Hide banner and show confirmation message\n    this.$cookieMessage.setAttribute('hidden', true);\n    this.revealConfirmationMessage(this.$cookieConfirmationReject);\n};\nCookieBanner.prototype.revealConfirmationMessage = function (confirmationMessage) {\n    confirmationMessage.removeAttribute('hidden');\n    // Set tabindex to -1 to make the confirmation banner focusable with JavaScript\n    if (!confirmationMessage.getAttribute('tabindex')) {\n        confirmationMessage.setAttribute('tabindex', '-1');\n        confirmationMessage.addEventListener('blur', function () {\n            confirmationMessage.removeAttribute('tabindex');\n        });\n    }\n    confirmationMessage.focus();\n};\nCookieBanner.prototype.onCookiesPage = function () {\n    return window.location.pathname === '/cookies/';\n};\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llLWJhbm5lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssZUFBZSxNQUFNLHVCQUF1QixDQUFBO0FBQ3hELGdKQUFnSjtBQUNoSiwwRUFBMEU7QUFDMUUsb0pBQW9KO0FBQ3BKLHdEQUF3RDtBQUN4RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBQzNDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSx5QkFBeUIsRUFBRSx3QkFBd0IsRUFBRSw2QkFBNkIsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUVwSSxNQUFNLDBCQUEwQixHQUFHLDBCQUEwQixDQUFBO0FBQzdELE1BQU0sMEJBQTBCLEdBQUcsMEJBQTBCLENBQUE7QUFDN0QsTUFBTSw4QkFBOEIsR0FBRyx3QkFBd0IsQ0FBQTtBQUMvRCxNQUFNLHFCQUFxQixHQUFHLDJCQUEyQixDQUFBO0FBQ3pELE1BQU0sZ0NBQWdDLEdBQUcsdUNBQXVDLENBQUE7QUFDaEYsTUFBTSxnQ0FBZ0MsR0FBRyx1Q0FBdUMsQ0FBQTtBQUVoRixNQUFNLENBQUMsT0FBTyxVQUFVLFlBQVksQ0FBQyxPQUFvQjtJQUNyRCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUMzQixDQUFDO0FBRUQsWUFBWSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUc7SUFDMUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFBO0lBQ2pDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsMEJBQTBCLENBQUMsQ0FBQTtJQUMzRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLDBCQUEwQixDQUFDLENBQUE7SUFDM0UsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0lBQ3ZFLElBQUksQ0FB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LENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUE7QUFDbEUsQ0FBQyxDQUFBO0FBRUQsWUFBWSxDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsR0FBRyxVQUFVLG1CQUFtQjtJQUM1RSxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUE7SUFFN0MsK0VBQStFO0lBQy9FLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQztRQUNoRCxtQkFBbUIsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBRWxELG1CQUFtQixDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRTtZQUN6QyxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDbkQsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBRUQsbUJBQW1CLENBQUMsS0FBSyxFQUFFLENBQUE7QUFDL0IsQ0FBQyxDQUFBO0FBRUQsWUFBWSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEdBQUc7SUFDbkMsT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsS0FBSyxXQUFXLENBQUE7QUFDbkQsQ0FBQyxDQUFBIiwiZmlsZSI6ImNvbXBvbmVudHMvY29va2llLWJhbm5lci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIENvb2tpZUZ1bmN0aW9ucyBmcm9tICcuL2Nvb2tpZS1mdW5jdGlvbnMuanMnXG4vKnRvZG86IHdlIGRvbid0IG1lZWQgYSBwb2xseWZpbGwgZm9yIGJpbmQsIGFzIGxvbmcgYXMgd2Ugc2VydmVyIHVwIHRoZSBub24ganMgdmVyc2lvbiBvZiB0aGUgc2l0ZSBmb3IgaWU4IChodHRwczovL2Nhbml1c2UuY29tLz9zZWFyY2g9YmluZCkgKi9cbi8qaW1wb3J0ICdnb3Z1ay1mcm9udGVuZC9nb3Z1ay92ZW5kb3IvcG9seWZpbGxzL0Z1bmN0aW9uL3Byb3RvdHlwZS9iaW5kJyovXG4vKnRvZG86IGkgdGhpbmsgd2UncmUgb2sgZm9yIHRoaXMgdG9vIChzZWUgYWJvdmUgYWJvdXQgaWU4KSwgYnV0IHdlIF9taWdodF8gbmVlZCBpdCBmb3IgPjggaWUgKHVzZT8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZXZlbnRzLXBvbHlmaWxsKSovXG4vKmltcG9ydCAnZ292dWstZnJvbnRlbmQvZ292dWsvdmVuZG9yL3BvbHlmaWxscy9FdmVudCcqL1xuaW1wb3J0IHsgbm9kZUxpc3RGb3JFYWNoIH0gZnJvbSAnLi9oZWxwZXJzJ1xuaW1wb3J0IHsgc2VuZFBhZ2VWaWV3RXZlbnQsIHNlbmRGaWx0ZXJQYWdlQ3VzdG9tRXZlbnQsIHNlbmRBbmFseXRpY3NDdXN0b21FdmVudCwgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQgfSBmcm9tICcuL2FuYWx5dGljcyc7XG5cbmNvbnN0IGNvb2tpZUJhbm5lckFjY2VwdFNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLWFjY2VwdCdcbmNvbnN0IGNvb2tpZUJhbm5lclJlamVjdFNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLXJlamVjdCdcbmNvbnN0IGNvb2tpZUJhbm5lckhpZGVCdXR0b25TZWxlY3RvciA9ICcuanMtY29va2llLWJhbm5lci1oaWRlJ1xuY29uc3QgY29va2llTWVzc2FnZVNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLW1lc3NhZ2UnXG5jb25zdCBjb29raWVDb25maXJtYXRpb25BY2NlcHRTZWxlY3RvciA9ICcuanMtY29va2llLWJhbm5lci1jb25maXJtYXRpb24tYWNjZXB0J1xuY29uc3QgY29va2llQ29uZmlybWF0aW9uUmVqZWN0U2VsZWN0b3IgPSAnLmpzLWNvb2tpZS1iYW5uZXItY29uZmlybWF0aW9uLXJlamVjdCdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ29va2llQmFubmVyKCRtb2R1bGU6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy4kbW9kdWxlID0gJG1vZHVsZTtcbn1cblxuQ29va2llQmFubmVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJGNvb2tpZUJhbm5lciA9IHRoaXMuJG1vZHVsZVxuICAgIHRoaXMuJGFjY2VwdEJ1dHRvbiA9IHRoaXMuJG1vZHVsZS5xdWVyeVNlbGVjdG9yKGNvb2tpZUJhbm5lckFjY2VwdFNlbGVjdG9yKVxuICAgIHRoaXMuJHJlamVjdEJ1dHRvbiA9IHRoaXMuJG1vZHVsZS5xdWVyeVNlbGVjdG9yKGNvb2tpZUJhbm5lclJlamVjdFNlbGVjdG9yKVxuICAgIHRoaXMuJGNvb2tpZU1lc3NhZ2UgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3Rvcihjb29raWVNZXNzYWdlU2VsZWN0b3IpXG4gICAgdGhpcy4kY29va2llQ29uZmlybWF0aW9uQWNjZXB0ID0gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoY29va2llQ29uZmlybWF0aW9uQWNjZXB0U2VsZWN0b3IpXG4gICAgdGhpcy4kY29va2llQ29uZmlybWF0aW9uUmVqZWN0ID0gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoY29va2llQ29uZmlybWF0aW9uUmVqZWN0U2VsZWN0b3IpXG4gICAgdGhpcy4kY29va2llQmFubmVySGlkZUJ1dHRvbnMgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3RvckFsbChjb29raWVCYW5uZXJIaWRlQnV0dG9uU2VsZWN0b3IpXG5cbiAgICAvLyBFeGl0IGlmIG5vIGNvb2tpZSBiYW5uZXIgbW9kdWxlXG4gICAgLy8gb3IgaWYgd2UncmUgb24gdGhlIGNvb2tpZXMgcGFnZSB0byBhdm9pZCBjaXJjdWxhciBqb3VybmV5c1xuICAgIGlmICghdGhpcy4kY29va2llQmFubmVyIHx8IHRoaXMub25Db29raWVzUGFnZSgpKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFNob3cgdGhlIGNvb2tpZSBiYW5uZXIgdG8gdXNlcnMgd2hvIGhhdmUgbm90IGNvbnNlbnRlZCBvciBoYXZlIGFuXG4gICAgLy8gb3V0ZGF0ZWQgY29uc2VudCBjb29raWVcbiAgICB2YXIgY3VycmVudENvbnNlbnRDb29raWUgPSBDb29raWVGdW5jdGlvbnMuZ2V0Q29uc2VudENvb2tpZSgpXG5cbiAgICBpZiAoIWN1cnJlbnRDb25zZW50Q29va2llIHx8ICFDb29raWVGdW5jdGlvbnMuaXNWYWxpZENvbnNlbnRDb29raWUoY3VycmVudENvbnNlbnRDb29raWUpKSB7XG4gICAgICAgIC8vIElmIHRoZSBjb25zZW50IGNvb2tpZSB2ZXJzaW9uIGlzIG5vdCB2YWxpZCwgd2UgbmVlZCB0byByZW1vdmUgYW55IGNvb2tpZXMgd2hpY2ggaGF2ZSBiZWVuXG4gICAgICAgIC8vIHNldCBwcmV2aW91c2x5XG4gICAgICAgIENvb2tpZUZ1bmN0aW9ucy5yZXNldENvb2tpZXMoKVxuXG4gICAgICAgIHRoaXMuJGNvb2tpZUJhbm5lci5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpXG4gICAgfVxuXG4gICAgdGhpcy4kYWNjZXB0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5hY2NlcHRDb29raWVzLmJpbmQodGhpcykpXG4gICAgdGhpcy4kcmVqZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5yZWplY3RDb29raWVzLmJpbmQodGhpcykpXG5cbiAgICBub2RlTGlzdEZvckVhY2godGhpcy4kY29va2llQmFubmVySGlkZUJ1dHRvbnMsIGZ1bmN0aW9uICgkY29va2llQmFubmVySGlkZUJ1dHRvbikge1xuICAgICAgICAkY29va2llQmFubmVySGlkZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGlkZUJhbm5lci5iaW5kKHRoaXMpKVxuICAgIH0uYmluZCh0aGlzKSlcbn1cblxuQ29va2llQmFubmVyLnByb3RvdHlwZS5oaWRlQmFubmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJGNvb2tpZUJhbm5lci5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsIHRydWUpXG59XG5cbkNvb2tpZUJhbm5lci5wcm90b3R5cGUuYWNjZXB0Q29va2llcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBEbyBhY3R1YWwgY29va2llIGNvbnNlbnQgYml0XG4gICAgQ29va2llRnVuY3Rpb25zLnNldENvbnNlbnRDb29raWUoeyBhbmFseXRpY3M6IHRydWUgfSk7XG5cbiAgICB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudCh0cnVlKTtcblxuICAgIHNlbmRBbmFseXRpY3NDdXN0b21FdmVudCh0cnVlLCAnYmFubmVyJyk7XG4gICAgc2VuZFBhZ2VWaWV3RXZlbnQoKTtcbiAgICBzZW5kRmlsdGVyUGFnZUN1c3RvbUV2ZW50KCk7XG5cbiAgICAvLyBIaWRlIGJhbm5lciBhbmQgc2hvdyBjb25maXJtYXRpb24gbWVzc2FnZVxuICAgIHRoaXMuJGNvb2tpZU1lc3NhZ2Uuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCB0cnVlKVxuICAgIHRoaXMucmV2ZWFsQ29uZmlybWF0aW9uTWVzc2FnZSh0aGlzLiRjb29raWVDb25maXJtYXRpb25BY2NlcHQpXG59XG5cbkNvb2tpZUJhbm5lci5wcm90b3R5cGUucmVqZWN0Q29va2llcyA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KHRydWUpO1xuXG4gICAgc2VuZEFuYWx5dGljc0N1c3RvbUV2ZW50KGZhbHNlLCAnYmFubmVyJyk7XG5cbiAgICB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudChmYWxzZSk7XG5cbiAgICAvL3NldFRpbWVvdXQoQ29va2llRnVuY3Rpb25zLnNldENvbnNlbnRDb29raWUuYmluZCh7IGFuYWx5dGljczogZmFsc2UgfSksIDI1MCk7XG4gICAgQ29va2llRnVuY3Rpb25zLnNldENvbnNlbnRDb29raWUoeyBhbmFseXRpY3M6IGZhbHNlIH0pO1xuXG4gICAgLy8gSGlkZSBiYW5uZXIgYW5kIHNob3cgY29uZmlybWF0aW9uIG1lc3NhZ2VcbiAgICB0aGlzLiRjb29raWVNZXNzYWdlLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgdHJ1ZSlcbiAgICB0aGlzLnJldmVhbENvbmZpcm1hdGlvbk1lc3NhZ2UodGhpcy4kY29va2llQ29uZmlybWF0aW9uUmVqZWN0KVxufVxuXG5Db29raWVCYW5uZXIucHJvdG90eXBlLnJldmVhbENvbmZpcm1hdGlvbk1lc3NhZ2UgPSBmdW5jdGlvbiAoY29uZmlybWF0aW9uTWVzc2FnZSkge1xuICAgIGNvbmZpcm1hdGlvbk1lc3NhZ2UucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKVxuXG4gICAgLy8gU2V0IHRhYmluZGV4IHRvIC0xIHRvIG1ha2UgdGhlIGNvbmZpcm1hdGlvbiBiYW5uZXIgZm9jdXNhYmxlIHdpdGggSmF2YVNjcmlwdFxuICAgIGlmICghY29uZmlybWF0aW9uTWVzc2FnZS5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykpIHtcbiAgICAgICAgY29uZmlybWF0aW9uTWVzc2FnZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJylcblxuICAgICAgICBjb25maXJtYXRpb25NZXNzYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25maXJtYXRpb25NZXNzYWdlLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbmZpcm1hdGlvbk1lc3NhZ2UuZm9jdXMoKVxufVxuXG5Db29raWVCYW5uZXIucHJvdG90eXBlLm9uQ29va2llc1BhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy9jb29raWVzLydcbn1cbiJdfQ==\n","import { getConsentCookie, setConsentCookie } from './cookie-functions';\nimport { nodeListForEach } from './helpers';\nimport { sendPageViewEvent, sendAnalyticsCustomEvent, updateAnalyticsStorageConsent } from './analytics';\nfunction CookiesPage($module) {\n    this.$module = $module;\n}\nCookiesPage.prototype.init = function () {\n    this.$cookiePage = this.$module;\n    if (!this.$cookiePage) {\n        return;\n    }\n    this.$cookieForm = this.$cookiePage.querySelector('.js-cookies-page-form');\n    this.$cookieFormFieldsets = this.$cookieForm.querySelectorAll('.js-cookies-page-form-fieldset');\n    this.$successNotification = this.$cookiePage.querySelector('.js-cookies-page-success');\n    this.$successLink = this.$cookiePage.querySelector('.js-cookies-page-success-link');\n    nodeListForEach(this.$cookieFormFieldsets, function ($cookieFormFieldset) {\n        this.showUserPreference($cookieFormFieldset, getConsentCookie());\n        /*        $cookieFormFieldset.removeAttribute('hidden')*/\n    }.bind(this));\n    // Show submit button\n    //this.$cookieForm.querySelector('.js-cookies-form-button').removeAttribute('hidden')\n    this.$cookieForm.addEventListener('submit', this.savePreferences.bind(this));\n};\nCookiesPage.prototype.savePreferences = function (event) {\n    // Stop default form submission behaviour\n    event.preventDefault();\n    var preferences = {};\n    nodeListForEach(this.$cookieFormFieldsets, function ($cookieFormFieldset) {\n        var cookieType = this.getCookieType($cookieFormFieldset);\n        var selectedItem = $cookieFormFieldset.querySelector('input[name=' + cookieType + ']:checked').value;\n        preferences[cookieType] = selectedItem === 'true';\n    }.bind(this));\n    updateAnalyticsStorageConsent(true);\n    const analyticsAccepted = preferences['analytics'];\n    sendAnalyticsCustomEvent(analyticsAccepted, 'cookies');\n    if (analyticsAccepted) {\n        sendPageViewEvent();\n    }\n    else {\n        updateAnalyticsStorageConsent(false);\n    }\n    setConsentCookie(preferences);\n    // handle the corner case, where the user has selected their preference on the cookie page, whilst the banner is still open as they haven't previously selected their preference\n    //todo: call hideBanner\n    var banner = document.querySelector('[data-module=\"govuk-cookie-banner\"]');\n    banner.setAttribute('hidden', 'true');\n    this.showSuccessNotification();\n};\nCookiesPage.prototype.showUserPreference = function ($cookieFormFieldset, preferences) {\n    var cookieType = this.getCookieType($cookieFormFieldset);\n    var preference = false;\n    if (cookieType && preferences && preferences[cookieType] !== undefined) {\n        preference = preferences[cookieType];\n    }\n    var radioValue = preference ? 'true' : 'false';\n    var radio = $cookieFormFieldset.querySelector('input[name=' + cookieType + '][value=' + radioValue + ']');\n    radio.checked = true;\n};\nCookiesPage.prototype.showSuccessNotification = function () {\n    this.$successNotification.removeAttribute('hidden');\n    // if the user's come to the cookies page through the link in the cookie banner, show a link to take them back to the page they came from\n    //todo: use full url?\n    var referrer = document.referrer ? new URL(document.referrer).pathname : false;\n    if (referrer && referrer !== document.location.pathname) {\n        this.$successLink.href = referrer;\n        this.$successLink.removeAttribute('hidden');\n    }\n    else {\n        this.$successLink.setAttribute('hidden', 'true');\n    }\n    // Set tabindex to -1 to make the element focusable with JavaScript.\n    // GOV.UK Frontend will remove the tabindex on blur as the component doesn't\n    // need to be focusable after the user has read the text.\n    if (!this.$successNotification.getAttribute('tabindex')) {\n        this.$successNotification.setAttribute('tabindex', '-1');\n    }\n    this.$successNotification.focus();\n    // scroll to the top of the page\n    window.scrollTo(0, 0);\n};\nCookiesPage.prototype.getCookieType = function ($cookieFormFieldset) {\n    return $cookieFormFieldset.id;\n};\nexport default CookiesPage;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llcy1wYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBaUIsTUFBTSxvQkFBb0IsQ0FBQTtBQUN0RixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBQzNDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSx3QkFBd0IsRUFBRSw2QkFBNkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV4RyxTQUFTLFdBQVcsQ0FBQyxPQUFPO0lBQ3hCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO0FBQzFCLENBQUM7QUFFRCxXQUFXLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRztJQUN6QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7SUFFL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNwQixPQUFNO0lBQ1YsQ0FBQztJQUVELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsdUJBQXVCLENBQUMsQ0FBQTtJQUMxRSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFBO0lBQy9GLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQywwQkFBMEIsQ0FBQyxDQUFBO0lBQ3RGLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsK0JBQStCLENBQUMsQ0FBQTtJQUVuRixlQUFlLENBQUMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLFVBQVUsbUJBQW1CO1FBQ3BFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxtQkFBbUIsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLENBQUE7UUFDeEUseURBQXlEO0lBQ3JELENBQUMsQ0FBQyxJQUFJ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LENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3RELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQztRQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUMvQyxDQUFDO1NBQU0sQ0FBQztRQUNKLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRUQsb0VBQW9FO0lBQ3BFLDRFQUE0RTtJQUM1RSx5REFBeUQ7SUFDekQsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQztRQUN0RCxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUM1RCxDQUFDO0lBRUQsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxDQUFBO0lBRWpDLGdDQUFnQztJQUNoQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtBQUN6QixDQUFDLENBQUE7QUFFRCxXQUFXLENBQUMsU0FBUyxDQUFDLGFBQWEsR0FBRyxVQUFVLG1CQUFtQjtJQUMvRCxPQUFPLG1CQUFtQixDQUFDLEVBQUUsQ0FBQTtBQUNqQyxDQUFDLENBQUE7QUFFRCxlQUFlLFdBQVcsQ0FBQSIsImZpbGUiOiJjb21wb25lbnRzL2Nvb2tpZXMtcGFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENvbnNlbnRDb29raWUsIHNldENvbnNlbnRDb29raWUsIENvbnNlbnRDb29raWUgfSBmcm9tICcuL2Nvb2tpZS1mdW5jdGlvbnMnXG5pbXBvcnQgeyBub2RlTGlzdEZvckVhY2ggfSBmcm9tICcuL2hlbHBlcnMnXG5pbXBvcnQgeyBzZW5kUGFnZVZpZXdFdmVudCwgc2VuZEFuYWx5dGljc0N1c3RvbUV2ZW50LCB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudCB9IGZyb20gJy4vYW5hbHl0aWNzJ1xuXG5mdW5jdGlvbiBDb29raWVzUGFnZSgkbW9kdWxlKSB7XG4gICAgdGhpcy4kbW9kdWxlID0gJG1vZHVsZVxufVxuXG5Db29raWVzUGFnZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRjb29raWVQYWdlID0gdGhpcy4kbW9kdWxlXG5cbiAgICBpZiAoIXRoaXMuJGNvb2tpZVBhZ2UpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy4kY29va2llRm9ybSA9IHRoaXMuJGNvb2tpZVBhZ2UucXVlcnlTZWxlY3RvcignLmpzLWNvb2tpZXMtcGFnZS1mb3JtJylcbiAgICB0aGlzLiRjb29raWVGb3JtRmllbGRzZXRzID0gdGhpcy4kY29va2llRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuanMtY29va2llcy1wYWdlLWZvcm0tZmllbGRzZXQnKVxuICAgIHRoaXMuJHN1Y2Nlc3NOb3RpZmljYXRpb24gPSB0aGlzLiRjb29raWVQYWdlLnF1ZXJ5U2VsZWN0b3IoJy5qcy1jb29raWVzLXBhZ2Utc3VjY2VzcycpXG4gICAgdGhpcy4kc3VjY2Vzc0xpbmsgPSB0aGlzLiRjb29raWVQYWdlLnF1ZXJ5U2VsZWN0b3IoJy5qcy1jb29raWVzLXBhZ2Utc3VjY2Vzcy1saW5rJylcblxuICAgIG5vZGVMaXN0Rm9yRWFjaCh0aGlzLiRjb29raWVGb3JtRmllbGRzZXRzLCBmdW5jdGlvbiAoJGNvb2tpZUZvcm1GaWVsZHNldCkge1xuICAgICAgICB0aGlzLnNob3dVc2VyUHJlZmVyZW5jZSgkY29va2llRm9ybUZpZWxkc2V0LCBnZXRDb25zZW50Q29va2llKCkpXG4vKiAgICAgICAgJGNvb2tpZUZvcm1GaWVsZHNldC5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpKi9cbiAgICB9LmJpbmQodGhpcykpXG5cbiAgICAvLyBTaG93IHN1Ym1pdCBidXR0b25cbiAgICAvL3RoaXMuJGNvb2tpZUZvcm0ucXVlcnlTZWxlY3RvcignLmpzLWNvb2tpZXMtZm9ybS1idXR0b24nKS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpXG5cbiAgICB0aGlzLiRjb29raWVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc2F2ZVByZWZlcmVuY2VzLmJpbmQodGhpcykpXG59XG5cbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5zYXZlUHJlZmVyZW5jZXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBTdG9wIGRlZmF1bHQgZm9ybSBzdWJtaXNzaW9uIGJlaGF2aW91clxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgcHJlZmVyZW5jZXM6IENvbnNlbnRDb29raWUgPSB7fVxuXG4gICAgbm9kZUxpc3RGb3JFYWNoKHRoaXMuJGNvb2tpZUZvcm1GaWVsZHNldHMsXG4gICAgICAgIGZ1bmN0aW9uKCRjb29raWVGb3JtRmllbGRzZXQpIHtcbiAgICAgICAgICAgIHZhciBjb29raWVUeXBlID0gdGhpcy5nZXRDb29raWVUeXBlKCRjb29raWVGb3JtRmllbGRzZXQpXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRJdGVtID0gJGNvb2tpZUZvcm1GaWVsZHNldC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPScgKyBjb29raWVUeXBlICsgJ106Y2hlY2tlZCcpLnZhbHVlXG5cbiAgICAgICAgICAgIHByZWZlcmVuY2VzW2Nvb2tpZVR5cGVdID0gc2VsZWN0ZWRJdGVtID09PSAndHJ1ZSdcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KHRydWUpO1xuICAgIGNvbnN0IGFuYWx5dGljc0FjY2VwdGVkID0gcHJlZmVyZW5jZXNbJ2FuYWx5dGljcyddO1xuICAgIHNlbmRBbmFseXRpY3NDdXN0b21FdmVudChhbmFseXRpY3NBY2NlcHRlZCwgJ2Nvb2tpZXMnKTtcblxuICAgIGlmIChhbmFseXRpY3NBY2NlcHRlZCkge1xuICAgICAgICBzZW5kUGFnZVZpZXdFdmVudCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KGZhbHNlKTtcbiAgICB9XG5cbiAgICBzZXRDb25zZW50Q29va2llKHByZWZlcmVuY2VzKTtcblxuICAgIC8vIGhhbmRsZSB0aGUgY29ybmVyIGNhc2UsIHdoZXJlIHRoZSB1c2VyIGhhcyBzZWxlY3RlZCB0aGVpciBwcmVmZXJlbmNlIG9uIHRoZSBjb29raWUgcGFnZSwgd2hpbHN0IHRoZSBiYW5uZXIgaXMgc3RpbGwgb3BlbiBhcyB0aGV5IGhhdmVuJ3QgcHJldmlvdXNseSBzZWxlY3RlZCB0aGVpciBwcmVmZXJlbmNlXG4gICAgLy90b2RvOiBjYWxsIGhpZGVCYW5uZXJcbiAgICB2YXIgYmFubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kdWxlPVwiZ292dWstY29va2llLWJhbm5lclwiXScpO1xuICAgIGJhbm5lci5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICd0cnVlJyk7XG4gICAgXG4gICAgdGhpcy5zaG93U3VjY2Vzc05vdGlmaWNhdGlvbigpXG59XG5cbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5zaG93VXNlclByZWZlcmVuY2UgPSBmdW5jdGlvbiAoJGNvb2tpZUZvcm1GaWVsZHNldCwgcHJlZmVyZW5jZXMpIHtcbiAgICB2YXIgY29va2llVHlwZSA9IHRoaXMuZ2V0Q29va2llVHlwZSgkY29va2llRm9ybUZpZWxkc2V0KVxuICAgIHZhciBwcmVmZXJlbmNlID0gZmFsc2VcblxuICAgIGlmIChjb29raWVUeXBlICYmIHByZWZlcmVuY2VzICYmIHByZWZlcmVuY2VzW2Nvb2tpZVR5cGVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJlZmVyZW5jZSA9IHByZWZlcmVuY2VzW2Nvb2tpZVR5cGVdXG4gICAgfVxuXG4gICAgdmFyIHJhZGlvVmFsdWUgPSBwcmVmZXJlbmNlID8gJ3RydWUnIDogJ2ZhbHNlJ1xuICAgIHZhciByYWRpbyA9ICRjb29raWVGb3JtRmllbGRzZXQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0nICsgY29va2llVHlwZSArICddW3ZhbHVlPScgKyByYWRpb1ZhbHVlICsgJ10nKVxuICAgIHJhZGlvLmNoZWNrZWQgPSB0cnVlXG59XG5cbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5zaG93U3VjY2Vzc05vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRzdWNjZXNzTm90aWZpY2F0aW9uLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJylcblxuICAgIC8vIGlmIHRoZSB1c2VyJ3MgY29tZSB0byB0aGUgY29va2llcyBwYWdlIHRocm91Z2ggdGhlIGxpbmsgaW4gdGhlIGNvb2tpZSBiYW5uZXIsIHNob3cgYSBsaW5rIHRvIHRha2UgdGhlbSBiYWNrIHRvIHRoZSBwYWdlIHRoZXkgY2FtZSBmcm9tXG4gICAgLy90b2RvOiB1c2UgZnVsbCB1cmw/XG4gICAgdmFyIHJlZmVycmVyID0gZG9jdW1lbnQucmVmZXJyZXIgPyBuZXcgVVJMKGRvY3VtZW50LnJlZmVycmVyKS5wYXRobmFtZSA6IGZhbHNlO1xuICAgIGlmIChyZWZlcnJlciAmJiByZWZlcnJlciAhPT0gZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUpIHtcbiAgICAgICAgdGhpcy4kc3VjY2Vzc0xpbmsuaHJlZiA9IHJlZmVycmVyO1xuICAgICAgICB0aGlzLiRzdWNjZXNzTGluay5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kc3VjY2Vzc0xpbmsuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAndHJ1ZScpO1xuICAgIH1cblxuICAgIC8vIFNldCB0YWJpbmRleCB0byAtMSB0byBtYWtlIHRoZSBlbGVtZW50IGZvY3VzYWJsZSB3aXRoIEphdmFTY3JpcHQuXG4gICAgLy8gR09WLlVLIEZyb250ZW5kIHdpbGwgcmVtb3ZlIHRoZSB0YWJpbmRleCBvbiBibHVyIGFzIHRoZSBjb21wb25lbnQgZG9lc24ndFxuICAgIC8vIG5lZWQgdG8gYmUgZm9jdXNhYmxlIGFmdGVyIHRoZSB1c2VyIGhhcyByZWFkIHRoZSB0ZXh0LlxuICAgIGlmICghdGhpcy4kc3VjY2Vzc05vdGlmaWNhdGlvbi5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykpIHtcbiAgICAgICAgdGhpcy4kc3VjY2Vzc05vdGlmaWNhdGlvbi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJylcbiAgICB9XG5cbiAgICB0aGlzLiRzdWNjZXNzTm90aWZpY2F0aW9uLmZvY3VzKClcblxuICAgIC8vIHNjcm9sbCB0byB0aGUgdG9wIG9mIHRoZSBwYWdlXG4gICAgd2luZG93LnNjcm9sbFRvKDAsIDApXG59XG5cbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5nZXRDb29raWVUeXBlID0gZnVuY3Rpb24gKCRjb29raWVGb3JtRmllbGRzZXQpIHtcbiAgICByZXR1cm4gJGNvb2tpZUZvcm1GaWVsZHNldC5pZFxufVxuXG5leHBvcnQgZGVmYXVsdCBDb29raWVzUGFnZSJdfQ==\n","export default function initClarity(clarityId) {\n    // if the environment doesn't have a measurement id, don't load analytics\n    if (!Boolean(clarityId)) {\n        return;\n    }\n    window.clarity = window.clarity || function () {\n        (window.clarity.q = window.clarity.q || []).push(arguments);\n    };\n    loadClarityScript(clarityId);\n}\nfunction loadClarityScript(clarityId) {\n    const f = document.getElementsByTagName('script')[0];\n    const j = document.createElement('script');\n    j.async = true;\n    j.src = 'https://www.clarity.ms/tag/' + clarityId;\n    f.parentNode.insertBefore(j, f);\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY2xhcml0eS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQSxNQUFNLENBQUMsT0FBTyxVQUFVLFdBQVcsQ0FBQyxTQUFpQjtJQUNqRCx5RUFBeUU7SUFDekUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDO1FBQ3RCLE9BQU87SUFDWCxDQUFDO0lBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxJQUFJO1FBQy9CLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQy9ELENBQUMsQ0FBQTtJQUVELGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ2pDLENBQUM7QUFFRCxTQUFTLGlCQUFpQixDQUFDLFNBQVM7SUFDaEMsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDM0MsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7SUFDZixDQUFDLENBQUMsR0FBRyxHQUFHLDZCQUE2QixHQUFHLFNBQVMsQ0FBQztJQUNsRCxDQUFDLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDcEMsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL2NsYXJpdHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJkZWNsYXJlIGdsb2JhbCB7XG4gICAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgICAgIGNsYXJpdHk6IGFueTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXRDbGFyaXR5KGNsYXJpdHlJZDogc3RyaW5nKSB7XG4gICAgLy8gaWYgdGhlIGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSBhIG1lYXN1cmVtZW50IGlkLCBkb24ndCBsb2FkIGFuYWx5dGljc1xuICAgIGlmICghQm9vbGVhbihjbGFyaXR5SWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3aW5kb3cuY2xhcml0eSA9IHdpbmRvdy5jbGFyaXR5IHx8IGZ1bmN0aW9uKCkge1xuICAgICAgICAod2luZG93LmNsYXJpdHkucSA9IHdpbmRvdy5jbGFyaXR5LnEgfHwgW10pLnB1c2goYXJndW1lbnRzKVxuICAgIH1cblxuICAgIGxvYWRDbGFyaXR5U2NyaXB0KGNsYXJpdHlJZCk7XG59XG5cbmZ1bmN0aW9uIGxvYWRDbGFyaXR5U2NyaXB0KGNsYXJpdHlJZCkge1xuICAgIGNvbnN0IGYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XG4gICAgY29uc3QgaiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIGouYXN5bmMgPSB0cnVlO1xuICAgIGouc3JjID0gJ2h0dHBzOi8vd3d3LmNsYXJpdHkubXMvdGFnLycgKyBjbGFyaXR5SWQ7XG4gICAgZi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqLCBmKTtcbn1cbiJdfQ==\n","// A version of the MOJ's add-another component that plays nice with the accessible autocomplete component\n// and works with errored fields.\n// I did consider subclassing the MOJ's add-another component,\n// but it would have been so coupled that it would've probably broken on an update of the MOJ library.\n// So instead we forked it and made our own version.\n//todo: when accessible-autocomplete creates the input, it doesn't handle the aria-describedby correctly...\n// https://github.com/alphagov/accessible-autocomplete/issues/589\nwindow.FamilyHubsFrontend = window.FamilyHubsFrontend || {};\nexport function initializeAddAnother() {\n    //todo: support options with scope?\n    var $addAnothers = document.querySelectorAll('[data-module=\"fh-add-another\"]');\n    $addAnothers.forEach(function ($addAnother) {\n        new window.FamilyHubsFrontend.AddAnother($addAnother);\n    });\n}\nwindow.FamilyHubsFrontend.AddAnother = function (container) {\n    this.container = $(container);\n    this.index = 0;\n    if (this.container.data('fh-add-another-initialised')) {\n        return;\n    }\n    //todo: this is a bit hacky - find a better way to do this\n    var functionName = container.getAttribute('data-fh-add-another-callback');\n    this.callback = null;\n    document.addEventListener('DOMContentLoaded', function () {\n        if (typeof window[functionName] === 'function') {\n            this.callback = window[functionName];\n            this.callback(container);\n        }\n    }.bind(this));\n    this.container.data('fh-add-another-initialised', true);\n    this.container.on('click', '.fh-add-another__remove-button', $.proxy(this, 'onRemoveButtonClick'));\n    this.container.on('click', '.fh-add-another__add-button', $.proxy(this, 'onAddButtonClick'));\n    this.container.find('.fh-add-another__add-button, fh-add-another__remove-button').prop('type', 'submit');\n};\nwindow.FamilyHubsFrontend.AddAnother.prototype.onAddButtonClick = function (e) {\n    var item = this.getNewItem();\n    var firstItem = this.getItems().first();\n    if (!this.hasRemoveButton(firstItem)) {\n        this.createRemoveButton(firstItem);\n    }\n    this.getItems().last().after(item);\n    item.find('input, textarea, select').first().focus();\n    e.preventDefault();\n};\nwindow.FamilyHubsFrontend.AddAnother.prototype.hasRemoveButton = function (item) {\n    return item.find('.fh-add-another__remove-button').length;\n};\nwindow.FamilyHubsFrontend.AddAnother.prototype.getItems = function () {\n    return this.container.find('.fh-add-another__item');\n};\n// todo: ? a better approach would be to have a template item that we clone,\n// rather than having to strip the error from the first item\nwindow.FamilyHubsFrontend.AddAnother.prototype.stripErrorFromNewItem = function (item) {\n    // remove the govuk-form-group--error class from any divs that have it set\n    item.querySelectorAll('div.govuk-form-group--error').forEach(function (el, index) {\n        el.classList.remove('govuk-form-group--error');\n    });\n    // find all paragraphs with the class govuk-error-message and remove them\n    item.querySelectorAll('p.govuk-error-message').forEach(function (el, index) {\n        el.parentNode.removeChild(el);\n    });\n    // remove the govuk-select--error class from any selects that have it set\n    item.querySelectorAll('select.govuk-select--error').forEach(function (el, index) {\n        el.classList.remove('govuk-select--error');\n    });\n    // remove the govuk-input--error class from any inputs that have it set\n    item.querySelectorAll('input.govuk-input--error').forEach(function (el, index) {\n        el.classList.remove('govuk-input--error');\n    });\n};\nwindow.FamilyHubsFrontend.AddAnother.prototype.getNewItem = function () {\n    // get the first item and clone it\n    const items = this.getItems();\n    const item = items[0].cloneNode(true);\n    this.stripErrorFromNewItem(item);\n    // find the autocomplete wrappers and remove the elements that are added by accessible-autocomplete\n    const autocompleteWrappers = item.querySelectorAll('.autocomplete__wrapper');\n    autocompleteWrappers.forEach(wrapper => {\n        if (wrapper.parentNode.parentNode) {\n            wrapper.parentNode.parentNode.removeChild(wrapper.parentNode);\n        }\n    });\n    var $item = $(item);\n    // update the id and name attributes\n    this.updateAttributes(++this.index, $item);\n    this.resetItem($item);\n    // call the callback which needs to apply accessibility-autocomplete enhancements to the new item\n    if (typeof this.callback === 'function') {\n        this.callback(item);\n    }\n    // Create a remove button if it doesn't exist\n    if (!this.hasRemoveButton($item)) {\n        this.createRemoveButton($item);\n    }\n    return $item;\n};\nwindow.FamilyHubsFrontend.AddAnother.prototype.updateAttributes = function (index, item) {\n    item.find('[data-name]').each(function (i, el) {\n        var originalId = el.id;\n        el.name = $(el).attr('data-name').replace(/%index%/, index);\n        el.id = $(el).attr('data-id').replace(/%index%/, index);\n        var label = $(el).siblings('label')[0] || $(el).parents('label')[0] || item.find('[for=\"' + originalId + '\"]')[0];\n        label.htmlFor = el.id;\n    });\n};\nwindow.FamilyHubsFrontend.AddAnother.prototype.createRemoveButton = function (item) {\n    item.append('<button type=\"submit\" class=\"govuk-button govuk-button--secondary fh-add-another__remove-button\">Remove</button>');\n};\nwindow.FamilyHubsFrontend.AddAnother.prototype.resetItem = function (item) {\n    // accessibile-autocomplete adds an input (without data-name or data-id)\n    // so we blank all input controls\n    item.find('input, textarea, select').each(function (index, el) {\n        if (el.type == 'checkbox' || el.type == 'radio') {\n            el.checked = false;\n        }\n        else {\n            el.value = '';\n        }\n    });\n};\nwindow.FamilyHubsFrontend.AddAnother.prototype.onRemoveButtonClick = function (e) {\n    $(e.currentTarget).parents('.fh-add-another__item').remove();\n    var items = this.getItems();\n    if (items.length === 1) {\n        items.find('.fh-add-another__remove-button').remove();\n    }\n    this.focusHeading();\n    e.preventDefault();\n};\nwindow.FamilyHubsFrontend.AddAnother.prototype.focusHeading = function () {\n    this.container.find('.fh-add-another__heading').focus();\n};\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYWRkLWFub3RoZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMEdBQTBHO0FBQzFHLGlDQUFpQztBQUNqQyw4REFBOEQ7QUFDOUQsc0dBQXNHO0FBQ3RHLG9EQUFvRDtBQUVwRCwyR0FBMkc7QUFDM0csaUVBQWlFO0FBRWpFLE1BQU0sQ0FBQyxrQkFBa0IsR0FBRyxNQUFNLENBQUMsa0JBQWtCLElBQUksRUFBRSxDQUFDO0FBRTVELE1BQU0sVUFBVSxvQkFBb0I7SUFDaEMsbUNBQW1DO0lBQ25DLElBQUksWUFBWSxHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0lBRWxGLFlBQVksQ0FBQyxPQUFPLENBQUMsVUFBVSxXQUFXO1FBQ3pDLElBQUksTUFBTSxDQUFDLGtCQUFrQixDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNwRCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFFRCxNQUFNLENBQUMsa0JBQWtCLENBQUMsVUFBVSxHQUFHLFVBQVUsU0FBUztJQUN6RCxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUM5QixJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztJQUVmLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsNEJBQTRCLENBQUMsRUFBRSxDQUFDO1FBQ3ZELE9BQU07SUFDUCxDQUFDO0lBRUQsMERBQTBEO0lBQzFELElBQUksWUFBWSxHQUFHLFNBQVMsQ0FBQyxZQUFZLENBQUMsOEJBQThCLENBQUMsQ0FBQztJQUUxRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztJQUNyQixRQUFRLENBQUMsZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUU7UUFDN0MsSUFBSSxPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxVQUFVLEVBQUUsQ0FBQztZQUNoRCxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FB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RSxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUNwQixDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEdBQUc7SUFDN0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUN6RCxDQUFDLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9hZGQtYW5vdGhlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEEgdmVyc2lvbiBvZiB0aGUgTU9KJ3MgYWRkLWFub3RoZXIgY29tcG9uZW50IHRoYXQgcGxheXMgbmljZSB3aXRoIHRoZSBhY2Nlc3NpYmxlIGF1dG9jb21wbGV0ZSBjb21wb25lbnRcbi8vIGFuZCB3b3JrcyB3aXRoIGVycm9yZWQgZmllbGRzLlxuLy8gSSBkaWQgY29uc2lkZXIgc3ViY2xhc3NpbmcgdGhlIE1PSidzIGFkZC1hbm90aGVyIGNvbXBvbmVudCxcbi8vIGJ1dCBpdCB3b3VsZCBoYXZlIGJlZW4gc28gY291cGxlZCB0aGF0IGl0IHdvdWxkJ3ZlIHByb2JhYmx5IGJyb2tlbiBvbiBhbiB1cGRhdGUgb2YgdGhlIE1PSiBsaWJyYXJ5LlxuLy8gU28gaW5zdGVhZCB3ZSBmb3JrZWQgaXQgYW5kIG1hZGUgb3VyIG93biB2ZXJzaW9uLlxuXG4vL3RvZG86IHdoZW4gYWNjZXNzaWJsZS1hdXRvY29tcGxldGUgY3JlYXRlcyB0aGUgaW5wdXQsIGl0IGRvZXNuJ3QgaGFuZGxlIHRoZSBhcmlhLWRlc2NyaWJlZGJ5IGNvcnJlY3RseS4uLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2FscGhhZ292L2FjY2Vzc2libGUtYXV0b2NvbXBsZXRlL2lzc3Vlcy81ODlcblxud2luZG93LkZhbWlseUh1YnNGcm9udGVuZCA9IHdpbmRvdy5GYW1pbHlIdWJzRnJvbnRlbmQgfHwge307XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQWRkQW5vdGhlcigpOiB2b2lkIHtcbiAgICAvL3RvZG86IHN1cHBvcnQgb3B0aW9ucyB3aXRoIHNjb3BlP1xuICAgIHZhciAkYWRkQW5vdGhlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1tb2R1bGU9XCJmaC1hZGQtYW5vdGhlclwiXScpO1xuXG5cdCRhZGRBbm90aGVycy5mb3JFYWNoKGZ1bmN0aW9uICgkYWRkQW5vdGhlcikge1xuXHRcdG5ldyB3aW5kb3cuRmFtaWx5SHVic0Zyb250ZW5kLkFkZEFub3RoZXIoJGFkZEFub3RoZXIpO1xuICAgIH0pO1xufVxuXG53aW5kb3cuRmFtaWx5SHVic0Zyb250ZW5kLkFkZEFub3RoZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG5cdHRoaXMuY29udGFpbmVyID0gJChjb250YWluZXIpO1xuXHR0aGlzLmluZGV4ID0gMDtcblxuXHRpZiAodGhpcy5jb250YWluZXIuZGF0YSgnZmgtYWRkLWFub3RoZXItaW5pdGlhbGlzZWQnKSkge1xuXHRcdHJldHVyblxuXHR9XG5cblx0Ly90b2RvOiB0aGlzIGlzIGEgYml0IGhhY2t5IC0gZmluZCBhIGJldHRlciB3YXkgdG8gZG8gdGhpc1xuXHR2YXIgZnVuY3Rpb25OYW1lID0gY29udGFpbmVyLmdldEF0dHJpYnV0ZSgnZGF0YS1maC1hZGQtYW5vdGhlci1jYWxsYmFjaycpO1xuXG5cdHRoaXMuY2FsbGJhY2sgPSBudWxsO1xuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93W2Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdHRoaXMuY2FsbGJhY2sgPSB3aW5kb3dbZnVuY3Rpb25OYW1lXTtcblx0XHRcdHRoaXMuY2FsbGJhY2soY29udGFpbmVyKTtcblx0XHR9XG5cdH0uYmluZCh0aGlzKSk7XG5cblx0dGhpcy5jb250YWluZXIuZGF0YSgnZmgtYWRkLWFub3RoZXItaW5pdGlhbGlzZWQnLCB0cnVlKTtcblxuXHR0aGlzLmNvbnRhaW5lci5vbignY2xpY2snLCAnLmZoLWFkZC1hbm90aGVyX19yZW1vdmUtYnV0dG9uJywgJC5wcm94eSh0aGlzLCAnb25SZW1vdmVCdXR0b25DbGljaycpKTtcblx0dGhpcy5jb250YWluZXIub24oJ2NsaWNrJywgJy5maC1hZGQtYW5vdGhlcl9fYWRkLWJ1dHRvbicsICQucHJveHkodGhpcywgJ29uQWRkQnV0dG9uQ2xpY2snKSk7XG5cdHRoaXMuY29udGFpbmVyLmZpbmQoJy5maC1hZGQtYW5vdGhlcl9fYWRkLWJ1dHRvbiwgZmgtYWRkLWFub3RoZXJfX3JlbW92ZS1idXR0b24nKS5wcm9wKCd0eXBlJywgJ3N1Ym1pdCcpO1xufTtcblxud2luZG93LkZhbWlseUh1YnNGcm9udGVuZC5BZGRBbm90aGVyLnByb3RvdHlwZS5vbkFkZEJ1dHRvbkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcblx0dmFyIGl0ZW0gPSB0aGlzLmdldE5ld0l0ZW0oKTtcblxuXHR2YXIgZmlyc3RJdGVtID0gdGhpcy5nZXRJdGVtcygpLmZpcnN0KCk7XG5cdGlmICghdGhpcy5oYXNSZW1vdmVCdXR0b24oZmlyc3RJdGVtKSkge1xuXHRcdHRoaXMuY3JlYXRlUmVtb3ZlQnV0dG9uKGZpcnN0SXRlbSk7XG5cdH1cblx0dGhpcy5nZXRJdGVtcygpLmxhc3QoKS5hZnRlcihpdGVtKTtcblx0aXRlbS5maW5kKCdpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCcpLmZpcnN0KCkuZm9jdXMoKTtcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xufTtcblxud2luZG93LkZhbWlseUh1YnNGcm9udGVuZC5BZGRBbm90aGVyLnByb3RvdHlwZS5oYXNSZW1vdmVCdXR0b24gPSBmdW5jdGlvbiAoaXRlbSkge1xuXHRyZXR1cm4gaXRlbS5maW5kKCcuZmgtYWRkLWFub3RoZXJfX3JlbW92ZS1idXR0b24nKS5sZW5ndGg7XG59O1xuXG53aW5kb3cuRmFtaWx5SHVic0Zyb250ZW5kLkFkZEFub3RoZXIucHJvdG90eXBlLmdldEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy5jb250YWluZXIuZmluZCgnLmZoLWFkZC1hbm90aGVyX19pdGVtJyk7XG59O1xuXG4vLyB0b2RvOiA/IGEgYmV0dGVyIGFwcHJvYWNoIHdvdWxkIGJlIHRvIGhhdmUgYSB0ZW1wbGF0ZSBpdGVtIHRoYXQgd2UgY2xvbmUsXG4vLyByYXRoZXIgdGhhbiBoYXZpbmcgdG8gc3RyaXAgdGhlIGVycm9yIGZyb20gdGhlIGZpcnN0IGl0ZW1cbndpbmRvdy5GYW1pbHlIdWJzRnJvbnRlbmQuQWRkQW5vdGhlci5wcm90b3R5cGUuc3RyaXBFcnJvckZyb21OZXdJdGVtID0gZnVuY3Rpb24gKGl0ZW06IEhUTUxFbGVtZW50KSB7XG5cblx0Ly8gcmVtb3ZlIHRoZSBnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvciBjbGFzcyBmcm9tIGFueSBkaXZzIHRoYXQgaGF2ZSBpdCBzZXRcblx0aXRlbS5xdWVyeVNlbGVjdG9yQWxsKCdkaXYuZ292dWstZm9ybS1ncm91cC0tZXJyb3InKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCwgaW5kZXgpIHtcblx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpO1xuXHR9KTtcblxuXHQvLyBmaW5kIGFsbCBwYXJhZ3JhcGhzIHdpdGggdGhlIGNsYXNzIGdvdnVrLWVycm9yLW1lc3NhZ2UgYW5kIHJlbW92ZSB0aGVtXG5cdGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgncC5nb3Z1ay1lcnJvci1tZXNzYWdlJykuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGluZGV4KSB7XG4gICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuXHR9KTtcblxuXHQvLyByZW1vdmUgdGhlIGdvdnVrLXNlbGVjdC0tZXJyb3IgY2xhc3MgZnJvbSBhbnkgc2VsZWN0cyB0aGF0IGhhdmUgaXQgc2V0XG5cdGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0LmdvdnVrLXNlbGVjdC0tZXJyb3InKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCwgaW5kZXgpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnZ292dWstc2VsZWN0LS1lcnJvcicpO1xuXHR9KTtcblxuXHQvLyByZW1vdmUgdGhlIGdvdnVrLWlucHV0LS1lcnJvciBjbGFzcyBmcm9tIGFueSBpbnB1dHMgdGhhdCBoYXZlIGl0IHNldFxuXHRpdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LmdvdnVrLWlucHV0LS1lcnJvcicpLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpbmRleCkge1xuXHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2dvdnVrLWlucHV0LS1lcnJvcicpO1xuXHR9KTtcbn1cblxud2luZG93LkZhbWlseUh1YnNGcm9udGVuZC5BZGRBbm90aGVyLnByb3RvdHlwZS5nZXROZXdJdGVtID0gZnVuY3Rpb24gKCkgeyAvLzogSlF1ZXJ5PEhUTUxFbGVtZW50PiAvL0hUTUxFbGVtZW50IHtcbiAgICAvLyBnZXQgdGhlIGZpcnN0IGl0ZW0gYW5kIGNsb25lIGl0XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKCk7XG4gICAgY29uc3QgaXRlbSA9IGl0ZW1zWzBdLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcblxuXHR0aGlzLnN0cmlwRXJyb3JGcm9tTmV3SXRlbShpdGVtKTtcblxuICAgIC8vIGZpbmQgdGhlIGF1dG9jb21wbGV0ZSB3cmFwcGVycyBhbmQgcmVtb3ZlIHRoZSBlbGVtZW50cyB0aGF0IGFyZSBhZGRlZCBieSBhY2Nlc3NpYmxlLWF1dG9jb21wbGV0ZVxuICAgIGNvbnN0IGF1dG9jb21wbGV0ZVdyYXBwZXJzID0gaXRlbS5xdWVyeVNlbGVjdG9yQWxsKCcuYXV0b2NvbXBsZXRlX193cmFwcGVyJyk7XG4gICAgYXV0b2NvbXBsZXRlV3JhcHBlcnMuZm9yRWFjaCh3cmFwcGVyID0+IHtcbiAgICAgICAgaWYgKHdyYXBwZXIucGFyZW50Tm9kZS5wYXJlbnROb2RlKSB7XG5cdFx0XHR3cmFwcGVyLnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh3cmFwcGVyLnBhcmVudE5vZGUpO1xuICAgICAgICB9XG4gICAgfSk7XG5cblx0dmFyICRpdGVtID0gJChpdGVtKTtcblxuXHQvLyB1cGRhdGUgdGhlIGlkIGFuZCBuYW1lIGF0dHJpYnV0ZXNcblx0dGhpcy51cGRhdGVBdHRyaWJ1dGVzKCsrdGhpcy5pbmRleCwgJGl0ZW0pO1xuXG5cdHRoaXMucmVzZXRJdGVtKCRpdGVtKTtcblxuXHQvLyBjYWxsIHRoZSBjYWxsYmFjayB3aGljaCBuZWVkcyB0byBhcHBseSBhY2Nlc3NpYmlsaXR5LWF1dG9jb21wbGV0ZSBlbmhhbmNlbWVudHMgdG8gdGhlIG5ldyBpdGVtXG5cdGlmICh0eXBlb2YgdGhpcy5jYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHRoaXMuY2FsbGJhY2soaXRlbSk7XG5cdH1cblxuICAgIC8vIENyZWF0ZSBhIHJlbW92ZSBidXR0b24gaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGlmICghdGhpcy5oYXNSZW1vdmVCdXR0b24oJGl0ZW0pKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlUmVtb3ZlQnV0dG9uKCRpdGVtKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJGl0ZW07XG59O1xuXG53aW5kb3cuRmFtaWx5SHVic0Zyb250ZW5kLkFkZEFub3RoZXIucHJvdG90eXBlLnVwZGF0ZUF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcblx0aXRlbS5maW5kKCdbZGF0YS1uYW1lXScpLmVhY2goZnVuY3Rpb24gKGksIGVsKSB7XG5cdFx0dmFyIG9yaWdpbmFsSWQgPSBlbC5pZFxuXG5cdFx0ZWwubmFtZSA9ICQoZWwpLmF0dHIoJ2RhdGEtbmFtZScpLnJlcGxhY2UoLyVpbmRleCUvLCBpbmRleCk7XG5cdFx0ZWwuaWQgPSAkKGVsKS5hdHRyKCdkYXRhLWlkJykucmVwbGFjZSgvJWluZGV4JS8sIGluZGV4KTtcblxuXHRcdHZhciBsYWJlbCA9ICQoZWwpLnNpYmxpbmdzKCdsYWJlbCcpWzBdIHx8ICQoZWwpLnBhcmVudHMoJ2xhYmVsJylbMF0gfHwgaXRlbS5maW5kKCdbZm9yPVwiJyArIG9yaWdpbmFsSWQgKyAnXCJdJylbMF07XG5cdFx0bGFiZWwuaHRtbEZvciA9IGVsLmlkO1xuXHR9KTtcbn07XG5cbndpbmRvdy5GYW1pbHlIdWJzRnJvbnRlbmQuQWRkQW5vdGhlci5wcm90b3R5cGUuY3JlYXRlUmVtb3ZlQnV0dG9uID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0aXRlbS5hcHBlbmQoJzxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiZ292dWstYnV0dG9uIGdvdnVrLWJ1dHRvbi0tc2Vjb25kYXJ5IGZoLWFkZC1hbm90aGVyX19yZW1vdmUtYnV0dG9uXCI+UmVtb3ZlPC9idXR0b24+Jyk7XG59O1xuXG53aW5kb3cuRmFtaWx5SHVic0Zyb250ZW5kLkFkZEFub3RoZXIucHJvdG90eXBlLnJlc2V0SXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cdC8vIGFjY2Vzc2liaWxlLWF1dG9jb21wbGV0ZSBhZGRzIGFuIGlucHV0ICh3aXRob3V0IGRhdGEtbmFtZSBvciBkYXRhLWlkKVxuXHQvLyBzbyB3ZSBibGFuayBhbGwgaW5wdXQgY29udHJvbHNcbiAgICBpdGVtLmZpbmQoJ2lucHV0LCB0ZXh0YXJlYSwgc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsKSB7XG5cdFx0aWYgKGVsLnR5cGUgPT0gJ2NoZWNrYm94JyB8fCBlbC50eXBlID09ICdyYWRpbycpIHtcblx0XHRcdGVsLmNoZWNrZWQgPSBmYWxzZTtcblx0XHR9XG5cdFx0ZWxzZSB7XG4gICAgICAgICAgICBlbC52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG53aW5kb3cuRmFtaWx5SHVic0Zyb250ZW5kLkFkZEFub3RoZXIucHJvdG90eXBlLm9uUmVtb3ZlQnV0dG9uQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuXHQkKGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLmZoLWFkZC1hbm90aGVyX19pdGVtJykucmVtb3ZlKCk7XG5cdHZhciBpdGVtcyA9IHRoaXMuZ2V0SXRlbXMoKTtcblx0aWYgKGl0ZW1zLmxlbmd0aCA9PT0gMSkge1xuXHRcdGl0ZW1zLmZpbmQoJy5maC1hZGQtYW5vdGhlcl9fcmVtb3ZlLWJ1dHRvbicpLnJlbW92ZSgpO1xuXHR9XG5cdHRoaXMuZm9jdXNIZWFkaW5nKCk7XG5cdGUucHJldmVudERlZmF1bHQoKTtcbn07XG5cbndpbmRvdy5GYW1pbHlIdWJzRnJvbnRlbmQuQWRkQW5vdGhlci5wcm90b3R5cGUuZm9jdXNIZWFkaW5nID0gZnVuY3Rpb24gKCkge1xuXHR0aGlzLmNvbnRhaW5lci5maW5kKCcuZmgtYWRkLWFub3RoZXJfX2hlYWRpbmcnKS5mb2N1cygpO1xufTtcbiJdfQ==\n","import { nodeListForEach } from './helpers';\nexport function initializeBackButtons() {\n    // Check if the page wasn't opened in a new tab or a standalone window\n    if (history.length > 1) {\n        const backLinks = document.querySelectorAll(\".fh-back-link\");\n        nodeListForEach(backLinks, (link) => {\n            link.classList.add(\"fh-back-link-visible\");\n            // set the href to the last page in the history\n            link.href = document.referrer;\n        });\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYmFjay1saW5rcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBRTNDLE1BQU0sVUFBVSxxQkFBcUI7SUFFakMsc0VBQXNFO0lBQ3RFLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztRQUVyQixNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDN0QsZUFBZSxDQUFDLFNBQVMsRUFBRSxDQUFDLElBQXVCLEVBQUUsRUFBRTtZQUVuRCxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1lBRTNDLCtDQUErQztZQUMvQyxJQUFJLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUM7UUFDbEMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0FBQ0wsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL2JhY2stbGlua3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBub2RlTGlzdEZvckVhY2ggfSBmcm9tICcuL2hlbHBlcnMnXG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQmFja0J1dHRvbnMoKTogdm9pZCB7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgcGFnZSB3YXNuJ3Qgb3BlbmVkIGluIGEgbmV3IHRhYiBvciBhIHN0YW5kYWxvbmUgd2luZG93XG4gICAgaWYgKGhpc3RvcnkubGVuZ3RoID4gMSkge1xuXG4gICAgICAgIGNvbnN0IGJhY2tMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmgtYmFjay1saW5rXCIpO1xuICAgICAgICBub2RlTGlzdEZvckVhY2goYmFja0xpbmtzLCAobGluazogSFRNTEFuY2hvckVsZW1lbnQpID0+IHtcblxuICAgICAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKFwiZmgtYmFjay1saW5rLXZpc2libGVcIik7XG5cbiAgICAgICAgICAgIC8vIHNldCB0aGUgaHJlZiB0byB0aGUgbGFzdCBwYWdlIGluIHRoZSBoaXN0b3J5XG4gICAgICAgICAgICBsaW5rLmhyZWYgPSBkb2N1bWVudC5yZWZlcnJlcjtcbiAgICAgICAgfSk7XG4gICAgfVxufSJdfQ==\n","import { nodeListForEach } from './helpers';\nexport function initializeVisibilityToggles() {\n    const visibilityToggles = document.querySelectorAll(\"[data-toggle-visibility-id]\");\n    nodeListForEach(visibilityToggles, (toggle) => {\n        toggle.addEventListener('click', function handleClick(event) {\n            let toToggleId = toggle.getAttribute(\"data-toggle-visibility-id\");\n            if (toToggleId) {\n                let toToggle = document.getElementById(toToggleId);\n                if (toToggle) {\n                    if (toToggle.style.display === \"none\") {\n                        toToggle.style.display = \"block\";\n                    }\n                    else {\n                        toToggle.style.display = \"none\";\n                    }\n                }\n            }\n        });\n    });\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvdmlzaWJpbGl0eS10b2dnbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLFdBQVcsQ0FBQTtBQUUzQyxNQUFNLFVBQVUsMkJBQTJCO0lBRXZDLE1BQU0saUJBQWlCLEdBQUcsUUFBUSxDQUFDLGdCQUFnQixDQUFDLDZCQUE2QixDQUFDLENBQUM7SUFDbkYsZUFBZSxDQUFDLGlCQUFpQixFQUM3QixDQUFDLE1BQW1CLEVBQUUsRUFBRTtRQUVwQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUMzQixTQUFTLFdBQVcsQ0FBQyxLQUFLO1lBRXRCLElBQUksVUFBVSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsMkJBQTJCLENBQUMsQ0FBQztZQUNsRSxJQUFJLFVBQVUsRUFBRSxDQUFDO2dCQUNiLElBQUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ25ELElBQUksUUFBUSxFQUFFLENBQUM7b0JBQ1gsSUFBSSxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQU8sS0FBSyxNQUFNLEVBQUUsQ0FBQzt3QkFDcEMsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO29CQUNyQyxDQUFDO3lCQUFNLENBQUM7d0JBQ0osUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO29CQUNwQyxDQUFDO2dCQUNMLENBQUM7WUFDTCxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDWCxDQUFDLENBQUMsQ0FBQztBQUNYLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy92aXNpYmlsaXR5LXRvZ2dsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG5vZGVMaXN0Rm9yRWFjaCB9IGZyb20gJy4vaGVscGVycydcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVWaXNpYmlsaXR5VG9nZ2xlcygpOiB2b2lkIHtcblxuICAgIGNvbnN0IHZpc2liaWxpdHlUb2dnbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXRvZ2dsZS12aXNpYmlsaXR5LWlkXVwiKTtcbiAgICBub2RlTGlzdEZvckVhY2godmlzaWJpbGl0eVRvZ2dsZXMsXG4gICAgICAgICh0b2dnbGU6IEhUTUxFbGVtZW50KSA9PiB7XG5cbiAgICAgICAgICAgIHRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlQ2xpY2soZXZlbnQpIHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgdG9Ub2dnbGVJZCA9IHRvZ2dsZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS12aXNpYmlsaXR5LWlkXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9Ub2dnbGVJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodG9Ub2dnbGVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9Ub2dnbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9Ub2dnbGUuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9Ub2dnbGUuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1RvZ2dsZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xufSJdfQ==\n","//todo: make it a standard govuk module?\n//import { GOVUKFrontendComponent } from '../../govuk-frontend-component.mjs'\n/*todo: rename fh-open-close-target-user-opened fh-open-close-target-open-non-desktop or somesuch */\nexport class OpenCloseButton {\n    constructor(openCloseButton) {\n        //super();\n        //if (!(openCloseButton instanceof HTMLButtonElement)) {\n        //}\n        this.openCloseButton = openCloseButton;\n        const targetId = this.openCloseButton.getAttribute('data-open-close-mobile');\n        this.target = document.getElementById(targetId);\n        this.showText = this.openCloseButton.textContent;\n        this.hideText = this.openCloseButton.getAttribute('data-open-close-mobile-hide');\n        this.target.classList.add('fh-open-close-target');\n        let defaultTargetVisibility = this.openCloseButton.getAttribute('data-open-close-mobile-default');\n        if (defaultTargetVisibility === \"hide\") {\n            this.hideTarget();\n        }\n        else {\n            this.showTarget();\n        }\n        this.openCloseButton.addEventListener('click', (event) => this.handleClick(event));\n    }\n    handleClick(event) {\n        if (this.target.classList.contains('fh-open-close-target-user-opened')) {\n            this.hideTarget();\n        }\n        else {\n            this.showTarget();\n        }\n    }\n    showTarget() {\n        if (this.target) {\n            if (!this.target.classList.contains('fh-open-close-target-user-opened')) {\n                this.target.classList.add('fh-open-close-target-user-opened');\n            }\n        }\n        if (this.hideText) {\n            this.openCloseButton.textContent = this.hideText;\n        }\n    }\n    hideTarget() {\n        if (this.target) {\n            this.target.classList.remove('fh-open-close-target-user-opened');\n        }\n        if (this.showText) {\n            this.openCloseButton.textContent = this.showText;\n        }\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvb3Blbi1jbG9zZS1idXR0b24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsd0NBQXdDO0FBQ3hDLDZFQUE2RTtBQUU3RSxvR0FBb0c7QUFFcEcsTUFBTSxPQUFPLGVBQWU7SUFPeEIsWUFBWSxlQUFrQztRQUMxQyxVQUFVO1FBRVYsd0RBQXdEO1FBQ3hELEdBQUc7UUFFSCxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUN2QyxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFTLENBQXVCLENBQUM7UUFFdkUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQztRQUNqRCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLDZCQUE2QixDQUFDLENBQUM7UUFFakYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFFbEQsSUFBSSx1QkFBdUIsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO1FBQ2xHLElBQUksdUJBQXVCLEtBQUssTUFBTSxFQUFFLENBQUM7WUFDckMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3RCLENBQUM7YUFBTSxDQUFDO1lBQ0osSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3RCLENBQUM7UUFFRCxJQUFJLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ3ZGLENBQUM7SUFFRCxXQUFXLENBQUMsS0FBWTtRQUNwQixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxrQ0FBa0MsQ0FBQyxFQUFFLENBQUM7WUFDckUsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3RCLENBQUM7YUFBTSxDQUFDO1lBQ0osSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3RCLENBQUM7SUFDTCxDQUFDO0lBRUQsVUFBVTtRQUNOLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxrQ0FBa0MsQ0FBQyxFQUFFLENBQUM7Z0JBQ3RFLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDO1lBQ2xFLENBQUM7UUFDTCxDQUFDO1FBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDaEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUNyRCxDQUFDO0lBQ0wsQ0FBQztJQUNELFVBQVU7UUFDTixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNkLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDO1FBQ3JFLENBQUM7UUFDRCxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNoQixJQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3JELENBQUM7SUFDTCxDQUFDO0NBS0oiLCJmaWxlIjoiY29tcG9uZW50cy9vcGVuLWNsb3NlLWJ1dHRvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vdG9kbzogbWFrZSBpdCBhIHN0YW5kYXJkIGdvdnVrIG1vZHVsZT9cbi8vaW1wb3J0IHsgR09WVUtGcm9udGVuZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2dvdnVrLWZyb250ZW5kLWNvbXBvbmVudC5tanMnXG5cbi8qdG9kbzogcmVuYW1lIGZoLW9wZW4tY2xvc2UtdGFyZ2V0LXVzZXItb3BlbmVkIGZoLW9wZW4tY2xvc2UtdGFyZ2V0LW9wZW4tbm9uLWRlc2t0b3Agb3Igc29tZXN1Y2ggKi9cblxuZXhwb3J0IGNsYXNzIE9wZW5DbG9zZUJ1dHRvbiB7IC8vIGV4dGVuZHMgR09WVUtGcm9udGVuZENvbXBvbmVudCB7XG5cbiAgICBvcGVuQ2xvc2VCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHRhcmdldDogSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgIHNob3dUZXh0OiBzdHJpbmcgfCBudWxsO1xuICAgIGhpZGVUZXh0OiBzdHJpbmcgfCBudWxsO1xuXG4gICAgY29uc3RydWN0b3Iob3BlbkNsb3NlQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCkge1xuICAgICAgICAvL3N1cGVyKCk7XG5cbiAgICAgICAgLy9pZiAoIShvcGVuQ2xvc2VCdXR0b24gaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudCkpIHtcbiAgICAgICAgLy99XG5cbiAgICAgICAgdGhpcy5vcGVuQ2xvc2VCdXR0b24gPSBvcGVuQ2xvc2VCdXR0b247XG4gICAgICAgIGNvbnN0IHRhcmdldElkID0gdGhpcy5vcGVuQ2xvc2VCdXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLW9wZW4tY2xvc2UtbW9iaWxlJyk7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0SWQhKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG5cbiAgICAgICAgdGhpcy5zaG93VGV4dCA9IHRoaXMub3BlbkNsb3NlQnV0dG9uLnRleHRDb250ZW50O1xuICAgICAgICB0aGlzLmhpZGVUZXh0ID0gdGhpcy5vcGVuQ2xvc2VCdXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLW9wZW4tY2xvc2UtbW9iaWxlLWhpZGUnKTtcblxuICAgICAgICB0aGlzLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdmaC1vcGVuLWNsb3NlLXRhcmdldCcpO1xuXG4gICAgICAgIGxldCBkZWZhdWx0VGFyZ2V0VmlzaWJpbGl0eSA9IHRoaXMub3BlbkNsb3NlQnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS1vcGVuLWNsb3NlLW1vYmlsZS1kZWZhdWx0Jyk7XG4gICAgICAgIGlmIChkZWZhdWx0VGFyZ2V0VmlzaWJpbGl0eSA9PT0gXCJoaWRlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVRhcmdldCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93VGFyZ2V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9wZW5DbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gdGhpcy5oYW5kbGVDbGljayhldmVudCkpO1xuICAgIH1cblxuICAgIGhhbmRsZUNsaWNrKGV2ZW50OiBFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaC1vcGVuLWNsb3NlLXRhcmdldC11c2VyLW9wZW5lZCcpKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVUYXJnZXQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1RhcmdldCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hvd1RhcmdldCgpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmgtb3Blbi1jbG9zZS10YXJnZXQtdXNlci1vcGVuZWQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZoLW9wZW4tY2xvc2UtdGFyZ2V0LXVzZXItb3BlbmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGlkZVRleHQpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkNsb3NlQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5oaWRlVGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoaWRlVGFyZ2V0KCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2ZoLW9wZW4tY2xvc2UtdGFyZ2V0LXVzZXItb3BlbmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2hvd1RleHQpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkNsb3NlQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5zaG93VGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBOYW1lIGZvciB0aGUgY29tcG9uZW50IHVzZWQgd2hlbiBpbml0aWFsaXNpbmcgdXNpbmcgZGF0YS1tb2R1bGUgYXR0cmlidXRlcy5cbiAgICAgKi9cbi8qICAgIHN0YXRpYyBtb2R1bGVOYW1lID0gJ29wZW4tY2xvc2UtYnV0dG9uJzsqL1xufVxuIl19\n","// js components were originally snaffled from https://github.com/alphagov/govuk-design-system/blob/main/src/javascripts/components/\nimport CookieBanner from './components/cookie-banner';\nimport CookiesPage from './components/cookies-page';\nimport initAnalytics from './components/analytics';\nimport initClarity from './components/clarity';\nimport { initializeAddAnother } from './components/add-another';\nimport { initializeBackButtons } from './components/back-links';\nimport { initializeVisibilityToggles } from './components/visibility-toggle';\nimport { OpenCloseButton } from './components/open-close-button';\n//todo: consistency in module/proto/class style\nwindow.FamilyHubsFrontend = window.FamilyHubsFrontend || {};\nwindow.FamilyHubsFrontend.initAll = () => {\n    // Initialise cookie banner\n    const $cookieBanner = document.querySelector('[data-module=\"govuk-cookie-banner\"]');\n    new CookieBanner($cookieBanner).init();\n    initAnalytics(window.GA_MEASUREMENT_ID);\n    initClarity(window.CLARITY_ID);\n    //todo: move this into scripts section on cookie page\n    // Initialise cookie page\n    var $cookiesPage = document.querySelector('[data-module=\"fh-cookies-page\"]');\n    new CookiesPage($cookiesPage).init();\n    initializeBackButtons();\n    initializeVisibilityToggles();\n    initializeAddAnother();\n    // initialise open close buttons\n    let openCloseButtons = document.querySelectorAll('button[data-open-close-mobile]');\n    openCloseButtons === null || openCloseButtons === void 0 ? void 0 : openCloseButtons.forEach((openCloseButton) => {\n        new OpenCloseButton(openCloseButton);\n    });\n};\n//todo: do we want to do this...\n//document.addEventListener(\"DOMContentLoaded\", function () {\nwindow.GOVUKFrontend.initAll();\nwindow.MOJFrontend.initAll();\nwindow.FamilyHubsFrontend.initAll();\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZhbWlseWh1YnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0lBQW9JO0FBc0JwSSxPQUFPLFlBQVksTUFBTSw0QkFBNEIsQ0FBQTtBQUNyRCxPQUFPLFdBQVcsTUFBTSwyQkFBMkIsQ0FBQTtBQUNuRCxPQUFPLGFBQWEsTUFBTSx3QkFBd0IsQ0FBQztBQUNuRCxPQUFPLFdBQVcsTUFBTSxzQkFBc0IsQ0FBQztBQUMvQyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNoRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUNoRSxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUM3RSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFFakUsK0NBQStDO0FBRS9DLE1BQU0sQ0FBQyxrQkFBa0IsR0FBRyxNQUFNLENBQUMsa0JBQWtCLElBQUksRUFBRSxDQUFDO0FBQzVELE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLEdBQUcsR0FBRyxFQUFFO0lBRXJDLDJCQUEyQjtJQUMzQixNQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLHFDQUFxQyxDQUF1QixDQUFDO0lBQzFHLElBQUksWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBRXZDLGFBQWEsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN4QyxXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBRS9CLHFEQUFxRDtJQUNyRCx5QkFBeUI7SUFDekIsSUFBSSxZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBQzdFLElBQUksV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBRXJDLHFCQUFxQixFQUFFLENBQUM7SUFDeEIsMkJBQTJCLEVBQUUsQ0FBQztJQUM5QixvQkFBb0IsRUFBRSxDQUFDO0lBRXZCLGdDQUFnQztJQUNoQyxJQUFJLGdCQUFnQixHQUFrQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztJQUNsSCxnQkFBZ0IsYUFBaEIsZ0JBQWdCLHVCQUFoQixnQkFBZ0IsQ0FBRSxPQUFPLENBQUMsQ0FBQyxlQUFlLEVBQUUsRUFBRTtRQUMxQyxJQUFJLGVBQWUsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQztBQUVGLGdDQUFnQztBQUNoQyw2REFBNkQ7QUFFN0QsTUFBTSxDQUFDLGFBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUMvQixNQUFNLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzdCLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyIsImZpbGUiOiJmYW1pbHlodWJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8ganMgY29tcG9uZW50cyB3ZXJlIG9yaWdpbmFsbHkgc25hZmZsZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vYWxwaGFnb3YvZ292dWstZGVzaWduLXN5c3RlbS9ibG9iL21haW4vc3JjL2phdmFzY3JpcHRzL2NvbXBvbmVudHMvXG5cbi8vdG9kbzogc3dhcCB0byBhIGNvbXBvbmVudHMgZm9sZGVyP1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gICAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgICAgIEdEU19DT05TRU5UX0NPT0tJRV9WRVJTSU9OOiBudW1iZXI7XG4gICAgICAgIEdBX01FQVNVUkVNRU5UX0lEOiBzdHJpbmc7XG4gICAgICAgIEdBX0NPTlRBSU5FUl9JRDogc3RyaW5nO1xuICAgICAgICBHQV9DT09LSUVfTkFNRTogc3RyaW5nO1xuICAgICAgICBDTEFSSVRZX0lEOiBzdHJpbmc7XG4gICAgICAgIGRhdGFMYXllcjogYW55W107XG4gICAgICAgIEZhbWlseUh1YnNGcm9udGVuZDogYW55O1xuICAgICAgICBHT1ZVS0Zyb250ZW5kOiB7XG4gICAgICAgICAgICBpbml0QWxsOiAoKSA9PiB2b2lkO1xuICAgICAgICB9XG4gICAgICAgIE1PSkZyb250ZW5kOiB7XG4gICAgICAgICAgICBpbml0QWxsOiAoKSA9PiB2b2lkO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5pbXBvcnQgQ29va2llQmFubmVyIGZyb20gJy4vY29tcG9uZW50cy9jb29raWUtYmFubmVyJ1xuaW1wb3J0IENvb2tpZXNQYWdlIGZyb20gJy4vY29tcG9uZW50cy9jb29raWVzLXBhZ2UnXG5pbXBvcnQgaW5pdEFuYWx5dGljcyBmcm9tICcuL2NvbXBvbmVudHMvYW5hbHl0aWNzJztcbmltcG9ydCBpbml0Q2xhcml0eSBmcm9tICcuL2NvbXBvbmVudHMvY2xhcml0eSc7XG5pbXBvcnQgeyBpbml0aWFsaXplQWRkQW5vdGhlciB9IGZyb20gJy4vY29tcG9uZW50cy9hZGQtYW5vdGhlcic7XG5pbXBvcnQgeyBpbml0aWFsaXplQmFja0J1dHRvbnMgfSBmcm9tICcuL2NvbXBvbmVudHMvYmFjay1saW5rcyc7XG5pbXBvcnQgeyBpbml0aWFsaXplVmlzaWJpbGl0eVRvZ2dsZXMgfSBmcm9tICcuL2NvbXBvbmVudHMvdmlzaWJpbGl0eS10b2dnbGUnO1xuaW1wb3J0IHsgT3BlbkNsb3NlQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL29wZW4tY2xvc2UtYnV0dG9uJztcblxuLy90b2RvOiBjb25zaXN0ZW5jeSBpbiBtb2R1bGUvcHJvdG8vY2xhc3Mgc3R5bGVcblxud2luZG93LkZhbWlseUh1YnNGcm9udGVuZCA9IHdpbmRvdy5GYW1pbHlIdWJzRnJvbnRlbmQgfHwge307XG53aW5kb3cuRmFtaWx5SHVic0Zyb250ZW5kLmluaXRBbGwgPSAoKSA9PiB7XG5cbiAgICAvLyBJbml0aWFsaXNlIGNvb2tpZSBiYW5uZXJcbiAgICBjb25zdCAkY29va2llQmFubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kdWxlPVwiZ292dWstY29va2llLWJhbm5lclwiXScpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICBuZXcgQ29va2llQmFubmVyKCRjb29raWVCYW5uZXIpLmluaXQoKTtcblxuICAgIGluaXRBbmFseXRpY3Mod2luZG93LkdBX01FQVNVUkVNRU5UX0lEKTtcbiAgICBpbml0Q2xhcml0eSh3aW5kb3cuQ0xBUklUWV9JRCk7XG5cbiAgICAvL3RvZG86IG1vdmUgdGhpcyBpbnRvIHNjcmlwdHMgc2VjdGlvbiBvbiBjb29raWUgcGFnZVxuICAgIC8vIEluaXRpYWxpc2UgY29va2llIHBhZ2VcbiAgICB2YXIgJGNvb2tpZXNQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kdWxlPVwiZmgtY29va2llcy1wYWdlXCJdJyk7XG4gICAgbmV3IENvb2tpZXNQYWdlKCRjb29raWVzUGFnZSkuaW5pdCgpO1xuXG4gICAgaW5pdGlhbGl6ZUJhY2tCdXR0b25zKCk7XG4gICAgaW5pdGlhbGl6ZVZpc2liaWxpdHlUb2dnbGVzKCk7XG4gICAgaW5pdGlhbGl6ZUFkZEFub3RoZXIoKTtcblxuICAgIC8vIGluaXRpYWxpc2Ugb3BlbiBjbG9zZSBidXR0b25zXG4gICAgbGV0IG9wZW5DbG9zZUJ1dHRvbnM6IE5vZGVMaXN0T2Y8SFRNTEJ1dHRvbkVsZW1lbnQ+ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtb3Blbi1jbG9zZS1tb2JpbGVdJyk7XG4gICAgb3BlbkNsb3NlQnV0dG9ucz8uZm9yRWFjaCgob3BlbkNsb3NlQnV0dG9uKSA9PiB7XG4gICAgICAgIG5ldyBPcGVuQ2xvc2VCdXR0b24ob3BlbkNsb3NlQnV0dG9uKTtcbiAgICB9KTtcbn07XG5cbi8vdG9kbzogZG8gd2Ugd2FudCB0byBkbyB0aGlzLi4uXG4vL2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcblxud2luZG93LkdPVlVLRnJvbnRlbmQuaW5pdEFsbCgpO1xud2luZG93Lk1PSkZyb250ZW5kLmluaXRBbGwoKTtcbndpbmRvdy5GYW1pbHlIdWJzRnJvbnRlbmQuaW5pdEFsbCgpO1xuIl19\n"]}